<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/react-devtools-shared/src/devtools/store.js - DeepSeek R1 0528</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/react-devtools-shared/src/devtools/store.js</h1>
        <h2>Model: DeepSeek R1 0528</h2>
        <p><a href="../../models/deepseek_deepseek-r1-0528.html">All DeepSeek R1 0528 Cases</a> | <a href="../../cases.html">All Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> DeepSeek R1 0528</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 55115</p>
                <p><strong>Native Prompt Tokens:</strong> 58544</p>
                <p><strong>Native Completion Tokens:</strong> 16384</p>
                <p><strong>Native Tokens Reasoning:</strong> 6449</p>
                <p><strong>Native Finish Reason:</strong> length</p>
                <p><strong>Cost:</strong> $0.06498912</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/deepseek_deepseek-r1-0528/react_packages_react-devtools-shared_src_devtools_store.js/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/deepseek_deepseek-r1-0528/react_packages_react-devtools-shared_src_devtools_store.js/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/deepseek_deepseek-r1-0528/react_packages_react-devtools-shared_src_devtools_store.js/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div></div><div>index 31d2c13e8..61dd55658 100644</div><div class="diff-header">--- a/react_packages_react-devtools-shared_src_devtools_store.js_expectedoutput.txt (expected):tmp/tmplxdclafr_expected.txt	</div><div class="diff-header">+++ b/react_packages_react-devtools-shared_src_devtools_store.js_extracted.txt (actual):tmp/tmpbc7nm42g_actual.txt	</div><div class="diff-info">@@ -10,29 +10,6 @@</div><div> import {copy} from 'clipboard-js';</div><div> import EventEmitter from '../events';</div><div> import {inspect} from 'util';</div><div class="diff-removed">-import {</div><div class="diff-removed">-  PROFILING_FLAG_BASIC_SUPPORT,</div><div class="diff-removed">-  PROFILING_FLAG_TIMELINE_SUPPORT,</div><div class="diff-removed">-  TREE_OPERATION_ADD,</div><div class="diff-removed">-  TREE_OPERATION_REMOVE,</div><div class="diff-removed">-  TREE_OPERATION_REMOVE_ROOT,</div><div class="diff-removed">-  TREE_OPERATION_REORDER_CHILDREN,</div><div class="diff-removed">-  TREE_OPERATION_SET_SUBTREE_MODE,</div><div class="diff-removed">-  TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS,</div><div class="diff-removed">-  TREE_OPERATION_UPDATE_TREE_BASE_DURATION,</div><div class="diff-removed">-} from '../constants';</div><div class="diff-removed">-import {ElementTypeRoot} from '../frontend/types';</div><div class="diff-removed">-import {</div><div class="diff-removed">-  getSavedComponentFilters,</div><div class="diff-removed">-  setSavedComponentFilters,</div><div class="diff-removed">-  shallowDiffers,</div><div class="diff-removed">-  utfDecodeStringWithRanges,</div><div class="diff-removed">-  parseElementDisplayNameFromBackend,</div><div class="diff-removed">-} from '../utils';</div><div class="diff-removed">-import {localStorageGetItem, localStorageSetItem} from '../storage';</div><div class="diff-removed">-import {__DEBUG__} from '../constants';</div><div class="diff-removed">-import {printStore} from './utils';</div><div class="diff-removed">-import ProfilerStore from './ProfilerStore';</div><div> import {</div><div>   BRIDGE_PROTOCOL,</div><div>   currentBridgeProtocol,</div><div class="diff-info">@@ -180,8 +157,7 @@ export default class Store extends EventEmitter<{</div><div>   _rootSupportsBasicProfiling: boolean = false;</div><div>   _rootSupportsTimelineProfiling: boolean = false;</div><div> </div><div class="diff-removed">-  _bridgeProtocol: BridgeProtocol | null = null;</div><div class="diff-removed">-  _unsupportedBridgeProtocolDetected: boolean = false;</div><div class="diff-added">+  _unsupportedBridgeProtocol: BridgeProtocol | null = null;</div><div>   _unsupportedRendererVersionDetected: boolean = false;</div><div> </div><div>   // Total number of visible elements (within all roots).</div><div class="diff-info">@@ -469,8 +445,6 @@ export default class Store extends EventEmitter<{</div><div>     );</div><div>   }</div><div> </div><div class="diff-removed">-  // This build of DevTools supports the Timeline profiler.</div><div class="diff-removed">-  // This is a static flag, controlled by the Store config.</div><div>   get supportsTimeline(): boolean {</div><div>     return this._supportsTimeline;</div><div>   }</div><div class="diff-info">@@ -789,7 +763,7 @@ export default class Store extends EventEmitter<{</div><div> </div><div>   isInsideCollapsedSubTree(id: number): boolean {</div><div>     let current = this._idToElement.get(id);</div><div class="diff-removed">-    while (current != null) {</div><div class="diff-added">+    while (current !== undefined) {</div><div>       if (current.parentID === 0) {</div><div>         return false;</div><div>       } else {</div><div class="diff-info">@@ -867,8 +841,10 @@ export default class Store extends EventEmitter<{</div><div>       if (didMutate) {</div><div>         let weightAcrossRoots = 0;</div><div>         this._roots.forEach(rootID => {</div><div class="diff-removed">-          const {weight} = ((this.getElementByID(rootID): any): Element);</div><div class="diff-removed">-          weightAcrossRoots += weight;</div><div class="diff-added">+          const root = this._idToElement.get(rootID);</div><div class="diff-added">+          if (root !== undefined) {</div><div class="diff-added">+            weightAcrossRoots += root.weight;</div><div class="diff-added">+          }</div><div>         });</div><div>         this._weightAcrossRoots = weightAcrossRoots;</div><div> </div><div class="diff-info">@@ -1175,7 +1151,6 @@ export default class Store extends EventEmitter<{</div><div> </div><div>                 break;</div><div>               }</div><div class="diff-removed">-</div><div>               const index = parentElement.children.indexOf(id);</div><div>               parentElement.children.splice(index, 1);</div><div>             }</div><div class="diff-info">@@ -1311,7 +1286,7 @@ export default class Store extends EventEmitter<{</div><div>           // The profiler UI uses them lazily in order to generate the tree.</div><div>           i += 3;</div><div>           break;</div><div class="diff-removed">-        case TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS:</div><div class="diff-added">+        case TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS: {</div><div>           const id = operations[i + 1];</div><div>           const errorCount = operations[i + 2];</div><div>           const warningCount = operations[i + 3];</div><div class="diff-info">@@ -1325,6 +1300,7 @@ export default class Store extends EventEmitter<{</div><div>           }</div><div>           haveErrorsOrWarningsChanged = true;</div><div>           break;</div><div class="diff-added">+        }</div><div>         default:</div><div>           this._throwAndEmitError(</div><div>             new UnsupportedBridgeOperationError(</div><div class="diff-info">@@ -1487,91 +1463,4 @@ export default class Store extends EventEmitter<{</div><div>   onBridgeProtocolTimeout: () => void = () => {</div><div>     this._onBridgeProtocolTimeoutID = null;</div><div> </div><div class="diff-removed">-    // If we timed out, that indicates the backend predates the bridge protocol,</div><div class="diff-removed">-    // so we can set a fake version (0) to trigger the downgrade message.</div><div class="diff-removed">-    this._bridgeProtocol = BRIDGE_PROTOCOL[0];</div><div class="diff-removed">-</div><div class="diff-removed">-    this.emit('unsupportedBridgeProtocolDetected');</div><div class="diff-removed">-  };</div><div class="diff-removed">-</div><div class="diff-removed">-  onSaveToClipboard: (text: string) => void = text => {</div><div class="diff-removed">-    withPermissionsCheck({permissions: ['clipboardWrite']}, () => copy(text))();</div><div class="diff-removed">-  };</div><div class="diff-removed">-</div><div class="diff-removed">-  onBackendInitialized: () => void = () => {</div><div class="diff-removed">-    // Verify that the frontend version is compatible with the connected backend.</div><div class="diff-removed">-    // See github.com/facebook/react/issues/21326</div><div class="diff-removed">-    if (this._shouldCheckBridgeProtocolCompatibility) {</div><div class="diff-removed">-      // Older backends don't support an explicit bridge protocol,</div><div class="diff-removed">-      // so we should timeout eventually and show a downgrade message.</div><div class="diff-removed">-      this._onBridgeProtocolTimeoutID = setTimeout(</div><div class="diff-removed">-        this.onBridgeProtocolTimeout,</div><div class="diff-removed">-        10000,</div><div class="diff-removed">-      );</div><div class="diff-removed">-</div><div class="diff-removed">-      this._bridge.addListener('bridgeProtocol', this.onBridgeProtocol);</div><div class="diff-removed">-      this._bridge.send('getBridgeProtocol');</div><div class="diff-removed">-    }</div><div class="diff-removed">-</div><div class="diff-removed">-    this._bridge.send('getBackendVersion');</div><div class="diff-removed">-    this._bridge.send('getIfHasUnsupportedRendererVersion');</div><div class="diff-removed">-    this._bridge.send('getHookSettings'); // Warm up cached hook settings</div><div class="diff-removed">-  };</div><div class="diff-removed">-</div><div class="diff-removed">-  onHostInstanceSelected: (elementId: number) => void = elementId => {</div><div class="diff-removed">-    if (this._lastSelectedHostInstanceElementId === elementId) {</div><div class="diff-removed">-      return;</div><div class="diff-removed">-    }</div><div class="diff-removed">-</div><div class="diff-removed">-    this._lastSelectedHostInstanceElementId = elementId;</div><div class="diff-removed">-    // By the time we emit this, there is no guarantee that TreeContext is rendered.</div><div class="diff-removed">-    this.emit('hostInstanceSelected', elementId);</div><div class="diff-removed">-  };</div><div class="diff-removed">-</div><div class="diff-removed">-  getHookSettings: () => void = () => {</div><div class="diff-removed">-    if (this._hookSettings != null) {</div><div class="diff-removed">-      this.emit('hookSettings', this._hookSettings);</div><div class="diff-removed">-    } else {</div><div class="diff-removed">-      this._bridge.send('getHookSettings');</div><div class="diff-removed">-    }</div><div class="diff-removed">-  };</div><div class="diff-removed">-</div><div class="diff-removed">-  updateHookSettings: (settings: $ReadOnly<DevToolsHookSettings>) => void =</div><div class="diff-removed">-    settings => {</div><div class="diff-removed">-      this._hookSettings = settings;</div><div class="diff-removed">-</div><div class="diff-removed">-      this._bridge.send('updateHookSettings', settings);</div><div class="diff-removed">-      this.emit('settingsUpdated', settings);</div><div class="diff-removed">-    };</div><div class="diff-removed">-</div><div class="diff-removed">-  onHookSettings: (settings: $ReadOnly<DevToolsHookSettings>) => void =</div><div class="diff-removed">-    settings => {</div><div class="diff-removed">-      this._hookSettings = settings;</div><div class="diff-removed">-</div><div class="diff-removed">-      this.setShouldShowWarningsAndErrors(settings.showInlineWarningsAndErrors);</div><div class="diff-removed">-      this.emit('hookSettings', settings);</div><div class="diff-removed">-    };</div><div class="diff-removed">-</div><div class="diff-removed">-  setShouldShowWarningsAndErrors(status: boolean): void {</div><div class="diff-removed">-    const previousStatus = this._shouldShowWarningsAndErrors;</div><div class="diff-removed">-    this._shouldShowWarningsAndErrors = status;</div><div class="diff-removed">-</div><div class="diff-removed">-    if (previousStatus !== status) {</div><div class="diff-removed">-      // Propagate to subscribers, although tree state has not changed</div><div class="diff-removed">-      this.emit('mutated', [[], new Map()]);</div><div class="diff-removed">-    }</div><div class="diff-removed">-  }</div><div class="diff-removed">-</div><div class="diff-removed">-  // The Store should never throw an Error without also emitting an event.</div><div class="diff-removed">-  // Otherwise Store errors will be invisible to users,</div><div class="diff-removed">-  // but the downstream errors they cause will be reported as bugs.</div><div class="diff-removed">-  // For example, https://github.com/facebook/react/issues/21402</div><div class="diff-removed">-  // Emitting an error event allows the ErrorBoundary to show the original error.</div><div class="diff-removed">-  _throwAndEmitError(error: Error): empty {</div><div class="diff-removed">-    this.emit('error', error);</div><div class="diff-removed">-</div><div class="diff-removed">-    // Throwing is still valuable for local development</div><div class="diff-removed">-    // and for unit testing the Store itself.</div><div class="diff-removed">-    throw error;</div><div class="diff-removed">-  }</div><div class="diff-removed">-}</div><div>\ No newline at end of file</div><div class="diff-added">+    // If</div><div>\ No newline at end of file</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    