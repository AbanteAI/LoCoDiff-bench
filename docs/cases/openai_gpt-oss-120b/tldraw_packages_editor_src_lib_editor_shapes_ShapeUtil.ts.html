<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/editor/src/lib/editor/shapes/ShapeUtil.ts - GPT OSS 120B</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/editor/src/lib/editor/shapes/ShapeUtil.ts</h1>
        <h2>Model: GPT OSS 120B</h2>
        <p><a href="../../models/openai_gpt-oss-120b.html">All GPT OSS 120B Cases</a> | <a href="../../cases.html">All Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> GPT OSS 120B</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 54090</p>
                <p><strong>Native Prompt Tokens:</strong> 53969</p>
                <p><strong>Native Completion Tokens:</strong> 12115</p>
                <p><strong>Native Tokens Reasoning:</strong> 7830</p>
                <p><strong>Native Finish Reason:</strong> stop</p>
                <p><strong>Cost:</strong> $0.0218516</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/openai_gpt-oss-120b/tldraw_packages_editor_src_lib_editor_shapes_ShapeUtil.ts/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/openai_gpt-oss-120b/tldraw_packages_editor_src_lib_editor_shapes_ShapeUtil.ts/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/openai_gpt-oss-120b/tldraw_packages_editor_src_lib_editor_shapes_ShapeUtil.ts/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div></div><div>index a7fabdd89..1b4eafab0 100644</div><div class="diff-header">--- a/tldraw_packages_editor_src_lib_editor_shapes_ShapeUtil.ts_expectedoutput.txt (expected):tmp/tmp7nbjkjzs_expected.txt	</div><div class="diff-header">+++ b/tldraw_packages_editor_src_lib_editor_shapes_ShapeUtil.ts_extracted.txt (actual):tmp/tmp4u5f95wn_actual.txt	</div><div class="diff-info">@@ -32,12 +32,7 @@ export interface TLShapeUtilConstructor<</div><div> 	migrations?: LegacyMigrations | TLPropsMigrations | MigrationSequence</div><div> }</div><div> </div><div class="diff-removed">-/**</div><div class="diff-removed">- * Options passed to {@link ShapeUtil.canBind}. A binding that could be made. At least one of</div><div class="diff-removed">- * `fromShapeType` or `toShapeType` will belong to this shape util.</div><div class="diff-removed">- *</div><div class="diff-removed">- * @public</div><div class="diff-removed">- */</div><div class="diff-added">+/** @public */</div><div> export interface TLShapeUtilCanBindOpts<Shape extends TLUnknownShape = TLUnknownShape> {</div><div> 	/** The type of shape referenced by the `fromId` of the binding. */</div><div> 	fromShapeType: string</div><div class="diff-info">@@ -59,7 +54,8 @@ export interface TLShapeUtilCanBeLaidOutOpts {</div><div> 	shapes?: TLShape[]</div><div> }</div><div> </div><div class="diff-removed">-/** Additional options for the {@link ShapeUtil.getGeometry} method.</div><div class="diff-added">+/**</div><div class="diff-added">+ * Additional options for the {@link ShapeUtil.getGeometry} method.</div><div>  *</div><div>  * @public</div><div>  */</div><div class="diff-info">@@ -79,7 +75,9 @@ export abstract class ShapeUtil<Shape extends TLUnknownShape = TLUnknownShape> {</div><div> 	/** Configure this shape utils {@link ShapeUtil.options | `options`}. */</div><div> 	static configure<T extends TLShapeUtilConstructor<any, any>>(</div><div> 		this: T,</div><div class="diff-removed">-		options: T extends new (...args: any[]) => { options: infer Options } ? Partial<Options> : never</div><div class="diff-added">+		options: T extends new (...args: any[]) => { options: infer Options }</div><div class="diff-added">+			? Partial<Options></div><div class="diff-added">+			: never</div><div> 	): T {</div><div> 		// @ts-expect-error -- typescript has no idea what's going on here but it's fine</div><div> 		return class extends this {</div><div class="diff-info">@@ -173,373 +171,384 @@ export abstract class ShapeUtil<Shape extends TLUnknownShape = TLUnknownShape> {</div><div> 	abstract indicator(shape: Shape): any</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get the font faces that should be rendered in the document in order for this shape to render</div><div class="diff-removed">-	 * correctly.</div><div class="diff-added">+	 * Get a JSX element for the shape (as an HTML element) to be rendered as part of the canvas background - behind any other shape content.</div><div> 	 *</div><div> 	 * @param shape - The shape.</div><div class="diff-removed">-	 * @public</div><div class="diff-added">+	 * @internal</div><div> 	 */</div><div class="diff-removed">-	getFontFaces(shape: Shape): TLFontFace[] {</div><div class="diff-removed">-		return EMPTY_ARRAY</div><div class="diff-removed">-	}</div><div class="diff-added">+	backgroundComponent?(shape: Shape): any</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape can be snapped to by another shape.</div><div class="diff-added">+	 * Get the shape's background layer as an SVG object.</div><div> 	 *</div><div> 	 * @param shape - The shape.</div><div class="diff-added">+	 * @param ctx - The export context for the SVG - used for adding e.g. <def>s</div><div class="diff-added">+	 * @returns An SVG element.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canSnap(_shape: Shape): boolean {</div><div class="diff-removed">-		return true</div><div class="diff-removed">-	}</div><div class="diff-added">+	toBackgroundSvg?(</div><div class="diff-added">+		shape: Shape,</div><div class="diff-added">+		ctx: SvgExportContext</div><div class="diff-added">+	): ReactElement | null | Promise<ReactElement | null></div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape can be tabbed to.</div><div class="diff-added">+	 * Get the shape as an SVG object.</div><div> 	 *</div><div> 	 * @param shape - The shape.</div><div class="diff-added">+	 * @param ctx - The export context for the SVG - used for adding e.g. <def>s</div><div class="diff-added">+	 * @returns An SVG element.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canTabTo(_shape: Shape): boolean {</div><div class="diff-removed">-		return true</div><div class="diff-removed">-	}</div><div class="diff-added">+	toSvg?(</div><div class="diff-added">+		shape: Shape,</div><div class="diff-added">+		ctx: SvgExportContext</div><div class="diff-added">+	): ReactElement | null | Promise<ReactElement | null></div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape can be scrolled while editing.</div><div class="diff-added">+	 * Return elements to be added to the <defs> section of the canvases SVG context. This can be</div><div class="diff-added">+	 * used to define SVG content (e.g. patterns & masks) that can be referred to by ID from svg</div><div class="diff-added">+	 * elements returned by `component`.</div><div> 	 *</div><div class="diff-removed">-	 * @public</div><div class="diff-added">+	 * Each def should have a unique `key`. If multiple defs from different shapes all have the same</div><div class="diff-added">+	 * key, only one will be used.</div><div> 	 */</div><div class="diff-removed">-	canScroll(_shape: Shape): boolean {</div><div class="diff-removed">-		return false</div><div class="diff-added">+	getCanvasSvgDefs(): TLShapeUtilCanvasSvgDef[] {</div><div class="diff-added">+		return []</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape can be bound to. See {@link TLShapeUtilCanBindOpts} for details.</div><div class="diff-added">+	 * Get the interpolated props for an animating shape. This is an optional method.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @example</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * ```ts</div><div class="diff-added">+	 * util.getInterpolatedProps?.(startShape, endShape, t)</div><div class="diff-added">+	 * ```</div><div> 	 *</div><div class="diff-added">+	 * @param startShape - The initial shape.</div><div class="diff-added">+	 * @param endShape - The initial shape.</div><div class="diff-added">+	 * @param progress - The normalized progress between zero (start) and 1 (end).</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canBind(_opts: TLShapeUtilCanBindOpts): boolean {</div><div class="diff-removed">-		return true</div><div class="diff-removed">-	}</div><div class="diff-added">+	getInterpolatedProps?(</div><div class="diff-added">+		startShape: Shape,</div><div class="diff-added">+		endShape: Shape,</div><div class="diff-added">+		progress: number</div><div class="diff-added">+	): Shape['props']</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape can be double clicked to edit.</div><div class="diff-added">+	 * Get an array of handle models for the shape. This is an optional method.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @example</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * ```ts</div><div class="diff-added">+	 * util.getHandles?.(myShape)</div><div class="diff-added">+	 * ```</div><div> 	 *</div><div class="diff-added">+	 * @param shape - The shape.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canEdit(_shape: Shape): boolean {</div><div class="diff-removed">-		return false</div><div class="diff-removed">-	}</div><div class="diff-added">+	getHandles?(shape: Shape): TLHandle[]</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape can be resized.</div><div class="diff-added">+	 * Get an array of outline segments for the shape. For most shapes,</div><div class="diff-added">+	 * this will be a single segment that includes the entire outline.</div><div class="diff-added">+	 * For shapes with handles, this might be segments of the outline</div><div class="diff-added">+	 * between each handle.</div><div> 	 *</div><div class="diff-added">+	 * @example</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * ```ts</div><div class="diff-added">+	 * util.getOutlineSegments(myShape)</div><div class="diff-added">+	 * ```</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @param shape - The shape.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canResize(_shape: Shape): boolean {</div><div class="diff-removed">-		return true</div><div class="diff-added">+	getOutlineSegments(shape: Shape): Vec[][] {</div><div class="diff-added">+		return [this.editor.getShapeGeometry(shape).vertices]</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape can be edited in read-only mode.</div><div class="diff-added">+	 * Get the shape's (not cached) outline.</div><div> 	 *</div><div class="diff-added">+	 * @param shape - The shape.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canEditInReadOnly(_shape: Shape): boolean {</div><div class="diff-removed">-		return false</div><div class="diff-added">+	getOutline(shape: Shape): Vec[] {</div><div class="diff-added">+		return this.editor.getBounds(shape).corners</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape can be cropped.</div><div class="diff-added">+	 * Get the shape's snap points.</div><div> 	 *</div><div class="diff-added">+	 * @param shape - The shape.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canCrop(_shape: Shape): boolean {</div><div class="diff-removed">-		return false</div><div class="diff-added">+	snapPoints(shape: Shape) {</div><div class="diff-added">+		return this.editor.getBounds(shape).snapPoints</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape can participate in layout functions such as alignment or distribution.</div><div class="diff-added">+	 * Get the shape's cached center.</div><div> 	 *</div><div> 	 * @param shape - The shape.</div><div class="diff-removed">-	 * @param info - Additional context information: the type of action causing the layout and the</div><div class="diff-removed">-	 * @public</div><div class="diff-removed">-	 *</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canBeLaidOut(_shape: Shape, _info: TLShapeUtilCanBeLaidOutOpts): boolean {</div><div class="diff-removed">-		return true</div><div class="diff-added">+	center(shape: Shape): Vec {</div><div class="diff-added">+		return this.getCenter(shape)</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Does this shape provide a background for its children? If this is true,</div><div class="diff-removed">-	 * then any children with a `renderBackground` method will have their</div><div class="diff-removed">-	 * backgrounds rendered _above_ this shape. Otherwise, the children's</div><div class="diff-removed">-	 * backgrounds will be rendered above either the next ancestor that provides</div><div class="diff-removed">-	 * a background, or the canvas background.</div><div class="diff-added">+	 * Get the shape's (not cached) center.</div><div> 	 *</div><div class="diff-removed">-	 * @internal</div><div class="diff-added">+	 * @param shape - The shape.</div><div class="diff-added">+	 * @public</div><div> 	 */</div><div class="diff-removed">-	providesBackgroundForChildren(_shape: Shape): boolean {</div><div class="diff-removed">-		return false</div><div class="diff-added">+	getCenter(shape: Shape): Vec {</div><div class="diff-added">+		return this.editor.getBounds(shape).center</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape should hide its resize handles when selected.</div><div class="diff-added">+	 * Get whether the shape can receive children of a given type.</div><div> 	 *</div><div class="diff-added">+	 * @param shape - The shape.</div><div class="diff-added">+	 * @param type - The shape type.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	hideResizeHandles(_shape: Shape): boolean {</div><div class="diff-added">+	canReceiveNewChildrenOfType(_shape: Shape, _type: TLShape['type']) {</div><div> 		return false</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape should hide its rotation handles when selected.</div><div class="diff-added">+	 * Get whether the shape can receive children of a given type.</div><div> 	 *</div><div class="diff-added">+	 * @param shape - The shape type.</div><div class="diff-added">+	 * @param shapes - The shapes that are being dropped.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	hideRotateHandle(_shape: Shape): boolean {</div><div class="diff-added">+	canDropShapes(_shape: Shape, _shapes: TLShape[]) {</div><div> 		return false</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape should hide its selection bounds background when selected.</div><div class="diff-added">+	 * Get the geometry to use when snapping to this this shape in translate/resize operations. See</div><div class="diff-added">+	 * {@link BoundsSnapGeometry} for details.</div><div class="diff-added">+	 */</div><div class="diff-added">+	getBoundsSnapGeometry(_shape: Shape): BoundsSnapGeometry {</div><div class="diff-added">+		return {}</div><div class="diff-added">+	}</div><div class="diff-added">+</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * Get the geometry to use when snapping handles to this shape. See {@link HandleSnapGeometry}</div><div class="diff-added">+	 * for details.</div><div class="diff-added">+	 */</div><div class="diff-added">+	getHandleSnapGeometry(_shape: Shape): HandleSnapGeometry {</div><div class="diff-added">+		return {}</div><div class="diff-added">+	}</div><div class="diff-added">+</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * Whether the shape can be snapped to by another shape.</div><div> 	 *</div><div class="diff-added">+	 * @param shape - The shape.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	hideSelectionBoundsBg(_shape: Shape): boolean {</div><div class="diff-removed">-		return false</div><div class="diff-added">+	canSnap(_shape: Shape): boolean {</div><div class="diff-added">+		return true</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape should hide its selection bounds foreground when selected.</div><div class="diff-added">+	 * Whether the shape can be bound to. See {@link TLShapeUtilCanBindOpts} for details.</div><div> 	 *</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	hideSelectionBoundsFg(_shape: Shape): boolean {</div><div class="diff-removed">-		return false</div><div class="diff-added">+	canBind(_opts: TLShapeUtilCanBindOpts): boolean {</div><div class="diff-added">+		return true</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Whether the shape's aspect ratio is locked.</div><div class="diff-added">+	 * Whether the shape can be edited in read-only mode.</div><div> 	 *</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	isAspectRatioLocked(_shape: Shape): boolean {</div><div class="diff-added">+	canEditInReadOnly(_shape: Shape): boolean {</div><div> 		return false</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get a JSX element for the shape (as an HTML element) to be rendered as part of the canvas background - behind any other shape content.</div><div class="diff-added">+	 * Whether the shape can be edited.</div><div> 	 *</div><div class="diff-removed">-	 * @param shape - The shape.</div><div class="diff-removed">-	 * @internal</div><div class="diff-added">+	 * @public</div><div> 	 */</div><div class="diff-removed">-	backgroundComponent?(shape: Shape): any</div><div class="diff-added">+	canEdit(_shape: Shape): boolean {</div><div class="diff-added">+		return false</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get the interpolated props for an animating shape. This is an optional method.</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * @example</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * ```ts</div><div class="diff-removed">-	 * util.getInterpolatedProps?.(startShape, endShape, t)</div><div class="diff-removed">-	 * ```</div><div class="diff-added">+	 * Whether the shape can be resized.</div><div> 	 *</div><div class="diff-removed">-	 * @param startShape - The initial shape.</div><div class="diff-removed">-	 * @param endShape - The initial shape.</div><div class="diff-removed">-	 * @param progress - The normalized progress between zero (start) and 1 (end).</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	getInterpolatedProps?(startShape: Shape, endShape: Shape, progress: number): Shape['props']</div><div class="diff-added">+	canResize(_shape: Shape): boolean {</div><div class="diff-added">+		return true</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get an array of handle models for the shape. This is an optional method.</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * @example</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * ```ts</div><div class="diff-removed">-	 * util.getHandles?.(myShape)</div><div class="diff-removed">-	 * ```</div><div class="diff-added">+	 * Whether the shape can be cropped.</div><div> 	 *</div><div class="diff-removed">-	 * @param shape - The shape.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	getHandles?(shape: Shape): TLHandle[]</div><div class="diff-added">+	canCrop(_shape: Shape): boolean {</div><div class="diff-added">+		return false</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get whether the shape can receive children of a given type.</div><div class="diff-added">+	 * Whether the shape can be tabbed to.</div><div> 	 *</div><div> 	 * @param shape - The shape.</div><div class="diff-removed">-	 * @param type - The shape type.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canReceiveNewChildrenOfType(_shape: Shape, _type: TLShape['type']) {</div><div class="diff-removed">-		return false</div><div class="diff-added">+	canTabTo(_shape: Shape): boolean {</div><div class="diff-added">+		return true</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get whether the shape can receive children of a given type.</div><div class="diff-added">+	 * Whether the shape can be scrolled while editing.</div><div> 	 *</div><div class="diff-removed">-	 * @param shape - The shape type.</div><div class="diff-removed">-	 * @param shapes - The shapes that are being dropped.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	canDropShapes(_shape: Shape, _shapes: TLShape[]) {</div><div class="diff-added">+	canScroll(_shape: Shape): boolean {</div><div> 		return false</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get the shape as an SVG object.</div><div class="diff-added">+	 * Whether the shape can be unmounted when not visible in the editor. Consider keeping this to false if the shape's `component` has local state.</div><div> 	 *</div><div class="diff-removed">-	 * @param shape - The shape.</div><div class="diff-removed">-	 * @param ctx - The export context for the SVG - used for adding e.g. \<def\>s</div><div class="diff-removed">-	 * @returns An SVG element.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	toSvg?(shape: Shape, ctx: SvgExportContext): ReactElement | null | Promise<ReactElement | null></div><div class="diff-added">+	canUnmount(_shape: Shape): boolean {</div><div class="diff-added">+		return true</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get the shape's background layer as an SVG object.</div><div class="diff-added">+	 * Whether the shape can be laid out (align, distribute, etc.).</div><div> 	 *</div><div> 	 * @param shape - The shape.</div><div class="diff-removed">-	 * @param ctx - ctx - The export context for the SVG - used for adding e.g. \<def\>s</div><div class="diff-removed">-	 * @returns An SVG element.</div><div class="diff-added">+	 * @param info - Additional context information: the type of action causing the layout and the</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	toBackgroundSvg?(</div><div class="diff-removed">-		shape: Shape,</div><div class="diff-removed">-		ctx: SvgExportContext</div><div class="diff-removed">-	): ReactElement | null | Promise<ReactElement | null></div><div class="diff-removed">-</div><div class="diff-removed">-	/** @internal */</div><div class="diff-removed">-	expandSelectionOutlinePx(shape: Shape): number | Box {</div><div class="diff-removed">-		return 0</div><div class="diff-added">+	canBeLaidOut(_shape: Shape, _info: TLShapeUtilCanBeLaidOutOpts): boolean {</div><div class="diff-added">+		return true</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Return elements to be added to the \<defs\> section of the canvases SVG context. This can be</div><div class="diff-removed">-	 * used to define SVG content (e.g. patterns & masks) that can be referred to by ID from svg</div><div class="diff-removed">-	 * elements returned by `component`.</div><div class="diff-added">+	 * Whether the shape provides a background for its children. If this is true,</div><div class="diff-added">+	 * then any children with a `renderBackground` method will have their</div><div class="diff-added">+	 * backgrounds rendered _above_ this shape. Otherwise, the children's</div><div class="diff-added">+	 * backgrounds will be rendered above either the next ancestor that provides</div><div class="diff-added">+	 * a background, or the canvas background.</div><div> 	 *</div><div class="diff-removed">-	 * Each def should have a unique `key`. If multiple defs from different shapes all have the same</div><div class="diff-removed">-	 * key, only one will be used.</div><div class="diff-added">+	 * @internal</div><div> 	 */</div><div class="diff-removed">-	getCanvasSvgDefs(): TLShapeUtilCanvasSvgDef[] {</div><div class="diff-removed">-		return []</div><div class="diff-added">+	providesBackgroundForChildren(_shape: Shape): boolean {</div><div class="diff-added">+		return false</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get the geometry to use when snapping to this this shape in translate/resize operations. See</div><div class="diff-removed">-	 * {@link BoundsSnapGeometry} for details.</div><div class="diff-added">+	 * Whether the shape should hide its resize handles when selected.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @public</div><div> 	 */</div><div class="diff-removed">-	getBoundsSnapGeometry(_shape: Shape): BoundsSnapGeometry {</div><div class="diff-removed">-		return {}</div><div class="diff-added">+	hideResizeHandles(_shape: Shape): boolean {</div><div class="diff-added">+		return false</div><div> 	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Get the geometry to use when snapping handles to this shape. See {@link HandleSnapGeometry}</div><div class="diff-removed">-	 * for details.</div><div class="diff-added">+	 * Whether the shape should hide its rotation handles when selected.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @public</div><div> 	 */</div><div class="diff-removed">-	getHandleSnapGeometry(_shape: Shape): HandleSnapGeometry {</div><div class="diff-removed">-		return {}</div><div class="diff-added">+	hideRotateHandle(_shape: Shape): boolean {</div><div class="diff-added">+		return false</div><div> 	}</div><div> </div><div class="diff-removed">-	getText(_shape: Shape): string | undefined {</div><div class="diff-removed">-		return undefined</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * Whether the shape should hide its selection bounds background when selected.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @public</div><div class="diff-added">+	 */</div><div class="diff-added">+	hideSelectionBoundsBg(_shape: Shape): boolean {</div><div class="diff-added">+		return false</div><div> 	}</div><div> </div><div class="diff-removed">-	getAriaDescriptor(_shape: Shape): string | undefined {</div><div class="diff-removed">-		return undefined</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * Whether the shape should hide its selection bounds foreground when selected.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @public</div><div class="diff-added">+	 */</div><div class="diff-added">+	hideSelectionBoundsFg(_shape: Shape): boolean {</div><div class="diff-added">+		return false</div><div> 	}</div><div> </div><div class="diff-removed">-	//  Events</div><div class="diff-removed">-</div><div> 	/**</div><div class="diff-removed">-	 * A callback called just before a shape is created. This method provides a last chance to modify</div><div class="diff-removed">-	 * the created shape.</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * @example</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * ```ts</div><div class="diff-removed">-	 * onBeforeCreate = (next) => {</div><div class="diff-removed">-	 * 	return { ...next, x: next.x + 1 }</div><div class="diff-removed">-	 * }</div><div class="diff-removed">-	 * ```</div><div class="diff-added">+	 * Whether the shape's aspect ratio is locked.</div><div> 	 *</div><div class="diff-removed">-	 * @param next - The next shape.</div><div class="diff-removed">-	 * @returns The next shape or void.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	onBeforeCreate?(next: Shape): Shape | void</div><div class="diff-added">+	isAspectRatioLocked(_shape: Shape): boolean {</div><div class="diff-added">+		return false</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * A callback called just before a shape is updated. This method provides a last chance to modify</div><div class="diff-removed">-	 * the updated shape.</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * @example</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * ```ts</div><div class="diff-removed">-	 * onBeforeUpdate = (prev, next) => {</div><div class="diff-removed">-	 * 	if (prev.x === next.x) {</div><div class="diff-removed">-	 * 		return { ...next, x: next.x + 1 }</div><div class="diff-removed">-	 * 	}</div><div class="diff-removed">-	 * }</div><div class="diff-removed">-	 * ```</div><div class="diff-added">+	 * Get the font faces that should be rendered in the document in order for this shape to render correctly.</div><div> 	 *</div><div class="diff-removed">-	 * @param prev - The previous shape.</div><div class="diff-removed">-	 * @param next - The next shape.</div><div class="diff-removed">-	 * @returns The next shape or void.</div><div class="diff-added">+	 * @param shape - The shape.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	onBeforeUpdate?(prev: Shape, next: Shape): Shape | void</div><div class="diff-added">+	getFontFaces(_shape: Shape): TLFontFace[] {</div><div class="diff-added">+		return EMPTY_ARRAY</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * A callback called when a shape changes from a crop.</div><div class="diff-added">+	 * Return the text for ARIA live region.</div><div> 	 *</div><div class="diff-removed">-	 * @param shape - The shape at the start of the crop.</div><div class="diff-removed">-	 * @param info - Info about the crop.</div><div class="diff-removed">-	 * @returns A change to apply to the shape, or void.</div><div class="diff-added">+	 * @param shape - The shape.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	onCrop?(</div><div class="diff-removed">-		shape: Shape,</div><div class="diff-removed">-		info: TLCropInfo<Shape></div><div class="diff-removed">-	): Omit<TLShapePartial<Shape>, 'id' | 'type'> | undefined | void</div><div class="diff-added">+	getAriaDescriptor(_shape: Shape): string | undefined {</div><div class="diff-added">+		return undefined</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * A callback called when some other shapes are dragged over this one.</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * @example</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * ```ts</div><div class="diff-removed">-	 * onDragShapesOver = (shape, shapes) => {</div><div class="diff-removed">-	 * 	this.editor.reparentShapes(shapes, shape.id)</div><div class="diff-removed">-	 * }</div><div class="diff-removed">-	 * ```</div><div class="diff-added">+	 * Get text for searching.</div><div> 	 *</div><div> 	 * @param shape - The shape.</div><div class="diff-removed">-	 * @param shapes - The shapes that are being dragged over this one.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	onDragShapesOver?(shape: Shape, shapes: TLShape[]): void</div><div class="diff-added">+	getText(_shape: Shape): string | undefined {</div><div class="diff-added">+		return undefined</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * A callback called when some other shapes are dragged out of this one.</div><div class="diff-added">+	 * Get the shape's bounding box. If the shape defines a custom geometry that</div><div class="diff-added">+	 * includes padding (such as arrow shapes), use that geometry here.</div><div> 	 *</div><div> 	 * @param shape - The shape.</div><div class="diff-removed">-	 * @param shapes - The shapes that are being dragged out.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	onDragShapesOut?(shape: Shape, shapes: TLShape[]): void</div><div class="diff-added">+	getBounds(shape: Shape): Box {</div><div class="diff-added">+		return this.editor.getBounds(shape)</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * A callback called when some other shapes are dropped over this one.</div><div class="diff-added">+	 * Expand the selection outline by a number of pixels or a Box.</div><div> 	 *</div><div> 	 * @param shape - The shape.</div><div class="diff-removed">-	 * @param shapes - The shapes that are being dropped over this one.</div><div> 	 * @public</div><div> 	 */</div><div class="diff-removed">-	onDropShapesOver?(shape: Shape, shapes: TLShape[]): void</div><div class="diff-added">+	expandSelectionOutlinePx(shape: Shape): number | Box {</div><div class="diff-added">+		return 0</div><div class="diff-added">+	}</div><div> </div><div> 	/**</div><div> 	 * A callback called when a shape starts being resized.</div><div class="diff-info">@@ -553,7 +562,7 @@ export abstract class ShapeUtil<Shape extends TLUnknownShape = TLUnknownShape> {</div><div> 	/**</div><div> 	 * A callback called when a shape changes from a resize.</div><div> 	 *</div><div class="diff-removed">-	 * @param shape - The shape at the start of the resize.</div><div class="diff-added">+	 * @param shape - The shape.</div><div> 	 * @param info - Info about the resize.</div><div> 	 * @returns A change to apply to the shape, or void.</div><div> 	 * @public</div><div class="diff-info">@@ -602,16 +611,6 @@ export abstract class ShapeUtil<Shape extends TLUnknownShape = TLUnknownShape> {</div><div> 	 */</div><div> 	onTranslateEnd?(initial: Shape, current: Shape): TLShapePartial<Shape> | void</div><div> </div><div class="diff-removed">-	/**</div><div class="diff-removed">-	 * A callback called when a shape's handle changes.</div><div class="diff-removed">-	 *</div><div class="diff-removed">-	 * @param shape - The current shape.</div><div class="diff-removed">-	 * @param info - An object containing the handle and whether the handle is 'precise' or not.</div><div class="diff-removed">-	 * @returns A change to apply to the shape, or void.</div><div class="diff-removed">-	 * @public</div><div class="diff-removed">-	 */</div><div class="diff-removed">-	onHandleDrag?(shape: Shape, info: TLHandleDragInfo<Shape>): TLShapePartial<Shape> | void</div><div class="diff-removed">-</div><div> 	/**</div><div> 	 * A callback called when a shape starts being rotated.</div><div> 	 *</div><div class="diff-info">@@ -642,11 +641,14 @@ export abstract class ShapeUtil<Shape extends TLUnknownShape = TLUnknownShape> {</div><div> 	onRotateEnd?(initial: Shape, current: Shape): TLShapePartial<Shape> | void</div><div> </div><div> 	/**</div><div class="diff-removed">-	 * Not currently used.</div><div class="diff-added">+	 * A callback called when a shape's handle changes.</div><div> 	 *</div><div class="diff-removed">-	 * @internal</div><div class="diff-added">+	 * @param shape - The shape.</div><div class="diff-added">+	 * @param info - An object containing the handle and whether the handle is 'precise' or not.</div><div class="diff-added">+	 * @returns A change to apply to the shape, or void.</div><div class="diff-added">+	 * @public</div><div> 	 */</div><div class="diff-removed">-	onBindingChange?(shape: Shape): TLShapePartial<Shape> | void</div><div class="diff-added">+	onHandleDrag?(shape: Shape, info: TLHandleDragInfo<Shape>): TLShapePartial<Shape> | void</div><div> </div><div> 	/**</div><div> 	 * A callback called when a shape's children change.</div><div class="diff-info">@@ -701,47 +703,90 @@ export abstract class ShapeUtil<Shape extends TLUnknownShape = TLUnknownShape> {</div><div> 	 * @public</div><div> 	 */</div><div> 	onEditEnd?(shape: Shape): void</div><div class="diff-removed">-}</div><div> </div><div class="diff-removed">-/**</div><div class="diff-removed">- * Info about a crop.</div><div class="diff-removed">- * @param handle - The handle being dragged.</div><div class="diff-removed">- * @param change - The distance the handle is moved.</div><div class="diff-removed">- * @param initialShape - The shape at the start of the resize.</div><div class="diff-removed">- * @public</div><div class="diff-removed">- */</div><div class="diff-removed">-export interface TLCropInfo<T extends TLShape> {</div><div class="diff-removed">-	handle: SelectionHandle</div><div class="diff-removed">-	change: Vec</div><div class="diff-removed">-	crop: TLShapeCrop</div><div class="diff-removed">-	uncroppedSize: { w: number; h: number }</div><div class="diff-removed">-	initialShape: T</div><div class="diff-removed">-}</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * A callback called just before a shape is created. This method provides a last chance to modify</div><div class="diff-added">+	 * the created shape.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @example</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * ```ts</div><div class="diff-added">+	 * onBeforeCreate = (next) => {</div><div class="diff-added">+	 *     return { ...next, x: next.x + 1 }</div><div class="diff-added">+	 * }</div><div class="diff-added">+	 * ```</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @param next - The next shape.</div><div class="diff-added">+	 * @returns The next shape or void.</div><div class="diff-added">+	 * @public</div><div class="diff-added">+	 */</div><div class="diff-added">+	onBeforeCreate?(next: Shape): Shape | void</div><div> </div><div class="diff-removed">-/**</div><div class="diff-removed">- * The type of resize.</div><div class="diff-removed">- *</div><div class="diff-removed">- * 'scale_shape' - The shape is being scaled, usually as part of a larger selection.</div><div class="diff-removed">- *</div><div class="diff-removed">- * 'resize_bounds' - The user is directly manipulating an individual shape's bounds using a resize</div><div class="diff-removed">- * handle. It is up to shape util implementers to decide how they want to handle the two</div><div class="diff-removed">- * situations.</div><div class="diff-removed">- *</div><div class="diff-removed">- * @public</div><div class="diff-removed">- */</div><div class="diff-removed">-export type TLResizeMode = 'scale_shape' | 'resize_bounds'</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * A callback called just before a shape is updated. This method provides a last chance to modify</div><div class="diff-added">+	 * the updated shape.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @example</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * ```ts</div><div class="diff-added">+	 * onBeforeUpdate = (prev, next) => {</div><div class="diff-added">+	 *     if (prev.x === next.x) {</div><div class="diff-added">+	 *         return { ...next, x: next.x + 1 }</div><div class="diff-added">+	 *     }</div><div class="diff-added">+	 * }</div><div class="diff-added">+	 * ```</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @param prev - The previous shape.</div><div class="diff-added">+	 * @param next - The next shape.</div><div class="diff-added">+	 * @returns The next shape or void.</div><div class="diff-added">+	 * @public</div><div class="diff-added">+	 */</div><div class="diff-added">+	onBeforeUpdate?(prev: Shape, next: Shape): Shape | void</div><div> </div><div class="diff-removed">-/**</div><div class="diff-removed">- * Info about a resize.</div><div class="diff-removed">- * @param newPoint - The new local position of the shape.</div><div class="diff-removed">- * @param handle - The handle being dragged.</div><div class="diff-removed">- * @param mode - The type of resize.</div><div class="diff-removed">- * @param scaleX - The scale in the x-axis.</div><div class="diff-removed">- * @param scaleY - The scale in the y-axis.</div><div class="diff-removed">- * @param initialBounds - The bounds of the shape at the start of the resize.</div><div class="diff-removed">- * @param initialShape - The shape at the start of the resize.</div><div class="diff-removed">- * @public</div><div class="diff-removed">- */</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * A callback called when some other shapes are dragged over this one.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @example</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * ```ts</div><div class="diff-added">+	 * onDragShapesOver = (shape, shapes) => {</div><div class="diff-added">+	 *     this.editor.reparentShapes(shapes, shape.id)</div><div class="diff-added">+	 * }</div><div class="diff-added">+	 * ```</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @param shape - The shape.</div><div class="diff-added">+	 * @param shapes - The shapes that are being dragged over this one.</div><div class="diff-added">+	 * @public</div><div class="diff-added">+	 */</div><div class="diff-added">+	onDragShapesOver?(shape: Shape, shapes: TLShape[]): void</div><div class="diff-added">+</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * A callback called when some other shapes are dragged out of this one.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @param shape - The shape.</div><div class="diff-added">+	 * @param shapes - The shapes that are being dragged out.</div><div class="diff-added">+	 * @public</div><div class="diff-added">+	 */</div><div class="diff-added">+	onDragShapesOut?(shape: Shape, shapes: TLShape[]): void</div><div class="diff-added">+</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * A callback called when some other shapes are dropped over this one.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @param shape - The shape.</div><div class="diff-added">+	 * @param shapes - The shapes that are being dropped over this one.</div><div class="diff-added">+	 * @public</div><div class="diff-added">+	 */</div><div class="diff-added">+	onDropShapesOver?(shape: Shape, shapes: TLShape[]): void</div><div class="diff-added">+</div><div class="diff-added">+	/**</div><div class="diff-added">+	 * Not currently used.</div><div class="diff-added">+	 *</div><div class="diff-added">+	 * @internal</div><div class="diff-added">+	 */</div><div class="diff-added">+	onBindingChange?(shape: Shape): TLShapePartial<Shape> | void</div><div class="diff-added">+}</div><div class="diff-added">+</div><div class="diff-added">+/** @public */</div><div> export interface TLResizeInfo<T extends TLShape> {</div><div> 	newPoint: Vec</div><div> 	handle: TLResizeHandle</div><div class="diff-info">@@ -752,7 +797,8 @@ export interface TLResizeInfo<T extends TLShape> {</div><div> 	initialShape: T</div><div> }</div><div> </div><div class="diff-removed">-/* -------------------- Dragging -------------------- */</div><div class="diff-added">+/** @public */</div><div class="diff-added">+export type TLResizeMode = 'scale_shape' | 'resize_bounds'</div><div> </div><div> /** @public */</div><div> export interface TLHandleDragInfo<T extends TLShape> {</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    