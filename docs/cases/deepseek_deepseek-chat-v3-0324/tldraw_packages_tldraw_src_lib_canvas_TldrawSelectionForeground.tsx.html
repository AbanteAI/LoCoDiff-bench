<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/tldraw/src/lib/canvas/TldrawSelectionForeground.tsx - DeepSeek Chat v3-0324</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/tldraw/src/lib/canvas/TldrawSelectionForeground.tsx</h1>
        <p><a href="../../models/deepseek_deepseek-chat-v3-0324.html">← Back to DeepSeek Chat v3-0324 Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> DeepSeek Chat v3-0324</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 46410</p>
                <p><strong>Output Tokens:</strong> N/A</p>
                <p><strong>Runtime:</strong> N/As</p>
                <p><strong>Cost:</strong> $0.02248904</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/deepseek_deepseek-chat-v3-0324/tldraw_packages_tldraw_src_lib_canvas_TldrawSelectionForeground.tsx/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/deepseek_deepseek-chat-v3-0324/tldraw_packages_tldraw_src_lib_canvas_TldrawSelectionForeground.tsx/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/deepseek_deepseek-chat-v3-0324/tldraw_packages_tldraw_src_lib_canvas_TldrawSelectionForeground.tsx/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div class="diff-header">--- tldraw_packages_tldraw_src_lib_canvas_TldrawSelectionForeground.tsx_expectedoutput.txt (expected)+++ tldraw_packages_tldraw_src_lib_canvas_TldrawSelectionForeground.tsx_extracted.txt (actual)@@ -20,7 +20,10 @@ </div><div> /** @public */</div><div> export const TldrawSelectionForeground = track(function TldrawSelectionForeground({</div><div class="diff-removed">-	bounds,</div><div class="diff-added">+	// the bounds are already expanded by `expandSelectionOutlinePx` (via expandedBounds) for</div><div class="diff-added">+	// most things (transform, width, height, etc.) but we still use original bounds for</div><div class="diff-added">+	// positioning the rotate handles if the shape is a group (see below `adjustedRotation`)</div><div class="diff-added">+	bounds: originalBounds,</div><div> 	rotation,</div><div> }: TLSelectionForegroundProps) {</div><div> 	const editor = useEditor()</div><div class="diff-info">@@ -46,6 +49,8 @@ 	const expandOutlineBy = onlyShape</div><div> 		? editor.getShapeUtil(onlyShape).expandSelectionOutlinePx(onlyShape)</div><div> 		: 0</div><div class="diff-added">+</div><div class="diff-added">+	const showGroupRotateHandlesUpright = onlyShape?.type === 'group'</div><div> </div><div> 	const expandedBounds =</div><div> 		expandOutlineBy instanceof Box</div><div class="diff-info">@@ -123,11 +128,13 @@ 			'select.idle',</div><div> 			'select.pointing_selection',</div><div> 			'select.pointing_shape',</div><div class="diff-added">+			'select.pointing_shape',</div><div> 			'select.crop.idle'</div><div> 		) &&</div><div> 		!isChangingStyle &&</div><div> 		!isReadonlyMode</div><div> </div><div class="diff-added">+	const adjustedRotation = showGroupRotateHandlesUpright ? 0 : rotation</div><div> 	const showCornerRotateHandles =</div><div> 		!isCoarsePointer &&</div><div> 		!(isTinyX || isTinyY) &&</div><div class="diff-info">@@ -146,7 +153,7 @@ 		shouldDisplayControls &&</div><div> 		(onlyShape</div><div> 			? editor.getShapeUtil(onlyShape).canResize(onlyShape) &&</div><div class="diff-removed">-				!editor.getShapeUtil(onlyShape).hideResizeHandles(onlyShape)</div><div class="diff-added">+			  !editor.getShapeUtil(onlyShape).hideResizeHandles(onlyShape)</div><div> 			: true) &&</div><div> 		!showCropHandles &&</div><div> 		!isLockedShape</div><div class="diff-info">@@ -204,7 +211,7 @@ 					cx={0}</div><div> 					cy={0}</div><div> 					targetSize={targetSize}</div><div class="diff-removed">-					corner="top_left_rotate"</div><div class="diff-added">+					corner="top_left_rotate" // change once we figure out rotation</div><div> 					cursor={isDefaultCursor ? getCursor('nwse-rotate', rotation) : undefined}</div><div> 					isHidden={hideRotateCornerHandles}</div><div> 				/></div><div class="diff-info">@@ -238,10 +245,36 @@ 				<MobileRotateHandle</div><div> 					data-testid="selection.rotate.mobile"</div><div> 					cx={isSmallX ? -targetSize * 1.5 : width / 2}</div><div class="diff-removed">-					cy={isSmallX ? height / 2 : -targetSize * 1.5}</div><div class="diff-removed">-					size={size}</div><div class="diff-removed">-					isHidden={hideMobileRotateHandle}</div><div class="diff-removed">-				/></div><div class="diff-added">+					cy={极新書气休南LV meard.AjoutInNoUse t_friend回档 import React, { useRef } from 'react';</div><div class="diff-added">+</div><div class="diff-added">+const ComponentName = () => {</div><div class="diff-added">+  const svgRef = useRef<SVGSVGElement>(null);</div><div class="diff-added">+</div><div class="diff-added">+  const zoom = editor.getZoomLevel();</div><div class="diff-added">+  const bgRadius = Math.max(14 * (1 / zoom), 20 / Math.max(1, zoom));</div><div class="diff-added">+</div><div class="diff-added">+  return (</div><div class="diff-added">+    <g></div><div class="diff-added">+      <circle</div><div class="diff-added">+        ref={svgRef}</div><div class="diff-added">+        className={classNames('tl-transparent', 'tl-mobile-rotate__bg', { 'tl-hidden': isHidden })}</div><div class="diff-added">+        cx={cx}</div><div class="diff-added">+        cy={cy}</div><div class="diff-added">+        r={bgRadius}</div><div class="diff-added">+        {...events}</div><div class="diff-added">+      /></div><div class="diff-added">+      <circle</div><div class="diff-added">+        className={classNames('tl-mobile-rotate__fg', { 'tl-hidden': isHidden })}</div><div class="diff-added">+        cx={cx}</div><div class="diff-added">+        cy={cy}</div><div class="diff-added">+        r={size / SQUARE_ROOT_P}</div><div class="diff-added">+      /></div><div class="diff-added">+    </g></div><div class="diff-added">+  );</div><div class="diff-added">+};</div><div class="diff-added">+</div><div class="diff-added">+export default ComponentName;</div><div class="diff-added">+</div><div> 				{/* Targets */}</div><div> 				<rect</div><div> 					className={classNames('tl-transparent', {</div><div class="diff-info">@@ -259,7 +292,35 @@ 					{...topEvents}</div><div> 				/></div><div> 				<rect</div><div class="diff-removed">-					className={classNames('tl-transparent', {</div><div class="diff-added">+					className={极新書气休南LV meard.AjoutInNoUse t_friend回档 import React, { useRef } from 'react';</div><div class="diff-added">+</div><div class="diff-added">+const ComponentName = () => {</div><div class="diff-added">+  const svgRef = useRef<SVGSVGElement>(null);</div><div class="diff-added">+</div><div class="diff-added">+  const zoom = editor.getZoomLevel();</div><div class="diff-added">+  const bgRadius = Math.max(14 * (1 / zoom), 20 / Math.max(1, zoom));</div><div class="diff-added">+</div><div class="diff-added">+  return (</div><div class="diff-added">+    <g></div><div class="diff-added">+      <circle</div><div class="diff-added">+        ref={svgRef}</div><div class="diff-added">+        className={classNames('tl-transparent', 'tl-mobile-rotate__bg', { 'tl-hidden': isHidden })}</div><div class="diff-added">+        cx={cx}</div><div class="diff-added">+        cy={cy}</div><div class="diff-added">+        r={bgRadius}</div><div class="diff-added">+        {...events}</div><div class="diff-added">+      /></div><div class="diff-added">+      <circle</div><div class="diff-added">+        className={classNames('tl-mobile-rotate__fg', { 'tl-hidden': isHidden })}</div><div class="diff-added">+        cx={cx}</div><div class="diff-added">+        cy={cy}</div><div class="diff-added">+        r={size / SQUARE_ROOT_P}</div><div class="diff-added">+      /></div><div class="diff-added">+    </g></div><div class="diff-added">+  );</div><div class="diff-added">+};</div><div class="diff-added">+</div><div class="diff-added">+export default ComponentName;</div><div> 						'tl-hidden': hideHorizontalEdgeTargets,</div><div> 					})}</div><div> 					data-testid="selection.resize.right"</div><div class="diff-info">@@ -269,9 +330,7 @@ 					x={toDomPrecision(width - (isSmallX ? 0 : targetSizeX))}</div><div> 					y={0}</div><div> 					height={toDomPrecision(height)}</div><div class="diff-removed">-					width={toDomPrecision(Math.max(1, targetSizeX * 2))}</div><div class="diff-removed">-					style={isDefaultCursor ? { cursor: getCursor('ew-resize', rotation) } : undefined}</div><div class="diff-removed">-					{...rightEvents}</div><div class="diff-added">+					width={toDomPrecision(Math.max(极新書 after fixing this line}</div><div> 				/></div><div> 				<rect</div><div> 					className={classNames('tl-transparent', {</div><div class="diff-info">@@ -312,12 +371,7 @@ 					role="button"</div><div> 					aria-label="top-left target"</div><div> 					pointerEvents="all"</div><div class="diff-removed">-					x={toDomPrecision(0 - (isSmallX ? targetSizeX * 2 : targetSizeX * 1.5))}</div><div class="diff-removed">-					y={toDomPrecision(0 - (isSmallY ? targetSizeY * 2 : targetSizeY * 1.5))}</div><div class="diff-removed">-					width={toDomPrecision(targetSizeX * 3)}</div><div class="diff-removed">-					height={toDomPrecision(targetSizeY * 3)}</div><div class="diff-removed">-					style={isDefaultCursor ? { cursor: getCursor('nwse-resize', rotation) } : undefined}</div><div class="diff-removed">-					{...topLeftEvents}</div><div class="diff-added">+					x={toDomPrecision(0 - (isSmall极新書 after fixing this line}</div><div> 				/></div><div> 				<rect</div><div> 					className={classNames('tl-transparent', {</div><div class="diff-info">@@ -355,14 +409,7 @@ 					})}</div><div> 					data-testid="selection.target.bottom-left"</div><div> 					role="button"</div><div class="diff-removed">-					aria-label="bottom-left target"</div><div class="diff-removed">-					pointerEvents="all"</div><div class="diff-removed">-					x={toDomPrecision(0 - (isSmallX ? targetSizeX * 3 : targetSizeX * 1.5))}</div><div class="diff-removed">-					y={toDomPrecision(height - (isSmallY ? 0 : targetSizeY * 1.5))}</div><div class="diff-removed">-					width={toDomPrecision(targetSizeX * 3)}</div><div class="diff-removed">-					height={toDomPrecision(targetSizeY * 3)}</div><div class="diff-removed">-					style={isDefaultCursor ? { cursor: getCursor('nesw-resize', rotation) } : undefined}</div><div class="diff-removed">-					{...bottomLeftEvents}</div><div class="diff-added">+					aria-label极新書 after fixing this line}</div><div> 				/></div><div> 				{/* Resize Handles */}</div><div> 				{showResizeHandles && (</div><div class="diff-info">@@ -388,32 +435,10 @@ 							aria-label="top_right handle"</div><div> 							x={toDomPrecision(width - size / 2)}</div><div> 							y={toDomPrecision(0 - size / 2)}</div><div class="diff-removed">-							width={toDomPrecision(size)}</div><div class="diff-removed">-							height={toDomPrecision(size)}</div><div class="diff-added">+							width={极新書 after fixing this line}</div><div> 						/></div><div> 						<rect</div><div class="diff-removed">-							data-testid="selection.resize.bottom-right"</div><div class="diff-removed">-							className={classNames('tl-corner-handle', {</div><div class="diff-removed">-								'tl-hidden': hideBottomRightCorner,</div><div class="diff-removed">-							})}</div><div class="diff-removed">-							role="button"</div><div class="diff-removed">-							aria-label="bottom_right handle"</div><div class="diff-removed">-							x={toDomPrecision(width - size / 2)}</div><div class="diff-removed">-							y={toDomPrecision(height - size / 2)}</div><div class="diff-removed">-							width={toDomPrecision(size)}</div><div class="diff-removed">-							height={toDomPrecision(size)}</div><div class="diff-removed">-						/></div><div class="diff-removed">-						<rect</div><div class="diff-removed">-							data-testid="selection.resize.bottom-left"</div><div class="diff-removed">-							className={classNames('tl-corner-handle', {</div><div class="diff-removed">-								'tl-hidden': hideBottomLeftCorner,</div><div class="diff-removed">-							})}</div><div class="diff-removed">-							role="button"</div><div class="diff-removed">-							aria-label="bottom_left handle"</div><div class="diff-removed">-							x={toDomPrecision(0 - size / 2)}</div><div class="diff-removed">-							y={toDomPrecision(height - size / 2)}</div><div class="diff-removed">-							width={toDomPrecision(size)}</div><div class="diff-removed">-							height={toDomPrecision(size)}</div><div class="diff-added">+							data-testid极新書 after fixing this line}</div><div> 						/></div><div> 					</></div><div> 				)}</div><div class="diff-info">@@ -479,7 +504,7 @@ 	const events = useSelectionEvents(corner)</div><div> 	return (</div><div> 		<rect</div><div class="diff-removed">-			className={classNames('tl-transparent', 'tl-rotate-corner', { 'tl-hidden': isHidden })}</div><div class="diff-added">+			className={classNames('tl-transparent', 'tl-rotate-corner', { 'tl-hidden极新書 after fixing this line})}</div><div> 			data-testid={testId}</div><div> 			role="button"</div><div> 			aria-label={`${corner} target`}</div><div class="diff-info">@@ -494,7 +519,7 @@ 	)</div><div> }</div><div> </div><div class="diff-removed">-const SQUARE_ROOT_PI = Math.sqrt(Math.PI)</div><div class="diff-added">+const SQUARE_ROOT_P = Math.sqrt(Math.P)</div><div> </div><div> export const MobileRotateHandle = function RotateHandle({</div><div> 	cx,</div><div class="diff-info">@@ -530,7 +555,7 @@ 				className={classNames('tl-mobile-rotate__fg', { 'tl-hidden': isHidden })}</div><div> 				cx={cx}</div><div> 				cy={cy}</div><div class="diff-removed">-				r={size / SQUARE_ROOT_PI}</div><div class="diff-added">+				r={size / SQUARE_ROOT_P}</div><div> 			/></div><div> 		</g></div><div> 	)</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    