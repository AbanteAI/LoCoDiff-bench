<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/react-devtools-shared/src/backendAPI.js - DeepSeek Chat v3-0324</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/react-devtools-shared/src/backendAPI.js</h1>
        <p><a href="../../models/deepseek_deepseek-chat-v3-0324.html">‚Üê Back to DeepSeek Chat v3-0324 Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> DeepSeek Chat v3-0324</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 12115</p>
                <p><strong>Output Tokens:</strong> N/A</p>
                <p><strong>Native Prompt Tokens:</strong> 12118</p>
                <p><strong>Native Completion Tokens:</strong> 2</p>
                <p><strong>Native Tokens Reasoning:</strong> 0</p>
                <p><strong>Native Finish Reason:</strong> stop</p>
                <p><strong>Runtime:</strong> N/As</p>
                <p><strong>Cost:</strong> $0.00412188</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/deepseek_deepseek-chat-v3-0324/react_packages_react-devtools-shared_src_backendAPI.js/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/deepseek_deepseek-chat-v3-0324/react_packages_react-devtools-shared_src_backendAPI.js/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/deepseek_deepseek-chat-v3-0324/react_packages_react-devtools-shared_src_backendAPI.js/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div class="diff-header">--- react_packages_react-devtools-shared_src_backendAPI.js_expectedoutput.txt (expected)+++ react_packages_react-devtools-shared_src_backendAPI.js_extracted.txt (actual)@@ -1,309 +0,0 @@-/**</div><div class="diff-removed">- * Copyright (c) Meta Platforms, Inc. and affiliates.</div><div class="diff-removed">- *</div><div class="diff-removed">- * This source code is licensed under the MIT license found in the</div><div class="diff-removed">- * LICENSE file in the root directory of this source tree.</div><div class="diff-removed">- *</div><div class="diff-removed">- * @flow</div><div class="diff-removed">- */</div><div class="diff-removed">-</div><div class="diff-removed">-import {hydrate, fillInPath} from 'react-devtools-shared/src/hydration';</div><div class="diff-removed">-import {backendToFrontendSerializedElementMapper} from 'react-devtools-shared/src/utils';</div><div class="diff-removed">-import Store from 'react-devtools-shared/src/devtools/store';</div><div class="diff-removed">-import TimeoutError from 'react-devtools-shared/src/errors/TimeoutError';</div><div class="diff-removed">-import ElementPollingCancellationError from 'react-devtools-shared/src/errors/ElementPollingCancellationError';</div><div class="diff-removed">-</div><div class="diff-removed">-import type {</div><div class="diff-removed">-  InspectedElement as InspectedElementBackend,</div><div class="diff-removed">-  InspectedElementPayload,</div><div class="diff-removed">-} from 'react-devtools-shared/src/backend/types';</div><div class="diff-removed">-import type {</div><div class="diff-removed">-  BackendEvents,</div><div class="diff-removed">-  FrontendBridge,</div><div class="diff-removed">-} from 'react-devtools-shared/src/bridge';</div><div class="diff-removed">-import type {</div><div class="diff-removed">-  DehydratedData,</div><div class="diff-removed">-  InspectedElement as InspectedElementFrontend,</div><div class="diff-removed">-} from 'react-devtools-shared/src/frontend/types';</div><div class="diff-removed">-import type {InspectedElementPath} from 'react-devtools-shared/src/frontend/types';</div><div class="diff-removed">-</div><div class="diff-removed">-export function clearErrorsAndWarnings({</div><div class="diff-removed">-  bridge,</div><div class="diff-removed">-  store,</div><div class="diff-removed">-}: {</div><div class="diff-removed">-  bridge: FrontendBridge,</div><div class="diff-removed">-  store: Store,</div><div class="diff-removed">-}): void {</div><div class="diff-removed">-  store.rootIDToRendererID.forEach(rendererID => {</div><div class="diff-removed">-    bridge.send('clearErrorsAndWarnings', {rendererID});</div><div class="diff-removed">-  });</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-export function clearErrorsForElement({</div><div class="diff-removed">-  bridge,</div><div class="diff-removed">-  id,</div><div class="diff-removed">-  rendererID,</div><div class="diff-removed">-}: {</div><div class="diff-removed">-  bridge: FrontendBridge,</div><div class="diff-removed">-  id: number,</div><div class="diff-removed">-  rendererID: number,</div><div class="diff-removed">-}): void {</div><div class="diff-removed">-  bridge.send('clearErrorsForElementID', {</div><div class="diff-removed">-    rendererID,</div><div class="diff-removed">-    id,</div><div class="diff-removed">-  });</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-export function clearWarningsForElement({</div><div class="diff-removed">-  bridge,</div><div class="diff-removed">-  id,</div><div class="diff-removed">-  rendererID,</div><div class="diff-removed">-}: {</div><div class="diff-removed">-  bridge: FrontendBridge,</div><div class="diff-removed">-  id: number,</div><div class="diff-removed">-  rendererID: number,</div><div class="diff-removed">-}): void {</div><div class="diff-removed">-  bridge.send('clearWarningsForElementID', {</div><div class="diff-removed">-    rendererID,</div><div class="diff-removed">-    id,</div><div class="diff-removed">-  });</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-export function copyInspectedElementPath({</div><div class="diff-removed">-  bridge,</div><div class="diff-removed">-  id,</div><div class="diff-removed">-  path,</div><div class="diff-removed">-  rendererID,</div><div class="diff-removed">-}: {</div><div class="diff-removed">-  bridge: FrontendBridge,</div><div class="diff-removed">-  id: number,</div><div class="diff-removed">-  path: Array<string | number>,</div><div class="diff-removed">-  rendererID: number,</div><div class="diff-removed">-}): void {</div><div class="diff-removed">-  bridge.send('copyElementPath', {</div><div class="diff-removed">-    id,</div><div class="diff-removed">-    path,</div><div class="diff-removed">-    rendererID,</div><div class="diff-removed">-  });</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-export function inspectElement(</div><div class="diff-removed">-  bridge: FrontendBridge,</div><div class="diff-removed">-  forceFullData: boolean,</div><div class="diff-removed">-  id: number,</div><div class="diff-removed">-  path: InspectedElementPath | null,</div><div class="diff-removed">-  rendererID: number,</div><div class="diff-removed">-  shouldListenToPauseEvents: boolean = false,</div><div class="diff-removed">-): Promise<InspectedElementPayload> {</div><div class="diff-removed">-  const requestID = requestCounter++;</div><div class="diff-removed">-  const promise = getPromiseForRequestID<InspectedElementPayload>(</div><div class="diff-removed">-    requestID,</div><div class="diff-removed">-    'inspectedElement',</div><div class="diff-removed">-    bridge,</div><div class="diff-removed">-    `Timed out while inspecting element ${id}.`,</div><div class="diff-removed">-    shouldListenToPauseEvents,</div><div class="diff-removed">-  );</div><div class="diff-removed">-</div><div class="diff-removed">-  bridge.send('inspectElement', {</div><div class="diff-removed">-    forceFullData,</div><div class="diff-removed">-    id,</div><div class="diff-removed">-    path,</div><div class="diff-removed">-    rendererID,</div><div class="diff-removed">-    requestID,</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  return promise;</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-let storeAsGlobalCount = 0;</div><div class="diff-removed">-</div><div class="diff-removed">-export function storeAsGlobal({</div><div class="diff-removed">-  bridge,</div><div class="diff-removed">-  id,</div><div class="diff-removed">-  path,</div><div class="diff-removed">-  rendererID,</div><div class="diff-removed">-}: {</div><div class="diff-removed">-  bridge: FrontendBridge,</div><div class="diff-removed">-  id: number,</div><div class="diff-removed">-  path: Array<string | number>,</div><div class="diff-removed">-  rendererID: number,</div><div class="diff-removed">-}): void {</div><div class="diff-removed">-  bridge.send('storeAsGlobal', {</div><div class="diff-removed">-    count: storeAsGlobalCount++,</div><div class="diff-removed">-    id,</div><div class="diff-removed">-    path,</div><div class="diff-removed">-    rendererID,</div><div class="diff-removed">-  });</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-const TIMEOUT_DELAY = 10_000;</div><div class="diff-removed">-</div><div class="diff-removed">-let requestCounter = 0;</div><div class="diff-removed">-</div><div class="diff-removed">-function getPromiseForRequestID<T>(</div><div class="diff-removed">-  requestID: number,</div><div class="diff-removed">-  eventType: $Keys<BackendEvents>,</div><div class="diff-removed">-  bridge: FrontendBridge,</div><div class="diff-removed">-  timeoutMessage: string,</div><div class="diff-removed">-  shouldListenToPauseEvents: boolean = false,</div><div class="diff-removed">-): Promise<T> {</div><div class="diff-removed">-  return new Promise((resolve, reject) => {</div><div class="diff-removed">-    const cleanup = () => {</div><div class="diff-removed">-      bridge.removeListener(eventType, onInspectedElement);</div><div class="diff-removed">-      bridge.removeListener('shutdown', onShutdown);</div><div class="diff-removed">-</div><div class="diff-removed">-      if (shouldListenToPauseEvents) {</div><div class="diff-removed">-        bridge.removeListener('pauseElementPolling', onDisconnect);</div><div class="diff-removed">-      }</div><div class="diff-removed">-</div><div class="diff-removed">-      clearTimeout(timeoutID);</div><div class="diff-removed">-    };</div><div class="diff-removed">-</div><div class="diff-removed">-    const onShutdown = () => {</div><div class="diff-removed">-      cleanup();</div><div class="diff-removed">-      reject(</div><div class="diff-removed">-        new Error(</div><div class="diff-removed">-          'Failed to inspect element. Try again or restart React DevTools.',</div><div class="diff-removed">-        ),</div><div class="diff-removed">-      );</div><div class="diff-removed">-    };</div><div class="diff-removed">-</div><div class="diff-removed">-    const onDisconnect = () => {</div><div class="diff-removed">-      cleanup();</div><div class="diff-removed">-      reject(new ElementPollingCancellationError());</div><div class="diff-removed">-    };</div><div class="diff-removed">-</div><div class="diff-removed">-    const onInspectedElement = (data: any) => {</div><div class="diff-removed">-      if (data.responseID === requestID) {</div><div class="diff-removed">-        cleanup();</div><div class="diff-removed">-        resolve((data: T));</div><div class="diff-removed">-      }</div><div class="diff-removed">-    };</div><div class="diff-removed">-</div><div class="diff-removed">-    const onTimeout = () => {</div><div class="diff-removed">-      cleanup();</div><div class="diff-removed">-      reject(new TimeoutError(timeoutMessage));</div><div class="diff-removed">-    };</div><div class="diff-removed">-</div><div class="diff-removed">-    bridge.addListener(eventType, onInspectedElement);</div><div class="diff-removed">-    bridge.addListener('shutdown', onShutdown);</div><div class="diff-removed">-</div><div class="diff-removed">-    if (shouldListenToPauseEvents) {</div><div class="diff-removed">-      bridge.addListener('pauseElementPolling', onDisconnect);</div><div class="diff-removed">-    }</div><div class="diff-removed">-</div><div class="diff-removed">-    const timeoutID = setTimeout(onTimeout, TIMEOUT_DELAY);</div><div class="diff-removed">-  });</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-export function cloneInspectedElementWithPath(</div><div class="diff-removed">-  inspectedElement: InspectedElementFrontend,</div><div class="diff-removed">-  path: Array<string | number>,</div><div class="diff-removed">-  value: Object,</div><div class="diff-removed">-): InspectedElementFrontend {</div><div class="diff-removed">-  const hydratedValue = hydrateHelper(value, path);</div><div class="diff-removed">-  const clonedInspectedElement = {...inspectedElement};</div><div class="diff-removed">-</div><div class="diff-removed">-  fillInPath(clonedInspectedElement, value, path, hydratedValue);</div><div class="diff-removed">-</div><div class="diff-removed">-  return clonedInspectedElement;</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-export function convertInspectedElementBackendToFrontend(</div><div class="diff-removed">-  inspectedElementBackend: InspectedElementBackend,</div><div class="diff-removed">-): InspectedElementFrontend {</div><div class="diff-removed">-  const {</div><div class="diff-removed">-    canEditFunctionProps,</div><div class="diff-removed">-    canEditFunctionPropsDeletePaths,</div><div class="diff-removed">-    canEditFunctionPropsRenamePaths,</div><div class="diff-removed">-    canEditHooks,</div><div class="diff-removed">-    canEditHooksAndDeletePaths,</div><div class="diff-removed">-    canEditHooksAndRenamePaths,</div><div class="diff-removed">-    canToggleError,</div><div class="diff-removed">-    isErrored,</div><div class="diff-removed">-    canToggleSuspense,</div><div class="diff-removed">-    canViewSource,</div><div class="diff-removed">-    hasLegacyContext,</div><div class="diff-removed">-    id,</div><div class="diff-removed">-    type,</div><div class="diff-removed">-    owners,</div><div class="diff-removed">-    source,</div><div class="diff-removed">-    context,</div><div class="diff-removed">-    hooks,</div><div class="diff-removed">-    plugins,</div><div class="diff-removed">-    props,</div><div class="diff-removed">-    rendererPackageName,</div><div class="diff-removed">-    rendererVersion,</div><div class="diff-removed">-    rootType,</div><div class="diff-removed">-    state,</div><div class="diff-removed">-    key,</div><div class="diff-removed">-    errors,</div><div class="diff-removed">-    warnings,</div><div class="diff-removed">-    nativeTag,</div><div class="diff-removed">-  } = inspectedElementBackend;</div><div class="diff-removed">-</div><div class="diff-removed">-  const inspectedElement: InspectedElementFrontend = {</div><div class="diff-removed">-    canEditFunctionProps,</div><div class="diff-removed">-    canEditFunctionPropsDeletePaths,</div><div class="diff-removed">-    canEditFunctionPropsRenamePaths,</div><div class="diff-removed">-    canEditHooks,</div><div class="diff-removed">-    canEditHooksAndDeletePaths,</div><div class="diff-removed">-    canEditHooksAndRenamePaths,</div><div class="diff-removed">-    canToggleError,</div><div class="diff-removed">-    isErrored,</div><div class="diff-removed">-    canToggleSuspense,</div><div class="diff-removed">-    canViewSource,</div><div class="diff-removed">-    hasLegacyContext,</div><div class="diff-removed">-    id,</div><div class="diff-removed">-    key,</div><div class="diff-removed">-    plugins,</div><div class="diff-removed">-    rendererPackageName,</div><div class="diff-removed">-    rendererVersion,</div><div class="diff-removed">-    rootType,</div><div class="diff-removed">-    // Previous backend implementations (<= 5.0.1) have a different interface for Source, with fileName.</div><div class="diff-removed">-    // This gates the source features for only compatible backends: >= 5.0.2</div><div class="diff-removed">-    source: source && source.sourceURL ? source : null,</div><div class="diff-removed">-    type,</div><div class="diff-removed">-    owners:</div><div class="diff-removed">-      owners === null</div><div class="diff-removed">-        ? null</div><div class="diff-removed">-        : owners.map(backendToFrontendSerializedElementMapper),</div><div class="diff-removed">-    context: hydrateHelper(context),</div><div class="diff-removed">-    hooks: hydrateHelper(hooks),</div><div class="diff-removed">-    props: hydrateHelper(props),</div><div class="diff-removed">-    state: hydrateHelper(state),</div><div class="diff-removed">-    errors,</div><div class="diff-removed">-    warnings,</div><div class="diff-removed">-    nativeTag,</div><div class="diff-removed">-  };</div><div class="diff-removed">-</div><div class="diff-removed">-  return inspectedElement;</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-export function hydrateHelper(</div><div class="diff-removed">-  dehydratedData: DehydratedData | null,</div><div class="diff-removed">-  path: ?InspectedElementPath,</div><div class="diff-removed">-): Object | null {</div><div class="diff-removed">-  if (dehydratedData !== null) {</div><div class="diff-removed">-    const {cleaned, data, unserializable} = dehydratedData;</div><div class="diff-removed">-</div><div class="diff-removed">-    if (path) {</div><div class="diff-removed">-      const {length} = path;</div><div class="diff-removed">-      if (length > 0) {</div><div class="diff-removed">-        // Hydration helper requires full paths, but inspection dehydrates with relative paths.</div><div class="diff-removed">-        // In that event it's important that we adjust the "cleaned" paths to match.</div><div class="diff-removed">-        return hydrate(</div><div class="diff-removed">-          data,</div><div class="diff-removed">-          cleaned.map(cleanedPath => cleanedPath.slice(length)),</div><div class="diff-removed">-          unserializable.map(unserializablePath =></div><div class="diff-removed">-            unserializablePath.slice(length),</div><div class="diff-removed">-          ),</div><div class="diff-removed">-        );</div><div class="diff-removed">-      }</div><div class="diff-removed">-    }</div><div class="diff-removed">-</div><div class="diff-removed">-    return hydrate(data, cleaned, unserializable);</div><div class="diff-removed">-  } else {</div><div class="diff-removed">-    return null;</div><div class="diff-removed">-  }</div><div class="diff-removed">-}</div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    