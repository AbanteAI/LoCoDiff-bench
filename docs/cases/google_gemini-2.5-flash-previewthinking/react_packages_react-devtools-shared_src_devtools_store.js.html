<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/react-devtools-shared/src/devtools/store.js - Gemini 2.5 Flash Thinking</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/react-devtools-shared/src/devtools/store.js</h1>
        <p><a href="../../models/google_gemini-2.5-flash-previewthinking.html">‚Üê Back to Gemini 2.5 Flash Thinking Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> Gemini 2.5 Flash Thinking</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 55115</p>
                <p><strong>Output Tokens:</strong> N/A</p>
                <p><strong>Native Prompt Tokens:</strong> 66395</p>
                <p><strong>Native Completion Tokens:</strong> 24328</p>
                <p><strong>Native Tokens Reasoning:</strong> 11499</p>
                <p><strong>Native Finish Reason:</strong> STOP</p>
                <p><strong>Cost:</strong> $0.09510725</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/google_gemini-2.5-flash-previewthinking/react_packages_react-devtools-shared_src_devtools_store.js/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/google_gemini-2.5-flash-previewthinking/react_packages_react-devtools-shared_src_devtools_store.js/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/google_gemini-2.5-flash-previewthinking/react_packages_react-devtools-shared_src_devtools_store.js/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div class="diff-header">--- react_packages_react-devtools-shared_src_devtools_store.js_expectedoutput.txt (expected)+++ react_packages_react-devtools-shared_src_devtools_store.js_extracted.txt (actual)@@ -21,7 +21,7 @@   TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS,</div><div>   TREE_OPERATION_UPDATE_TREE_BASE_DURATION,</div><div> } from '../constants';</div><div class="diff-removed">-import {ElementTypeRoot} from '../frontend/types';</div><div class="diff-added">+import {ElementTypeRoot, StrictMode} from '../frontend/types';</div><div> import {</div><div>   getSavedComponentFilters,</div><div>   setSavedComponentFilters,</div><div class="diff-info">@@ -37,7 +37,7 @@   BRIDGE_PROTOCOL,</div><div>   currentBridgeProtocol,</div><div> } from 'react-devtools-shared/src/bridge';</div><div class="diff-removed">-import {StrictMode} from 'react-devtools-shared/src/frontend/types';</div><div class="diff-added">+import UnsupportedBridgeOperationError from 'react-devtools-shared/src/UnsupportedBridgeOperationError';</div><div> import {withPermissionsCheck} from 'react-devtools-shared/src/frontend/utils/withPermissionsCheck';</div><div> </div><div> import type {</div><div class="diff-info">@@ -49,13 +49,12 @@   FrontendBridge,</div><div>   BridgeProtocol,</div><div> } from 'react-devtools-shared/src/bridge';</div><div class="diff-removed">-import UnsupportedBridgeOperationError from 'react-devtools-shared/src/UnsupportedBridgeOperationError';</div><div> import type {DevToolsHookSettings} from '../backend/types';</div><div> </div><div> const debug = (methodName: string, ...args: Array<string>) => {</div><div>   if (__DEBUG__) {</div><div>     console.log(</div><div class="diff-removed">-      `%cStore %c${methodName}`,</div><div class="diff-added">+      '%cStore %c' + methodName,</div><div>       'color: green; font-weight: bold;',</div><div>       'font-weight: bold;',</div><div>       ...args,</div><div class="diff-info">@@ -104,8 +103,12 @@   roots: [],</div><div>   rootSupportsBasicProfiling: [],</div><div>   rootSupportsTimelineProfiling: [],</div><div class="diff-added">+  supportsClickToInspect: [],</div><div class="diff-added">+  supportsInspectMatchingDOMElement: [],</div><div>   supportsNativeStyleEditor: [],</div><div>   supportsReloadAndProfile: [],</div><div class="diff-added">+  supportsTimeline: [],</div><div class="diff-added">+  supportsTraceUpdates: [],</div><div>   unsupportedBridgeProtocolDetected: [],</div><div>   unsupportedRendererVersionDetected: [],</div><div> }> {</div><div class="diff-info">@@ -126,8 +129,10 @@   _componentFilters: Array<ComponentFilter>;</div><div> </div><div>   // Map of ID to number of recorded error and warning message IDs.</div><div class="diff-removed">-  _errorsAndWarnings: Map<number, {errorCount: number, warningCount: number}> =</div><div class="diff-removed">-    new Map();</div><div class="diff-added">+  _errorsAndWarnings: Map<</div><div class="diff-added">+    number,</div><div class="diff-added">+    {errorCount: number, warningCount: number},</div><div class="diff-added">+  > = new Map();</div><div> </div><div>   // At least one of the injected renderers contains (DEV only) owner metadata.</div><div>   _hasOwnerMetadata: boolean = false;</div><div class="diff-info">@@ -170,11 +175,10 @@   // These options may be initially set by a configuration option when constructing the Store.</div><div>   _supportsInspectMatchingDOMElement: boolean = false;</div><div>   _supportsClickToInspect: boolean = false;</div><div class="diff-added">+  _isReloadAndProfileFrontendSupported: boolean = false;</div><div class="diff-added">+  _isReloadAndProfileBackendSupported: boolean = false;</div><div>   _supportsTimeline: boolean = false;</div><div>   _supportsTraceUpdates: boolean = false;</div><div class="diff-removed">-</div><div class="diff-removed">-  _isReloadAndProfileFrontendSupported: boolean = false;</div><div class="diff-removed">-  _isReloadAndProfileBackendSupported: boolean = false;</div><div> </div><div>   // These options default to false but may be updated as roots are added and removed.</div><div>   _rootSupportsBasicProfiling: boolean = false;</div><div class="diff-info">@@ -274,7 +278,7 @@   }</div><div> </div><div>   // This is only used in tests to avoid memory leaks.</div><div class="diff-removed">-  assertExpectedRootMapSizes() {</div><div class="diff-added">+  assertExpectedRootMapSizes(): void {</div><div>     if (this.roots.length === 0) {</div><div>       // The only safe time to assert these maps are empty is when the store is empty.</div><div>       this.assertMapSizeMatchesRootCount(this._idToElement, '_idToElement');</div><div class="diff-info">@@ -293,7 +297,7 @@   }</div><div> </div><div>   // This is only used in tests to avoid memory leaks.</div><div class="diff-removed">-  assertMapSizeMatchesRootCount(map: Map<any, any>, mapName: string) {</div><div class="diff-added">+  assertMapSizeMatchesRootCount(map: Map<any, any>, mapName: string): void {</div><div>     const expectedSize = this.roots.length;</div><div>     if (map.size !== expectedSize) {</div><div>       this._throwAndEmitError(</div><div class="diff-info">@@ -310,6 +314,10 @@ </div><div>   get backendVersion(): string | null {</div><div>     return this._backendVersion;</div><div class="diff-added">+  }</div><div class="diff-added">+</div><div class="diff-added">+  get bridgeProtocol(): BridgeProtocol | null {</div><div class="diff-added">+    return this._bridgeProtocol;</div><div>   }</div><div> </div><div>   get collapseNodesByDefault(): boolean {</div><div class="diff-info">@@ -374,10 +382,6 @@     this.emit('componentFilters');</div><div>   }</div><div> </div><div class="diff-removed">-  get bridgeProtocol(): BridgeProtocol | null {</div><div class="diff-removed">-    return this._bridgeProtocol;</div><div class="diff-removed">-  }</div><div class="diff-removed">-</div><div>   get componentWithErrorCount(): number {</div><div>     if (!this._shouldShowWarningsAndErrors) {</div><div>       return 0;</div><div class="diff-info">@@ -450,12 +454,12 @@     return this._rootSupportsTimelineProfiling;</div><div>   }</div><div> </div><div class="diff-added">+  get supportsClickToInspect(): boolean {</div><div class="diff-added">+    return this._supportsClickToInspect;</div><div class="diff-added">+  }</div><div class="diff-added">+</div><div>   get supportsInspectMatchingDOMElement(): boolean {</div><div>     return this._supportsInspectMatchingDOMElement;</div><div class="diff-removed">-  }</div><div class="diff-removed">-</div><div class="diff-removed">-  get supportsClickToInspect(): boolean {</div><div class="diff-removed">-    return this._supportsClickToInspect;</div><div>   }</div><div> </div><div>   get supportsNativeStyleEditor(): boolean {</div><div class="diff-info">@@ -819,7 +823,9 @@ </div><div>           const weightDelta = 1 - element.weight;</div><div> </div><div class="diff-removed">-          let parentElement = this._idToElement.get(element.parentID);</div><div class="diff-added">+          let parentElement: void | Element = this._idToElement.get(</div><div class="diff-added">+            element.parentID,</div><div class="diff-added">+          );</div><div>           while (parentElement !== undefined) {</div><div>             // We don't need to break on a collapsed parent in the same way as the expand case below.</div><div>             // That's because collapsing a node doesn't "bubble" and affect its parents.</div><div class="diff-info">@@ -843,7 +849,9 @@               : currentElement.weight;</div><div>             const weightDelta = newWeight - oldWeight;</div><div> </div><div class="diff-removed">-            let parentElement = this._idToElement.get(currentElement.parentID);</div><div class="diff-added">+            let parentElement: void | Element = this._idToElement.get(</div><div class="diff-added">+              currentElement.parentID,</div><div class="diff-added">+            );</div><div>             while (parentElement !== undefined) {</div><div>               parentElement.weight += weightDelta;</div><div>               if (parentElement.isCollapsed) {</div><div class="diff-info">@@ -867,8 +875,11 @@       if (didMutate) {</div><div>         let weightAcrossRoots = 0;</div><div>         this._roots.forEach(rootID => {</div><div class="diff-removed">-          const {weight} = ((this.getElementByID(rootID): any): Element);</div><div class="diff-removed">-          weightAcrossRoots += weight;</div><div class="diff-added">+          const root = this.getElementByID(rootID);</div><div class="diff-added">+          if (root !== null) {</div><div class="diff-added">+            const {weight} = root;</div><div class="diff-added">+            weightAcrossRoots += weight;</div><div class="diff-added">+          }</div><div>         });</div><div>         this._weightAcrossRoots = weightAcrossRoots;</div><div> </div><div class="diff-info">@@ -886,7 +897,7 @@   ) => void = (parentElement, weightDelta) => {</div><div>     let isInsideCollapsedSubTree = false;</div><div> </div><div class="diff-removed">-    while (parentElement != null) {</div><div class="diff-added">+    while (parentElement !== undefined) {</div><div>       parentElement.weight += weightDelta;</div><div> </div><div>       // Additions and deletions within a collapsed subtree should not bubble beyond the collapsed parent.</div><div class="diff-info">@@ -985,6 +996,8 @@                 `Cannot add node "${id}" because a node with that id is already in the Store.`,</div><div>               ),</div><div>             );</div><div class="diff-added">+</div><div class="diff-added">+            break;</div><div>           }</div><div> </div><div>           if (type === ElementTypeRoot) {</div><div class="diff-info">@@ -1196,7 +1209,6 @@               haveErrorsOrWarningsChanged = true;</div><div>             }</div><div>           }</div><div class="diff-removed">-</div><div>           break;</div><div>         }</div><div>         case TREE_OPERATION_REMOVE_ROOT: {</div><div class="diff-info">@@ -1257,10 +1269,10 @@           const children = element.children;</div><div>           if (children.length !== numChildren) {</div><div>             this._throwAndEmitError(</div><div class="diff-removed">-              Error(</div><div class="diff-removed">-                `Children cannot be added or removed during a reorder operation.`,</div><div class="diff-removed">-              ),</div><div class="diff-added">+              Error(`Children cannot be added or removed during a reorder operation.`),</div><div>             );</div><div class="diff-added">+</div><div class="diff-added">+            break;</div><div>           }</div><div> </div><div>           for (let j = 0; j < numChildren; j++) {</div><div class="diff-info">@@ -1298,10 +1310,7 @@           }</div><div> </div><div>           if (__DEBUG__) {</div><div class="diff-removed">-            debug(</div><div class="diff-removed">-              'Subtree mode',</div><div class="diff-removed">-              `Subtree with root ${id} set to mode ${mode}`,</div><div class="diff-removed">-            );</div><div class="diff-added">+            debug('Subtree mode', `Subtree with root ${id} set to mode ${mode}`);</div><div>           }</div><div>           break;</div><div>         }</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    