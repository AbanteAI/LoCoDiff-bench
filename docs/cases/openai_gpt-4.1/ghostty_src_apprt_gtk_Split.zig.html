<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: src/apprt/gtk/Split.zig - GPT-4.1</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: src/apprt/gtk/Split.zig</h1>
        <p><a href="../../models/openai_gpt-4.1.html">‚Üê Back to GPT-4.1 Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> GPT-4.1</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 24834</p>
                <p><strong>Output Tokens:</strong> N/A</p>
                <p><strong>Native Prompt Tokens:</strong> 24864</p>
                <p><strong>Native Completion Tokens:</strong> 3285</p>
                <p><strong>Native Tokens Reasoning:</strong> 0</p>
                <p><strong>Native Finish Reason:</strong> stop</p>
                <p><strong>Cost:</strong> $0.0038004</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/openai_gpt-4.1/ghostty_src_apprt_gtk_Split.zig/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/openai_gpt-4.1/ghostty_src_apprt_gtk_Split.zig/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/openai_gpt-4.1/ghostty_src_apprt_gtk_Split.zig/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div class="diff-header">--- ghostty_src_apprt_gtk_Split.zig_expectedoutput.txt (expected)+++ ghostty_src_apprt_gtk_Split.zig_extracted.txt (actual)@@ -1,5 +1,3 @@-/// Split represents a surface split where two surfaces are shown side-by-side</div><div class="diff-removed">-/// within the same window either vertically or horizontally.</div><div> const Split = @This();</div><div> </div><div> const std = @import("std");</div><div class="diff-info">@@ -168,7 +166,7 @@     self.removeChild(self.top_left, self.bottom_right);</div><div> }</div><div> </div><div class="diff-removed">-/// Remove the top left child.</div><div class="diff-added">+/// Remove the bottom right child.</div><div> pub fn removeBottomRight(self: *Split) void {</div><div>     self.removeChild(self.bottom_right, self.top_left);</div><div> }</div><div class="diff-info">@@ -194,62 +192,6 @@     // When a child is removed we are no longer a split, so destroy ourself</div><div>     remove.deinit(alloc);</div><div>     alloc.destroy(self);</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-/// Move the divider in the given direction by the given amount.</div><div class="diff-removed">-pub fn moveDivider(</div><div class="diff-removed">-    self: *Split,</div><div class="diff-removed">-    direction: apprt.action.ResizeSplit.Direction,</div><div class="diff-removed">-    amount: u16,</div><div class="diff-removed">-) void {</div><div class="diff-removed">-    const min_pos = 10;</div><div class="diff-removed">-</div><div class="diff-removed">-    const pos = self.paned.getPosition();</div><div class="diff-removed">-    const new = switch (direction) {</div><div class="diff-removed">-        .up, .left => @max(pos - amount, min_pos),</div><div class="diff-removed">-        .down, .right => new_pos: {</div><div class="diff-removed">-            const max_pos: u16 = @as(u16, @intFromFloat(self.maxPosition())) - min_pos;</div><div class="diff-removed">-            break :new_pos @min(pos + amount, max_pos);</div><div class="diff-removed">-        },</div><div class="diff-removed">-    };</div><div class="diff-removed">-</div><div class="diff-removed">-    self.paned.setPosition(new);</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-/// Equalize the splits in this split panel. Each split is equalized based on</div><div class="diff-removed">-/// its weight, i.e. the number of Surfaces it contains.</div><div class="diff-removed">-///</div><div class="diff-removed">-/// It works recursively by equalizing the children of each split.</div><div class="diff-removed">-///</div><div class="diff-removed">-/// It returns this split's weight.</div><div class="diff-removed">-pub fn equalize(self: *Split) f64 {</div><div class="diff-removed">-    // Calculate weights of top_left/bottom_right</div><div class="diff-removed">-    const top_left_weight = self.top_left.equalize();</div><div class="diff-removed">-    const bottom_right_weight = self.bottom_right.equalize();</div><div class="diff-removed">-    const weight = top_left_weight + bottom_right_weight;</div><div class="diff-removed">-</div><div class="diff-removed">-    // Ratio of top_left weight to overall weight, which gives the split ratio</div><div class="diff-removed">-    const ratio = top_left_weight / weight;</div><div class="diff-removed">-</div><div class="diff-removed">-    // Convert split ratio into new position for divider</div><div class="diff-removed">-    self.paned.setPosition(@intFromFloat(self.maxPosition() * ratio));</div><div class="diff-removed">-</div><div class="diff-removed">-    return weight;</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-// maxPosition returns the maximum position of the GtkPaned, which is the</div><div class="diff-removed">-// "max-position" attribute.</div><div class="diff-removed">-fn maxPosition(self: *Split) f64 {</div><div class="diff-removed">-    var value: gobject.Value = std.mem.zeroes(gobject.Value);</div><div class="diff-removed">-    defer value.unset();</div><div class="diff-removed">-</div><div class="diff-removed">-    _ = value.init(gobject.ext.types.int);</div><div class="diff-removed">-    self.paned.as(gobject.Object).getProperty(</div><div class="diff-removed">-        "max-position",</div><div class="diff-removed">-        &value,</div><div class="diff-removed">-    );</div><div class="diff-removed">-</div><div class="diff-removed">-    return @floatFromInt(value.getInt());</div><div> }</div><div> </div><div> // This replaces the element at the given pointer with a new element.</div><div class="diff-info">@@ -272,7 +214,62 @@     self.updateChildren();</div><div> }</div><div> </div><div class="diff-removed">-// grabFocus grabs the focus of the top-left element.</div><div class="diff-added">+/// Move the divider in the given direction by the given amount.</div><div class="diff-added">+pub fn moveDivider(</div><div class="diff-added">+    self: *Split,</div><div class="diff-added">+    direction: apprt.action.ResizeSplit.Direction,</div><div class="diff-added">+    amount: u16,</div><div class="diff-added">+) void {</div><div class="diff-added">+    const min_pos = 10;</div><div class="diff-added">+</div><div class="diff-added">+    const pos = self.paned.getPosition();</div><div class="diff-added">+    const new = switch (direction) {</div><div class="diff-added">+        .up, .left => @max(pos - amount, min_pos),</div><div class="diff-added">+        .down, .right => new_pos: {</div><div class="diff-added">+            const max_pos: u16 = @as(u16, @intFromFloat(self.maxPosition())) - min_pos;</div><div class="diff-added">+            break :new_pos @min(pos + amount, max_pos);</div><div class="diff-added">+        },</div><div class="diff-added">+    };</div><div class="diff-added">+</div><div class="diff-added">+    self.paned.setPosition(new);</div><div class="diff-added">+}</div><div class="diff-added">+</div><div class="diff-added">+/// Equalize the splits in this split panel. Each split is equalized based on</div><div class="diff-added">+/// its weight, i.e. the number of Surfaces it contains.</div><div class="diff-added">+///</div><div class="diff-added">+/// It works recursively by equalizing the children of each split.</div><div class="diff-added">+///</div><div class="diff-added">+/// It returns this split's weight.</div><div class="diff-added">+pub fn equalize(self: *Split) f64 {</div><div class="diff-added">+    // Calculate weights of top_left/bottom_right</div><div class="diff-added">+    const top_left_weight = self.top_left.equalize();</div><div class="diff-added">+    const bottom_right_weight = self.bottom_right.equalize();</div><div class="diff-added">+    const weight = top_left_weight + bottom_right_weight;</div><div class="diff-added">+</div><div class="diff-added">+    // Ratio of top_left weight to overall weight, which gives the split ratio</div><div class="diff-added">+    const ratio = top_left_weight / weight;</div><div class="diff-added">+</div><div class="diff-added">+    // Convert split ratio into new position for divider</div><div class="diff-added">+    self.paned.setPosition(@intFromFloat(self.maxPosition() * ratio));</div><div class="diff-added">+</div><div class="diff-added">+    return weight;</div><div class="diff-added">+}</div><div class="diff-added">+</div><div class="diff-added">+// maxPosition returns the maximum position of the GtkPaned, which is the</div><div class="diff-added">+// "max-position" attribute.</div><div class="diff-added">+fn maxPosition(self: *Split) f64 {</div><div class="diff-added">+    var value: gobject.Value = std.mem.zeroes(gobject.Value);</div><div class="diff-added">+    defer value.unset();</div><div class="diff-added">+</div><div class="diff-added">+    _ = value.init(gobject.ext.types.int);</div><div class="diff-added">+    self.paned.as(gobject.Object).getProperty(</div><div class="diff-added">+        "max-position",</div><div class="diff-added">+        &value,</div><div class="diff-added">+    );</div><div class="diff-added">+</div><div class="diff-added">+    return @floatFromInt(value.getInt());</div><div class="diff-added">+}</div><div class="diff-added">+</div><div> pub fn grabFocus(self: *Split) void {</div><div>     self.top_left.grabFocus();</div><div> }</div><div class="diff-info">@@ -411,7 +408,6 @@         // From the bottom right is more compliated. It is the deepest</div><div>         // (last) surface in the</div><div>         .bottom_right => {</div><div class="diff-removed">-            // If we have no parent split then there can be no next.</div><div>             const parent = self.container.split() orelse return .{</div><div>                 .surface = self.top_left.deepestSurface(.top_left) orelse return null,</div><div>                 .wrapped = true,</div><div class="diff-info">@@ -438,4 +434,18 @@ fn removeChildren(self: *const Split) void {</div><div>     self.detachTopLeft();</div><div>     self.detachBottomRight();</div><div class="diff-added">+}</div><div class="diff-added">+</div><div class="diff-added">+/// Get the most deeply nested surface for a given side.</div><div class="diff-added">+fn deepestSurface(self: *const Split, side: Side) ?*Surface {</div><div class="diff-added">+    return switch (side) {</div><div class="diff-added">+        .bottom_right => switch (self.bottom_right) {</div><div class="diff-added">+            .surface => |s| s,</div><div class="diff-added">+            .split => |s| s.deepestSurface(.bottom_right),</div><div class="diff-added">+        },</div><div class="diff-added">+        .top_left => switch (self.top_left) {</div><div class="diff-added">+            .surface => |s| s,</div><div class="diff-added">+            .split => |s| s.deepestSurface(.top_left),</div><div class="diff-added">+        },</div><div class="diff-added">+    };</div><div> }</div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    