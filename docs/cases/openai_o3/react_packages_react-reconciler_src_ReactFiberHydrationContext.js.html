<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/react-reconciler/src/ReactFiberHydrationContext.js - o3</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/react-reconciler/src/ReactFiberHydrationContext.js</h1>
        <h2>Model: o3</h2>
        <p><a href="../../models/openai_o3.html">All o3 Cases</a> | <a href="../../cases.html">All Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> o3</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 82014</p>
                <p><strong>Native Prompt Tokens:</strong> 80032</p>
                <p><strong>Native Completion Tokens:</strong> 8615</p>
                <p><strong>Native Tokens Reasoning:</strong> 2240</p>
                <p><strong>Native Finish Reason:</strong> stop</p>
                <p><strong>Cost:</strong> $1.2021659999999998</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/openai_o3/react_packages_react-reconciler_src_ReactFiberHydrationContext.js/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/openai_o3/react_packages_react-reconciler_src_ReactFiberHydrationContext.js/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/openai_o3/react_packages_react-reconciler_src_ReactFiberHydrationContext.js/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div></div><div>index f9932b8c..f410822c 100644</div><div class="diff-header">--- a/react_packages_react-reconciler_src_ReactFiberHydrationContext.js_expectedoutput.txt (expected):tmp/tmpuhketsrq_expected.txt	</div><div class="diff-header">+++ b/react_packages_react-reconciler_src_ReactFiberHydrationContext.js_extracted.txt (actual):tmp/tmp50lad9_j_actual.txt	</div><div class="diff-info">@@ -1,5 +1,5 @@</div><div> /**</div><div class="diff-removed">- * Copyright (c) Meta Platforms, Inc. and affiliates.</div><div class="diff-added">+ * Copyright (c) Facebook, Inc. and its affiliates.</div><div>  *</div><div>  * This source code is licensed under the MIT license found in the</div><div>  * LICENSE file in the root directory of this source tree.</div><div class="diff-info">@@ -33,8 +33,10 @@ import {</div><div> import {favorSafetyOverHydrationPerf} from 'shared/ReactFeatureFlags';</div><div> </div><div> import {createCapturedValueAtFiber} from './ReactCapturedValue';</div><div class="diff-removed">-</div><div class="diff-removed">-import {createFiberFromDehydratedFragment} from './ReactFiber';</div><div class="diff-added">+import {</div><div class="diff-added">+  createFiberFromDehydratedFragment,</div><div class="diff-added">+  createFiberFromHostInstanceForDeletion,</div><div class="diff-added">+} from './ReactFiber';</div><div> import {</div><div>   shouldSetTextContent,</div><div>   supportsHydration,</div><div class="diff-info">@@ -63,6 +65,7 @@ import {</div><div>   canHydrateSuspenseInstance,</div><div>   canHydrateFormStateMarker,</div><div>   isFormStateMarkerMatching,</div><div class="diff-added">+  isHydratableText,</div><div>   validateHydratableInstance,</div><div>   validateHydratableTextInstance,</div><div> } from './ReactFiberConfig';</div><div class="diff-info">@@ -122,10 +125,7 @@ function buildHydrationDiffNode(</div><div>     fiber.return,</div><div>     distanceFromLeaf + 1,</div><div>   ).children;</div><div class="diff-removed">-  // The same node may already exist in the parent. Since we currently always render depth first</div><div class="diff-removed">-  // and rerender if we suspend or terminate early, if a shared ancestor was added we should still</div><div class="diff-removed">-  // be inside of that shared ancestor which means it was the last one to be added. If this changes</div><div class="diff-removed">-  // we may have to scan the whole set.</div><div class="diff-added">+  // The same node may already exist in the parent.</div><div>   if (siblings.length > 0 && siblings[siblings.length - 1].fiber === fiber) {</div><div>     const existing = siblings[siblings.length - 1];</div><div>     if (existing.distanceFromLeaf > distanceFromLeaf) {</div><div class="diff-info">@@ -144,17 +144,7 @@ function buildHydrationDiffNode(</div><div>   return newNode;</div><div> }</div><div> </div><div class="diff-removed">-function warnIfHydrating() {</div><div class="diff-removed">-  if (__DEV__) {</div><div class="diff-removed">-    if (isHydrating) {</div><div class="diff-removed">-      console.error(</div><div class="diff-removed">-        'We should not be hydrating here. This is a bug in React. Please file a bug.',</div><div class="diff-removed">-      );</div><div class="diff-removed">-    }</div><div class="diff-removed">-  }</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-export function markDidThrowWhileHydratingDEV() {</div><div class="diff-added">+function markDidThrowWhileHydratingDEV() {</div><div>   if (__DEV__) {</div><div>     didSuspendOrErrorDEV = true;</div><div>   }</div><div class="diff-info">@@ -221,15 +211,65 @@ function reenterHydrationStateFromDehydratedSuspenseInstance(</div><div>   return true;</div><div> }</div><div> </div><div class="diff-added">+function warnForDeletedHydratableInstance(</div><div class="diff-added">+  parentType: string,</div><div class="diff-added">+  child: HydratableInstance,</div><div class="diff-added">+) {</div><div class="diff-added">+  if (__DEV__) {</div><div class="diff-added">+    const description = describeHydratableInstanceForDevWarnings(child);</div><div class="diff-added">+    if (typeof description === 'string') {</div><div class="diff-added">+      console.error(</div><div class="diff-added">+        'Did not expect server HTML to contain the text node "%s" in <%s>.',</div><div class="diff-added">+        description,</div><div class="diff-added">+        parentType,</div><div class="diff-added">+      );</div><div class="diff-added">+    } else {</div><div class="diff-added">+      console.error(</div><div class="diff-added">+        'Did not expect server HTML to contain a <%s> in <%s>.',</div><div class="diff-added">+        description.type,</div><div class="diff-added">+        parentType,</div><div class="diff-added">+      );</div><div class="diff-added">+    }</div><div class="diff-added">+  }</div><div class="diff-added">+}</div><div class="diff-added">+</div><div class="diff-added">+function warnForInsertedHydratedElement(parentType: string, tag: string) {</div><div class="diff-added">+  if (__DEV__) {</div><div class="diff-added">+    console.error(</div><div class="diff-added">+      'Expected server HTML to contain a matching <%s> in <%s>.',</div><div class="diff-added">+      tag,</div><div class="diff-added">+      parentType,</div><div class="diff-added">+    );</div><div class="diff-added">+  }</div><div class="diff-added">+}</div><div class="diff-added">+</div><div class="diff-added">+function warnForInsertedHydratedText(parentType: string, text: string) {</div><div class="diff-added">+  if (__DEV__) {</div><div class="diff-added">+    console.error(</div><div class="diff-added">+      'Expected server HTML to contain a matching text node for "%s" in <%s>.',</div><div class="diff-added">+      text,</div><div class="diff-added">+      parentType,</div><div class="diff-added">+    );</div><div class="diff-added">+  }</div><div class="diff-added">+}</div><div class="diff-added">+</div><div class="diff-added">+function warnForInsertedHydratedSuspense(parentType: string) {</div><div class="diff-added">+  if (__DEV__) {</div><div class="diff-added">+    console.error(</div><div class="diff-added">+      'Expected server HTML to contain a matching <%s> in <%s>.',</div><div class="diff-added">+      'Suspense',</div><div class="diff-added">+      parentType,</div><div class="diff-added">+    );</div><div class="diff-added">+  }</div><div class="diff-added">+}</div><div class="diff-added">+</div><div> function warnNonHydratedInstance(</div><div>   fiber: Fiber,</div><div>   rejectedCandidate: null | HydratableInstance,</div><div> ) {</div><div>   if (__DEV__) {</div><div>     if (didSuspendOrErrorDEV) {</div><div class="diff-removed">-      // Inside a boundary that already suspended. We're currently rendering the</div><div class="diff-removed">-      // siblings of a suspended node. The mismatch may be due to the missing</div><div class="diff-removed">-      // data, so it's probably a false positive.</div><div class="diff-added">+      // Inside a boundary that already suspended.</div><div>       return;</div><div>     }</div><div> </div><div class="diff-info">@@ -250,7 +290,6 @@ function tryHydrateInstance(</div><div>   nextInstance: any,</div><div>   hostContext: HostContext,</div><div> ) {</div><div class="diff-removed">-  // fiber is a HostComponent Fiber</div><div>   const instance = canHydrateInstance(</div><div>     nextInstance,</div><div>     fiber.type,</div><div class="diff-info">@@ -284,7 +323,6 @@ function tryHydrateInstance(</div><div> }</div><div> </div><div> function tryHydrateText(fiber: Fiber, nextInstance: any) {</div><div class="diff-removed">-  // fiber is a HostText Fiber</div><div>   const text = fiber.pendingProps;</div><div>   const textInstance = canHydrateTextInstance(</div><div>     nextInstance,</div><div class="diff-info">@@ -294,7 +332,6 @@ function tryHydrateText(fiber: Fiber, nextInstance: any) {</div><div>   if (textInstance !== null) {</div><div>     fiber.stateNode = (textInstance: TextInstance);</div><div>     hydrationParentFiber = fiber;</div><div class="diff-removed">-    // Text Instances don't have children so there's nothing to hydrate.</div><div>     nextHydratableInstance = null;</div><div>     return true;</div><div>   }</div><div class="diff-info">@@ -305,7 +342,6 @@ function tryHydrateActivity(</div><div>   fiber: Fiber,</div><div>   nextInstance: any,</div><div> ): null | ActivityInstance {</div><div class="diff-removed">-  // fiber is a ActivityComponent Fiber</div><div>   const activityInstance = canHydrateActivityInstance(</div><div>     nextInstance,</div><div>     rootOrSingletonContext,</div><div class="diff-info">@@ -318,17 +354,11 @@ function tryHydrateActivity(</div><div>       hydrationErrors: null,</div><div>     };</div><div>     fiber.memoizedState = activityState;</div><div class="diff-removed">-    // Store the dehydrated fragment as a child fiber.</div><div class="diff-removed">-    // This simplifies the code for getHostSibling and deleting nodes,</div><div class="diff-removed">-    // since it doesn't have to consider all Suspense boundaries and</div><div class="diff-removed">-    // check if they're dehydrated ones or not.</div><div>     const dehydratedFragment =</div><div>       createFiberFromDehydratedFragment(activityInstance);</div><div>     dehydratedFragment.return = fiber;</div><div>     fiber.child = dehydratedFragment;</div><div>     hydrationParentFiber = fiber;</div><div class="diff-removed">-    // While an Activity Instance does have children, we won't step into</div><div class="diff-removed">-    // it during the first pass. Instead, we'll reenter it later.</div><div>     nextHydratableInstance = null;</div><div>   }</div><div>   return activityInstance;</div><div class="diff-info">@@ -338,7 +368,6 @@ function tryHydrateSuspense(</div><div>   fiber: Fiber,</div><div>   nextInstance: any,</div><div> ): null | SuspenseInstance {</div><div class="diff-removed">-  // fiber is a SuspenseComponent Fiber</div><div>   const suspenseInstance = canHydrateSuspenseInstance(</div><div>     nextInstance,</div><div>     rootOrSingletonContext,</div><div class="diff-info">@@ -351,20 +380,15 @@ function tryHydrateSuspense(</div><div>       hydrationErrors: null,</div><div>     };</div><div>     fiber.memoizedState = suspenseState;</div><div class="diff-removed">-    // Store the dehydrated fragment as a child fiber.</div><div class="diff-removed">-    // This simplifies the code for getHostSibling and deleting nodes,</div><div class="diff-removed">-    // since it doesn't have to consider all Suspense boundaries and</div><div class="diff-removed">-    // check if they're dehydrated ones or not.</div><div>     const dehydratedFragment =</div><div>       createFiberFromDehydratedFragment(suspenseInstance);</div><div>     dehydratedFragment.return = fiber;</div><div>     fiber.child = dehydratedFragment;</div><div>     hydrationParentFiber = fiber;</div><div class="diff-removed">-    // While a Suspense Instance does have children, we won't step into</div><div class="diff-removed">-    // it during the first pass. Instead, we'll reenter it later.</div><div>     nextHydratableInstance = null;</div><div class="diff-added">+    return suspenseInstance;</div><div>   }</div><div class="diff-removed">-  return suspenseInstance;</div><div class="diff-added">+  return null;</div><div> }</div><div> </div><div> export const HydrationMismatchException: mixed = new Error(</div><div class="diff-info">@@ -375,8 +399,6 @@ export const HydrationMismatchException: mixed = new Error(</div><div> function throwOnHydrationMismatch(fiber: Fiber, fromText: boolean = false) {</div><div>   let diff = '';</div><div>   if (__DEV__) {</div><div class="diff-removed">-    // Consume the diff root for this mismatch.</div><div class="diff-removed">-    // Any other errors will get their own diffs.</div><div>     const diffRoot = hydrationDiffRootDEV;</div><div>     if (diffRoot !== null) {</div><div>       hydrationDiffRootDEV = null;</div><div class="diff-info">@@ -384,7 +406,9 @@ function throwOnHydrationMismatch(fiber: Fiber, fromText: boolean = false) {</div><div>     }</div><div>   }</div><div>   const error = new Error(</div><div class="diff-removed">-    `Hydration failed because the server rendered ${fromText ? 'text' : 'HTML'} didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:</div><div class="diff-added">+    `Hydration failed because the server rendered ${</div><div class="diff-added">+      fromText ? 'text' : 'HTML'</div><div class="diff-added">+    } didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:</div><div> ` +</div><div>       '\n' +</div><div>       "- A server/client branch `if (typeof window !== 'undefined')`.\n" +</div><div class="diff-info">@@ -395,8 +419,9 @@ function throwOnHydrationMismatch(fiber: Fiber, fromText: boolean = false) {</div><div>       '\n' +</div><div>       'It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.\n' +</div><div>       '\n' +</div><div class="diff-removed">-      'https://react.dev/link/hydration-mismatch' +</div><div class="diff-removed">-      diff,</div><div class="diff-added">+      '%s%s',</div><div class="diff-added">+    'https://react.dev/link/hydration-mismatch',</div><div class="diff-added">+    diff,</div><div>   );</div><div>   queueHydrationError(createCapturedValueAtFiber(error, fiber));</div><div>   throw HydrationMismatchException;</div><div class="diff-info">@@ -446,8 +471,6 @@ function tryToClaimNextHydratableInstance(fiber: Fiber): void {</div><div>   if (!isHydrating) {</div><div>     return;</div><div>   }</div><div class="diff-removed">-</div><div class="diff-removed">-  // Validate that this is ok to render here before any mismatches.</div><div>   const currentHostContext = getHostContext();</div><div>   const shouldKeepWarning = validateHydratableInstance(</div><div>     fiber.type,</div><div class="diff-info">@@ -474,7 +497,6 @@ function tryToClaimNextHydratableTextInstance(fiber: Fiber): void {</div><div>   const text = fiber.pendingProps;</div><div> </div><div>   let shouldKeepWarning = true;</div><div class="diff-removed">-  // Validate that this is ok to render here before any mismatches.</div><div>   const currentHostContext = getHostContext();</div><div>   shouldKeepWarning = validateHydratableTextInstance(text, currentHostContext);</div><div> </div><div class="diff-info">@@ -523,18 +545,10 @@ export function tryToClaimNextHydratableFormMarkerInstance(</div><div>       rootOrSingletonContext,</div><div>     );</div><div>     if (markerInstance) {</div><div class="diff-removed">-      // Found the marker instance.</div><div>       nextHydratableInstance = getNextHydratableSibling(markerInstance);</div><div class="diff-removed">-      // Return true if this marker instance should use the state passed</div><div class="diff-removed">-      // to hydrateRoot.</div><div class="diff-removed">-      // TODO: As an optimization, Fizz should only emit these markers if form</div><div class="diff-removed">-      // state is passed at the root.</div><div>       return isFormStateMarkerMatching(markerInstance);</div><div>     }</div><div>   }</div><div class="diff-removed">-  // Should have found a marker instance. Throw an error to trigger client</div><div class="diff-removed">-  // rendering. We don't bother to check if we're in a concurrent root because</div><div class="diff-removed">-  // useActionState is a new API, so backwards compat is not an issue.</div><div>   throwOnHydrationMismatch(fiber);</div><div>   return false;</div><div> }</div><div class="diff-info">@@ -551,6 +565,22 @@ function prepareToHydrateHostInstance(</div><div>   }</div><div> </div><div>   const instance: Instance = fiber.stateNode;</div><div class="diff-added">+  if (__DEV__) {</div><div class="diff-added">+    const shouldWarnIfMismatchDev = !didSuspendOrErrorDEV;</div><div class="diff-added">+    if (shouldWarnIfMismatchDev) {</div><div class="diff-added">+      const differences = diffHydratedPropsForDevWarnings(</div><div class="diff-added">+        instance,</div><div class="diff-added">+        fiber.type,</div><div class="diff-added">+        fiber.memoizedProps,</div><div class="diff-added">+        hostContext,</div><div class="diff-added">+      );</div><div class="diff-added">+      if (differences !== null) {</div><div class="diff-added">+        const diffNode = buildHydrationDiffNode(fiber, 0);</div><div class="diff-added">+        diffNode.serverProps = differences;</div><div class="diff-added">+      }</div><div class="diff-added">+    }</div><div class="diff-added">+  }</div><div class="diff-added">+</div><div>   const didHydrate = hydrateInstance(</div><div>     instance,</div><div>     fiber.type,</div><div class="diff-info">@@ -575,8 +605,6 @@ function prepareToHydrateHostTextInstance(fiber: Fiber): void {</div><div>   const textContent: string = fiber.memoizedProps;</div><div>   const shouldWarnIfMismatchDev = !didSuspendOrErrorDEV;</div><div>   let parentProps = null;</div><div class="diff-removed">-  // We assume that prepareToHydrateHostTextInstance is called in a context where the</div><div class="diff-removed">-  // hydration parent is the parent host component of this host text.</div><div>   const returnFiber = hydrationParentFiber;</div><div>   if (returnFiber !== null) {</div><div>     switch (returnFiber.tag) {</div><div class="diff-info">@@ -615,7 +643,6 @@ function prepareToHydrateHostTextInstance(fiber: Fiber): void {</div><div>         break;</div><div>       }</div><div>     }</div><div class="diff-removed">-    // TODO: What if it's a SuspenseInstance?</div><div>   }</div><div> </div><div>   const didHydrate = hydrateTextInstance(</div><div class="diff-info">@@ -649,7 +676,6 @@ function prepareToHydrateHostActivityInstance(fiber: Fiber): void {</div><div> </div><div>   hydrateActivityInstance(activityInstance, fiber);</div><div> }</div><div class="diff-removed">-</div><div> function prepareToHydrateHostSuspenseInstance(fiber: Fiber): void {</div><div>   if (!supportsHydration) {</div><div>     throw new Error(</div><div class="diff-info">@@ -671,7 +697,6 @@ function prepareToHydrateHostSuspenseInstance(fiber: Fiber): void {</div><div> </div><div>   hydrateSuspenseInstance(suspenseInstance, fiber);</div><div> }</div><div class="diff-removed">-</div><div> function skipPastDehydratedActivityInstance(</div><div>   fiber: Fiber,</div><div> ): null | HydratableInstance {</div><div class="diff-info">@@ -692,12 +717,6 @@ function skipPastDehydratedActivityInstance(</div><div> function skipPastDehydratedSuspenseInstance(</div><div>   fiber: Fiber,</div><div> ): null | HydratableInstance {</div><div class="diff-removed">-  if (!supportsHydration) {</div><div class="diff-removed">-    throw new Error(</div><div class="diff-removed">-      'Expected skipPastDehydratedSuspenseInstance() to never be called. ' +</div><div class="diff-removed">-        'This error is likely caused by a bug in React. Please file an issue.',</div><div class="diff-removed">-    );</div><div class="diff-removed">-  }</div><div>   const suspenseState: null | SuspenseState = fiber.memoizedState;</div><div>   const suspenseInstance: null | SuspenseInstance =</div><div>     suspenseState !== null ? suspenseState.dehydrated : null;</div><div class="diff-info">@@ -736,14 +755,9 @@ function popHydrationState(fiber: Fiber): boolean {</div><div>     return false;</div><div>   }</div><div>   if (fiber !== hydrationParentFiber) {</div><div class="diff-removed">-    // We're deeper than the current hydration context, inside an inserted</div><div class="diff-removed">-    // tree.</div><div>     return false;</div><div>   }</div><div>   if (!isHydrating) {</div><div class="diff-removed">-    // If we're not currently hydrating but we're in a hydration context, then</div><div class="diff-removed">-    // we were an insertion and now need to pop up reenter hydration of our</div><div class="diff-removed">-    // siblings.</div><div>     popToNextHostParent(fiber);</div><div>     isHydrating = true;</div><div>     return false;</div><div class="diff-info">@@ -752,17 +766,15 @@ function popHydrationState(fiber: Fiber): boolean {</div><div>   const tag = fiber.tag;</div><div> </div><div>   if (supportsSingletons) {</div><div class="diff-removed">-    // With float we never clear the Root, or Singleton instances. We also do not clear Instances</div><div class="diff-removed">-    // that have singleton text content</div><div>     if (</div><div class="diff-removed">-      tag !== HostRoot &&</div><div class="diff-removed">-      tag !== HostSingleton &&</div><div class="diff-removed">-      !(</div><div class="diff-removed">-        tag === HostComponent &&</div><div class="diff-added">+      tag === HostRoot ||</div><div class="diff-added">+      tag === HostSingleton ||</div><div class="diff-added">+      (tag === HostComponent &&</div><div>         (!shouldDeleteUnhydratedTailInstances(fiber.type) ||</div><div class="diff-removed">-          shouldSetTextContent(fiber.type, fiber.memoizedProps))</div><div class="diff-removed">-      )</div><div class="diff-added">+          shouldSetTextContent(fiber.type, fiber.memoizedProps)))</div><div>     ) {</div><div class="diff-added">+      // don't clear</div><div class="diff-added">+    } else {</div><div>       const nextInstance = nextHydratableInstance;</div><div>       if (nextInstance) {</div><div>         warnIfUnhydratedTailNodes(fiber);</div><div class="diff-info">@@ -770,15 +782,11 @@ function popHydrationState(fiber: Fiber): boolean {</div><div>       }</div><div>     }</div><div>   } else {</div><div class="diff-removed">-    // If we have any remaining hydratable nodes, we need to delete them now.</div><div class="diff-removed">-    // We only do this deeper than head and body since they tend to have random</div><div class="diff-removed">-    // other nodes in them. We also ignore components with pure text content in</div><div class="diff-removed">-    // side of them. We also don't delete anything inside the root container.</div><div>     if (</div><div>       tag !== HostRoot &&</div><div class="diff-removed">-      (tag !== HostComponent ||</div><div class="diff-removed">-        (shouldDeleteUnhydratedTailInstances(fiber.type) &&</div><div class="diff-removed">-          !shouldSetTextContent(fiber.type, fiber.memoizedProps)))</div><div class="diff-added">+      (tag === HostComponent &&</div><div class="diff-added">+        shouldDeleteUnhydratedTailInstances(fiber.type) &&</div><div class="diff-added">+        !shouldSetTextContent(fiber.type, fiber.memoizedProps))</div><div>     ) {</div><div>       const nextInstance = nextHydratableInstance;</div><div>       if (nextInstance) {</div><div class="diff-info">@@ -787,6 +795,7 @@ function popHydrationState(fiber: Fiber): boolean {</div><div>       }</div><div>     }</div><div>   }</div><div class="diff-added">+</div><div>   popToNextHostParent(fiber);</div><div>   if (tag === SuspenseComponent) {</div><div>     nextHydratableInstance = skipPastDehydratedSuspenseInstance(fiber);</div><div class="diff-info">@@ -835,14 +844,11 @@ function resetHydrationState(): void {</div><div>   didSuspendOrErrorDEV = false;</div><div> }</div><div> </div><div class="diff-removed">-export function upgradeHydrationErrorsToRecoverable(): Array<</div><div class="diff-added">+function upgradeHydrationErrorsToRecoverable(): Array<</div><div>   CapturedValue<mixed>,</div><div> > | null {</div><div>   const queuedErrors = hydrationErrors;</div><div>   if (queuedErrors !== null) {</div><div class="diff-removed">-    // Successfully completed a forced client render. The errors that occurred</div><div class="diff-removed">-    // during the hydration attempt are now recovered. We will log them in</div><div class="diff-removed">-    // commit phase, once the entire tree has finished.</div><div>     queueRecoverableErrors(queuedErrors);</div><div>     hydrationErrors = null;</div><div>   }</div><div class="diff-info">@@ -853,7 +859,7 @@ function getIsHydrating(): boolean {</div><div>   return isHydrating;</div><div> }</div><div> </div><div class="diff-removed">-export function queueHydrationError(error: CapturedValue<mixed>): void {</div><div class="diff-added">+function queueHydrationError(error: CapturedValue<mixed>): void {</div><div>   if (hydrationErrors === null) {</div><div>     hydrationErrors = [error];</div><div>   } else {</div><div class="diff-info">@@ -863,15 +869,12 @@ export function queueHydrationError(error: CapturedValue<mixed>): void {</div><div> </div><div> export function emitPendingHydrationWarnings() {</div><div>   if (__DEV__) {</div><div class="diff-removed">-    // If we haven't yet thrown any hydration errors by the time we reach the end we've successfully</div><div class="diff-removed">-    // hydrated, however, we might still have DEV-only mismatches that we log now.</div><div>     const diffRoot = hydrationDiffRootDEV;</div><div>     if (diffRoot !== null) {</div><div>       hydrationDiffRootDEV = null;</div><div>       const diff = describeDiff(diffRoot);</div><div> </div><div class="diff-removed">-      // Just pick the DFS-first leaf as the owner.</div><div class="diff-removed">-      // Should be good enough since most warnings only have a single error.</div><div class="diff-added">+      // pick DFS leaf as owner</div><div>       let diffOwner: HydrationDiffNode = diffRoot;</div><div>       while (diffOwner.children.length > 0) {</div><div>         diffOwner = diffOwner.children[0];</div><div class="diff-info">@@ -916,4 +919,7 @@ export {</div><div>   prepareToHydrateHostActivityInstance,</div><div>   prepareToHydrateHostSuspenseInstance,</div><div>   popHydrationState,</div><div class="diff-added">+  upgradeHydrationErrorsToRecoverable,</div><div class="diff-added">+  queueHydrationError,</div><div class="diff-added">+  emitPendingHydrationWarnings,</div><div> };</div><div>\ No newline at end of file</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    