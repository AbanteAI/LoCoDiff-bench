<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/tldraw/src/lib/defaultExternalContentHandlers.ts - GPT-5 (medium)</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/tldraw/src/lib/defaultExternalContentHandlers.ts</h1>
        <h2>Model: GPT-5 (medium)</h2>
        <p><a href="../../models/openai_gpt-5.html">All GPT-5 (medium) Cases</a> | <a href="../../cases.html">All Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> GPT-5 (medium)</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 60046</p>
                <p><strong>Native Prompt Tokens:</strong> 60071</p>
                <p><strong>Native Completion Tokens:</strong> 8317</p>
                <p><strong>Native Tokens Reasoning:</strong> 2432</p>
                <p><strong>Native Finish Reason:</strong> stop</p>
                <p><strong>Cost:</strong> $0.0079129375</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/openai_gpt-5/tldraw_packages_tldraw_src_lib_defaultExternalContentHandlers.ts/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/openai_gpt-5/tldraw_packages_tldraw_src_lib_defaultExternalContentHandlers.ts/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/openai_gpt-5/tldraw_packages_tldraw_src_lib_defaultExternalContentHandlers.ts/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div></div><div>index 419f10c61..b379161f9 100644</div><div class="diff-header">--- a/tldraw_packages_tldraw_src_lib_defaultExternalContentHandlers.ts_expectedoutput.txt (expected):tmp/tmpk3tt7nq6_expected.txt	</div><div class="diff-header">+++ b/tldraw_packages_tldraw_src_lib_defaultExternalContentHandlers.ts_extracted.txt (actual):tmp/tmpc214jgty_actual.txt	</div><div class="diff-info">@@ -343,9 +343,7 @@ export async function defaultHandleExternalFileContent(</div><div> 			})</div><div> </div><div> 			console.warn(</div><div class="diff-removed">-				`File size too big: ${(file.size / 1024).toFixed()}kb > ${(</div><div class="diff-removed">-					maxAssetSize / 1024</div><div class="diff-removed">-				).toFixed()}kb`</div><div class="diff-added">+				`File size too big: ${(file.size / 1024).toFixed()}kb > ${(maxAssetSize / 1024).toFixed()}kb`</div><div> 			)</div><div> 			continue</div><div> 		}</div><div class="diff-info">@@ -626,55 +624,6 @@ export async function defaultHandleExternalExcalidrawContent(</div><div> 	})</div><div> }</div><div> </div><div class="diff-removed">-/** @public */</div><div class="diff-removed">-export async function getMediaAssetInfoPartial(</div><div class="diff-removed">-	file: File,</div><div class="diff-removed">-	assetId: TLAssetId,</div><div class="diff-removed">-	isImageType: boolean,</div><div class="diff-removed">-	isVideoType: boolean,</div><div class="diff-removed">-	maxImageDimension?: number</div><div class="diff-removed">-) {</div><div class="diff-removed">-	let fileType = file.type</div><div class="diff-removed">-</div><div class="diff-removed">-	if (file.type === 'video/quicktime') {</div><div class="diff-removed">-		// hack to make .mov videos work</div><div class="diff-removed">-		fileType = 'video/mp4'</div><div class="diff-removed">-	}</div><div class="diff-removed">-</div><div class="diff-removed">-	const size = isImageType</div><div class="diff-removed">-		? await MediaHelpers.getImageSize(file)</div><div class="diff-removed">-		: await MediaHelpers.getVideoSize(file)</div><div class="diff-removed">-</div><div class="diff-removed">-	const isAnimated = (await MediaHelpers.isAnimated(file)) || isVideoType</div><div class="diff-removed">-</div><div class="diff-removed">-	const assetInfo = {</div><div class="diff-removed">-		id: assetId,</div><div class="diff-removed">-		type: isImageType ? 'image' : 'video',</div><div class="diff-removed">-		typeName: 'asset',</div><div class="diff-removed">-		props: {</div><div class="diff-removed">-			name: file.name,</div><div class="diff-removed">-			src: '',</div><div class="diff-removed">-			w: size.w,</div><div class="diff-removed">-			h: size.h,</div><div class="diff-removed">-			fileSize: file.size,</div><div class="diff-removed">-			mimeType: fileType,</div><div class="diff-removed">-			isAnimated,</div><div class="diff-removed">-		},</div><div class="diff-removed">-		meta: {},</div><div class="diff-removed">-	} as TLImageAsset | TLVideoAsset</div><div class="diff-removed">-</div><div class="diff-removed">-	if (maxImageDimension && isFinite(maxImageDimension)) {</div><div class="diff-removed">-		const size = { w: assetInfo.props.w, h: assetInfo.props.h }</div><div class="diff-removed">-		const resizedSize = containBoxSize(size, { w: maxImageDimension, h: maxImageDimension })</div><div class="diff-removed">-		if (size !== resizedSize && MediaHelpers.isStaticImageType(file.type)) {</div><div class="diff-removed">-			assetInfo.props.w = resizedSize.w</div><div class="diff-removed">-			assetInfo.props.h = resizedSize.h</div><div class="diff-removed">-		}</div><div class="diff-removed">-	}</div><div class="diff-removed">-</div><div class="diff-removed">-	return assetInfo</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div> /**</div><div>  * A helper function for an external content handler. It creates bookmarks,</div><div>  * images or video shapes corresponding to the type of assets provided.</div><div class="diff-info">@@ -836,4 +785,53 @@ export function createEmptyBookmarkShape(</div><div> 	})</div><div> </div><div> 	return editor.getShape(partial.id) as TLBookmarkShape</div><div class="diff-added">+}</div><div class="diff-added">+</div><div class="diff-added">+/** @public */</div><div class="diff-added">+export async function getMediaAssetInfoPartial(</div><div class="diff-added">+	file: File,</div><div class="diff-added">+	assetId: TLAssetId,</div><div class="diff-added">+	isImageType: boolean,</div><div class="diff-added">+	isVideoType: boolean,</div><div class="diff-added">+	maxImageDimension?: number</div><div class="diff-added">+) {</div><div class="diff-added">+	let fileType = file.type</div><div class="diff-added">+</div><div class="diff-added">+	if (file.type === 'video/quicktime') {</div><div class="diff-added">+		// hack to make .mov videos work</div><div class="diff-added">+		fileType = 'video/mp4'</div><div class="diff-added">+	}</div><div class="diff-added">+</div><div class="diff-added">+	const size = isImageType</div><div class="diff-added">+		? await MediaHelpers.getImageSize(file)</div><div class="diff-added">+		: await MediaHelpers.getVideoSize(file)</div><div class="diff-added">+</div><div class="diff-added">+	const isAnimated = (await MediaHelpers.isAnimated(file)) || isVideoType</div><div class="diff-added">+</div><div class="diff-added">+	const assetInfo = {</div><div class="diff-added">+		id: assetId,</div><div class="diff-added">+		type: isImageType ? 'image' : 'video',</div><div class="diff-added">+		typeName: 'asset',</div><div class="diff-added">+		props: {</div><div class="diff-added">+			name: file.name,</div><div class="diff-added">+			src: '',</div><div class="diff-added">+			w: size.w,</div><div class="diff-added">+			h: size.h,</div><div class="diff-added">+			fileSize: file.size,</div><div class="diff-added">+			mimeType: fileType,</div><div class="diff-added">+			isAnimated,</div><div class="diff-added">+		},</div><div class="diff-added">+		meta: {},</div><div class="diff-added">+	} as TLImageAsset | TLVideoAsset</div><div class="diff-added">+</div><div class="diff-added">+	if (maxImageDimension && isFinite(maxImageDimension)) {</div><div class="diff-added">+		const s = { w: assetInfo.props.w, h: assetInfo.props.h }</div><div class="diff-added">+		const resizedSize = containBoxSize(s, { w: maxImageDimension, h: maxImageDimension })</div><div class="diff-added">+		if (s !== resizedSize && MediaHelpers.isStaticImageType(file.type)) {</div><div class="diff-added">+			assetInfo.props.w = resizedSize.w</div><div class="diff-added">+			assetInfo.props.h = resizedSize.h</div><div class="diff-added">+		}</div><div class="diff-added">+	}</div><div class="diff-added">+</div><div class="diff-added">+	return assetInfo</div><div> }</div><div>\ No newline at end of file</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    