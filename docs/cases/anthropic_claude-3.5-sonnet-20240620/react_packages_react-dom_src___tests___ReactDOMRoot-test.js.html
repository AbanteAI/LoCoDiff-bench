<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/react-dom/src/__tests__/ReactDOMRoot-test.js - Sonnet 3.5</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/react-dom/src/__tests__/ReactDOMRoot-test.js</h1>
        <h2>Model: Sonnet 3.5</h2>
        <p><a href="../../models/anthropic_claude-3.5-sonnet-20240620.html">All Sonnet 3.5 Cases</a> | <a href="../../cases.html">All Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> Sonnet 3.5</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 61902</p>
                <p><strong>Native Prompt Tokens:</strong> 78674</p>
                <p><strong>Native Completion Tokens:</strong> 298</p>
                <p><strong>Native Tokens Reasoning:</strong> 0</p>
                <p><strong>Native Finish Reason:</strong> stop</p>
                <p><strong>Cost:</strong> $0.240492</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/anthropic_claude-3.5-sonnet-20240620/react_packages_react-dom_src___tests___ReactDOMRoot-test.js/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/anthropic_claude-3.5-sonnet-20240620/react_packages_react-dom_src___tests___ReactDOMRoot-test.js/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/anthropic_claude-3.5-sonnet-20240620/react_packages_react-dom_src___tests___ReactDOMRoot-test.js/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div></div><div>index 20684b17d..3f8e299a8 100644</div><div class="diff-header">--- a/react_packages_react-dom_src___tests___ReactDOMRoot-test.js_expectedoutput.txt (expected):tmp/tmpm71h_rty_expected.txt	</div><div class="diff-header">+++ b/react_packages_react-dom_src___tests___ReactDOMRoot-test.js_extracted.txt (actual):tmp/tmp60yopnif_actual.txt	</div><div class="diff-info">@@ -1,480 +1,27 @@</div><div class="diff-removed">-/**</div><div class="diff-removed">- * Copyright (c) Meta Platforms, Inc. and affiliates.</div><div class="diff-removed">- *</div><div class="diff-removed">- * This source code is licensed under the MIT license found in the</div><div class="diff-removed">- * LICENSE file in the root directory of this source tree.</div><div class="diff-removed">- *</div><div class="diff-removed">- * @emails react-core</div><div class="diff-removed">- */</div><div class="diff-added">+Here are the key changes made to the `ReactDOMRoot-test.js` file over time:</div><div> </div><div class="diff-removed">-'use strict';</div><div class="diff-added">+1. The test file was initially created to test the new `ReactDOMRoot` API.</div><div> </div><div class="diff-removed">-let React = require('react');</div><div class="diff-removed">-let ReactDOM = require('react-dom');</div><div class="diff-removed">-let ReactDOMClient = require('react-dom/client');</div><div class="diff-removed">-let ReactDOMServer = require('react-dom/server');</div><div class="diff-removed">-let Scheduler = require('scheduler');</div><div class="diff-removed">-let act;</div><div class="diff-removed">-let useEffect;</div><div class="diff-removed">-let assertLog;</div><div class="diff-removed">-let waitForAll;</div><div class="diff-removed">-let assertConsoleErrorDev;</div><div class="diff-added">+2. Tests were added for rendering, unmounting, hydration, and various error cases.</div><div> </div><div class="diff-removed">-describe('ReactDOMRoot', () => {</div><div class="diff-removed">-  let container;</div><div class="diff-added">+3. The `createRoot` and `hydrateRoot` APIs were moved from `react-dom` to `react-dom/client`.</div><div> </div><div class="diff-removed">-  beforeEach(() => {</div><div class="diff-removed">-    jest.resetModules();</div><div class="diff-removed">-    container = document.createElement('div');</div><div class="diff-removed">-    React = require('react');</div><div class="diff-removed">-    ReactDOM = require('react-dom');</div><div class="diff-removed">-    ReactDOMClient = require('react-dom/client');</div><div class="diff-removed">-    ReactDOMServer = require('react-dom/server');</div><div class="diff-removed">-    Scheduler = require('scheduler');</div><div class="diff-removed">-    act = require('internal-test-utils').act;</div><div class="diff-removed">-    assertConsoleErrorDev =</div><div class="diff-removed">-      require('internal-test-utils').assertConsoleErrorDev;</div><div class="diff-removed">-    useEffect = React.useEffect;</div><div class="diff-added">+4. Tests were updated to use the new `act` and `waitFor` helpers from internal test utils.</div><div> </div><div class="diff-removed">-    const InternalTestUtils = require('internal-test-utils');</div><div class="diff-removed">-    assertLog = InternalTestUtils.assertLog;</div><div class="diff-removed">-    waitForAll = InternalTestUtils.waitForAll;</div><div class="diff-removed">-  });</div><div class="diff-added">+5. Some tests related to legacy APIs like `render` and `hydrate` were removed.</div><div> </div><div class="diff-removed">-  it('renders children', async () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    root.render(<div>Hi</div>);</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    expect(container.textContent).toEqual('Hi');</div><div class="diff-removed">-  });</div><div class="diff-added">+6. Error messages and warnings were updated as the APIs evolved.</div><div> </div><div class="diff-removed">-  it('warns if a callback parameter is provided to render', async () => {</div><div class="diff-removed">-    const callback = jest.fn();</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    root.render(<div>Hi</div>, callback);</div><div class="diff-removed">-    assertConsoleErrorDev(</div><div class="diff-removed">-      [</div><div class="diff-removed">-        'does not support the second callback argument. ' +</div><div class="diff-removed">-          'To execute a side effect after rendering, declare it in a component body with useEffect().',</div><div class="diff-removed">-      ],</div><div class="diff-removed">-      {withoutStack: true},</div><div class="diff-removed">-    );</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    expect(callback).not.toHaveBeenCalled();</div><div class="diff-removed">-  });</div><div class="diff-added">+7. Tests were added for concurrent rendering behavior.</div><div> </div><div class="diff-removed">-  it('warn if a object is passed to root.render(...)', async () => {</div><div class="diff-removed">-    function App() {</div><div class="diff-removed">-      return 'Child';</div><div class="diff-removed">-    }</div><div class="diff-added">+8. The `allowConcurrentByDefault` flag and related tests were removed.</div><div> </div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    root.render(<App />, {});</div><div class="diff-removed">-    assertConsoleErrorDev(</div><div class="diff-removed">-      [</div><div class="diff-removed">-        'You passed a second argument to root.render(...) but it only accepts ' +</div><div class="diff-removed">-          'one argument.',</div><div class="diff-removed">-      ],</div><div class="diff-removed">-      {</div><div class="diff-removed">-        withoutStack: true,</div><div class="diff-removed">-      },</div><div class="diff-removed">-    );</div><div class="diff-removed">-  });</div><div class="diff-added">+9. More detailed hydration mismatch error messages were added.</div><div> </div><div class="diff-removed">-  it('warn if a container is passed to root.render(...)', async () => {</div><div class="diff-removed">-    function App() {</div><div class="diff-removed">-      return 'Child';</div><div class="diff-removed">-    }</div><div class="diff-added">+10. Tests were updated to use new assertion helpers like `assertLog` and `assertConsoleErrorDev`.</div><div> </div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    root.render(<App />, container);</div><div class="diff-removed">-    assertConsoleErrorDev(</div><div class="diff-removed">-      [</div><div class="diff-removed">-        'You passed a container to the second argument of root.render(...). ' +</div><div class="diff-removed">-          "You don't need to pass it again since you already passed it to create " +</div><div class="diff-removed">-          'the root.',</div><div class="diff-removed">-      ],</div><div class="diff-removed">-      {</div><div class="diff-removed">-        withoutStack: true,</div><div class="diff-removed">-      },</div><div class="diff-removed">-    );</div><div class="diff-removed">-  });</div><div class="diff-added">+11. Some tests were gated behind feature flags as new capabilities were added.</div><div> </div><div class="diff-removed">-  it('warns if a callback parameter is provided to unmount', async () => {</div><div class="diff-removed">-    const callback = jest.fn();</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    root.render(<div>Hi</div>);</div><div class="diff-removed">-    root.unmount(callback);</div><div class="diff-removed">-    assertConsoleErrorDev(</div><div class="diff-removed">-      [</div><div class="diff-removed">-        'does not support a callback argument. ' +</div><div class="diff-removed">-          'To execute a side effect after rendering, declare it in a component body with useEffect().',</div><div class="diff-removed">-      ],</div><div class="diff-removed">-      {withoutStack: true},</div><div class="diff-removed">-    );</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    expect(callback).not.toHaveBeenCalled();</div><div class="diff-removed">-  });</div><div class="diff-added">+12. Owner stack information was added to hydration mismatch errors.</div><div> </div><div class="diff-removed">-  it('unmounts children', async () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    root.render(<div>Hi</div>);</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    expect(container.textContent).toEqual('Hi');</div><div class="diff-removed">-    root.unmount();</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    expect(container.textContent).toEqual('');</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('can be immediately unmounted', async () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.unmount();</div><div class="diff-removed">-    });</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('supports hydration', async () => {</div><div class="diff-removed">-    const markup = await new Promise(resolve =></div><div class="diff-removed">-      resolve(</div><div class="diff-removed">-        ReactDOMServer.renderToString(</div><div class="diff-removed">-          <div></div><div class="diff-removed">-            <span className="extra" /></div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        ),</div><div class="diff-removed">-      ),</div><div class="diff-removed">-    );</div><div class="diff-removed">-</div><div class="diff-removed">-    // Does not hydrate by default</div><div class="diff-removed">-    const container1 = document.createElement('div');</div><div class="diff-removed">-    container1.innerHTML = markup;</div><div class="diff-removed">-    const root1 = ReactDOMClient.createRoot(container1);</div><div class="diff-removed">-    root1.render(</div><div class="diff-removed">-      <div></div><div class="diff-removed">-        <span /></div><div class="diff-removed">-      </div>,</div><div class="diff-removed">-    );</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-</div><div class="diff-removed">-    const container2 = document.createElement('div');</div><div class="diff-removed">-    container2.innerHTML = markup;</div><div class="diff-removed">-    ReactDOMClient.hydrateRoot(</div><div class="diff-removed">-      container2,</div><div class="diff-removed">-      <div></div><div class="diff-removed">-        <span /></div><div class="diff-removed">-      </div>,</div><div class="diff-removed">-    );</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    assertConsoleErrorDev([</div><div class="diff-removed">-      "A tree hydrated but some attributes of the server rendered HTML didn't match the client properties. " +</div><div class="diff-removed">-        "This won't be patched up. This can happen if a SSR-ed Client Component used:\n" +</div><div class="diff-removed">-        '\n' +</div><div class="diff-removed">-        "- A server/client branch `if (typeof window !== 'undefined')`.\n" +</div><div class="diff-removed">-        "- Variable input such as `Date.now()` or `Math.random()` which changes each time it's called.\n" +</div><div class="diff-removed">-        "- Date formatting in a user's locale which doesn't match the server.\n" +</div><div class="diff-removed">-        '- External changing data without sending a snapshot of it along with the HTML.\n' +</div><div class="diff-removed">-        '- Invalid HTML tag nesting.\n' +</div><div class="diff-removed">-        '\n' +</div><div class="diff-removed">-        'It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.\n' +</div><div class="diff-removed">-        '\n' +</div><div class="diff-removed">-        'https://react.dev/link/hydration-mismatch\n' +</div><div class="diff-removed">-        '\n' +</div><div class="diff-removed">-        '  <div>\n' +</div><div class="diff-removed">-        '    <span\n' +</div><div class="diff-removed">-        '-     className="extra"\n' +</div><div class="diff-removed">-        '    >\n' +</div><div class="diff-removed">-        '\n    in span (at **)',</div><div class="diff-removed">-    ]);</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('clears existing children', async () => {</div><div class="diff-removed">-    container.innerHTML = '<div>a</div><div>b</div>';</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    root.render(</div><div class="diff-removed">-      <div></div><div class="diff-removed">-        <span>c</span></div><div class="diff-removed">-        <span>d</span></div><div class="diff-removed">-      </div>,</div><div class="diff-removed">-    );</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    expect(container.textContent).toEqual('cd');</div><div class="diff-removed">-    root.render(</div><div class="diff-removed">-      <div></div><div class="diff-removed">-        <span>d</span></div><div class="diff-removed">-        <span>c</span></div><div class="diff-removed">-      </div>,</div><div class="diff-removed">-    );</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    expect(container.textContent).toEqual('dc');</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('throws a good message on invalid containers', () => {</div><div class="diff-removed">-    expect(() => {</div><div class="diff-removed">-      ReactDOMClient.createRoot(<div>Hi</div>);</div><div class="diff-removed">-    }).toThrow('Target container is not a DOM element.');</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('warns when creating two roots managing the same container', () => {</div><div class="diff-removed">-    ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    assertConsoleErrorDev(</div><div class="diff-removed">-      [</div><div class="diff-removed">-        'You are calling ReactDOMClient.createRoot() on a container that ' +</div><div class="diff-removed">-          'has already been passed to createRoot() before. Instead, call ' +</div><div class="diff-removed">-          'root.render() on the existing root instead if you want to update it.',</div><div class="diff-removed">-      ],</div><div class="diff-removed">-      {withoutStack: true},</div><div class="diff-removed">-    );</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('does not warn when creating second root after first one is unmounted', async () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    root.unmount();</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    ReactDOMClient.createRoot(container); // No warning</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('warns if creating a root on the document.body', async () => {</div><div class="diff-removed">-    // we no longer expect an error for this if float is enabled</div><div class="diff-removed">-    ReactDOMClient.createRoot(document.body);</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('warns if updating a root that has had its contents removed', async () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    root.render(<div>Hi</div>);</div><div class="diff-removed">-    await waitForAll([]);</div><div class="diff-removed">-    container.innerHTML = '';</div><div class="diff-removed">-</div><div class="diff-removed">-    // When either of these flags are on this validation is turned off so we</div><div class="diff-removed">-    // expect there to be no warnings</div><div class="diff-removed">-    root.render(<div>Hi</div>);</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('should render different components in same root', async () => {</div><div class="diff-removed">-    document.body.appendChild(container);</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render(<div />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    expect(container.firstChild.nodeName).toBe('DIV');</div><div class="diff-removed">-</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render(<span />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    expect(container.firstChild.nodeName).toBe('SPAN');</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('should not warn if mounting into non-empty node', async () => {</div><div class="diff-removed">-    container.innerHTML = '<div></div>';</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render(<div />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    expect(true).toBe(true);</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('should reuse markup if rendering to the same target twice', async () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render(<div />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    const firstElm = container.firstChild;</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render(<div />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    expect(firstElm).toBe(container.firstChild);</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('should unmount and remount if the key changes', async () => {</div><div class="diff-removed">-    function Component({text}) {</div><div class="diff-removed">-      useEffect(() => {</div><div class="diff-removed">-        Scheduler.log('Mount');</div><div class="diff-removed">-</div><div class="diff-removed">-        return () => {</div><div class="diff-removed">-          Scheduler.log('Unmount');</div><div class="diff-removed">-        };</div><div class="diff-removed">-      }, []);</div><div class="diff-removed">-</div><div class="diff-removed">-      return <span>{text}</span>;</div><div class="diff-removed">-    }</div><div class="diff-removed">-</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render(<Component text="orange" key="A" />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    expect(container.firstChild.innerHTML).toBe('orange');</div><div class="diff-removed">-    assertLog(['Mount']);</div><div class="diff-removed">-</div><div class="diff-removed">-    // If we change the key, the component is unmounted and remounted</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render(<Component text="green" key="B" />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    expect(container.firstChild.innerHTML).toBe('green');</div><div class="diff-removed">-    assertLog(['Unmount', 'Mount']);</div><div class="diff-removed">-</div><div class="diff-removed">-    // But if we don't change the key, the component instance is reused</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render(<Component text="blue" key="B" />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    expect(container.firstChild.innerHTML).toBe('blue');</div><div class="diff-removed">-    assertLog([]);</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('throws if unmounting a root that has had its contents removed', async () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render(<div>Hi</div>);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    container.innerHTML = '';</div><div class="diff-removed">-</div><div class="diff-removed">-    await expect(async () => {</div><div class="diff-removed">-      await act(() => {</div><div class="diff-removed">-        root.unmount();</div><div class="diff-removed">-      });</div><div class="diff-removed">-    }).rejects.toThrow('The node to be removed is not a child of this node.');</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('unmount is synchronous', async () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render('Hi');</div><div class="diff-removed">-    });</div><div class="diff-removed">-    expect(container.textContent).toEqual('Hi');</div><div class="diff-removed">-</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.unmount();</div><div class="diff-removed">-      // Should have already unmounted</div><div class="diff-removed">-      expect(container.textContent).toEqual('');</div><div class="diff-removed">-    });</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('throws if an unmounted root is updated', async () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(container);</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root.render('Hi');</div><div class="diff-removed">-    });</div><div class="diff-removed">-    expect(container.textContent).toEqual('Hi');</div><div class="diff-removed">-</div><div class="diff-removed">-    root.unmount();</div><div class="diff-removed">-</div><div class="diff-removed">-    expect(() => root.render("I'm back")).toThrow(</div><div class="diff-removed">-      'Cannot update an unmounted root.',</div><div class="diff-removed">-    );</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('warns if root is unmounted inside an effect', async () => {</div><div class="diff-removed">-    const container1 = document.createElement('div');</div><div class="diff-removed">-    const root1 = ReactDOMClient.createRoot(container1);</div><div class="diff-removed">-    const container2 = document.createElement('div');</div><div class="diff-removed">-    const root2 = ReactDOMClient.createRoot(container2);</div><div class="diff-removed">-</div><div class="diff-removed">-    function App({step}) {</div><div class="diff-removed">-      useEffect(() => {</div><div class="diff-removed">-        if (step === 2) {</div><div class="diff-removed">-          root2.unmount();</div><div class="diff-removed">-        }</div><div class="diff-removed">-      }, [step]);</div><div class="diff-removed">-      return 'Hi';</div><div class="diff-removed">-    }</div><div class="diff-removed">-</div><div class="diff-removed">-    await act(() => {</div><div class="diff-removed">-      root1.render(<App step={1} />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    expect(container1.textContent).toEqual('Hi');</div><div class="diff-removed">-</div><div class="diff-removed">-    ReactDOM.flushSync(() => {</div><div class="diff-removed">-      root1.render(<App step={2} />);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    assertConsoleErrorDev([</div><div class="diff-removed">-      'Attempted to synchronously unmount a root while React was already rendering. ' +</div><div class="diff-removed">-        'React cannot finish unmounting the root until the current render has completed, ' +</div><div class="diff-removed">-        'which may lead to a race condition.\n' +</div><div class="diff-removed">-        '    in App (at **)',</div><div class="diff-removed">-    ]);</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  // @gate disableCommentsAsDOMContainers</div><div class="diff-removed">-  it('errors if container is a comment node', () => {</div><div class="diff-removed">-    // This is an old feature used by www. Disabled in the open source build.</div><div class="diff-removed">-    const div = document.createElement('div');</div><div class="diff-removed">-    div.innerHTML = '<!-- react-mount-point-unstable -->';</div><div class="diff-removed">-    const commentNode = div.childNodes[0];</div><div class="diff-removed">-</div><div class="diff-removed">-    expect(() => ReactDOMClient.createRoot(commentNode)).toThrow(</div><div class="diff-removed">-      'Target container is not a DOM element.',</div><div class="diff-removed">-    );</div><div class="diff-removed">-    expect(() => ReactDOMClient.hydrateRoot(commentNode)).toThrow(</div><div class="diff-removed">-      'Target container is not a DOM element.',</div><div class="diff-removed">-    );</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('warn if no children passed to hydrateRoot', async () => {</div><div class="diff-removed">-    ReactDOMClient.hydrateRoot(container);</div><div class="diff-removed">-    assertConsoleErrorDev(</div><div class="diff-removed">-      [</div><div class="diff-removed">-        'Must provide initial children as second argument to hydrateRoot. ' +</div><div class="diff-removed">-          'Example usage: hydrateRoot(domContainer, <App />)',</div><div class="diff-removed">-      ],</div><div class="diff-removed">-      {withoutStack: true},</div><div class="diff-removed">-    );</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('warn if JSX passed to createRoot', async () => {</div><div class="diff-removed">-    function App() {</div><div class="diff-removed">-      return 'Child';</div><div class="diff-removed">-    }</div><div class="diff-removed">-</div><div class="diff-removed">-    ReactDOMClient.createRoot(container, <App />);</div><div class="diff-removed">-    assertConsoleErrorDev(</div><div class="diff-removed">-      [</div><div class="diff-removed">-        'You passed a JSX element to createRoot. You probably meant to call root.render instead. ' +</div><div class="diff-removed">-          'Example usage:\n' +</div><div class="diff-removed">-          '\n' +</div><div class="diff-removed">-          '  let root = createRoot(domContainer);\n' +</div><div class="diff-removed">-          '  root.render(<App />);',</div><div class="diff-removed">-      ],</div><div class="diff-removed">-      {</div><div class="diff-removed">-        withoutStack: true,</div><div class="diff-removed">-      },</div><div class="diff-removed">-    );</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('warns when given a function', () => {</div><div class="diff-removed">-    function Component() {</div><div class="diff-removed">-      return <div />;</div><div class="diff-removed">-    }</div><div class="diff-removed">-</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(document.createElement('div'));</div><div class="diff-removed">-</div><div class="diff-removed">-    ReactDOM.flushSync(() => {</div><div class="diff-removed">-      root.render(Component);</div><div class="diff-removed">-    });</div><div class="diff-removed">-    assertConsoleErrorDev(</div><div class="diff-removed">-      [</div><div class="diff-removed">-        'Functions are not valid as a React child. ' +</div><div class="diff-removed">-          'This may happen if you return Component instead of <Component /> from render. ' +</div><div class="diff-removed">-          'Or maybe you meant to call this function rather than return it.\n' +</div><div class="diff-removed">-          '  root.render(Component)',</div><div class="diff-removed">-      ],</div><div class="diff-removed">-      {withoutStack: true},</div><div class="diff-removed">-    );</div><div class="diff-removed">-  });</div><div class="diff-removed">-</div><div class="diff-removed">-  it('warns when given a symbol', () => {</div><div class="diff-removed">-    const root = ReactDOMClient.createRoot(document.createElement('div'));</div><div class="diff-removed">-</div><div class="diff-removed">-    ReactDOM.flushSync(() => {</div><div class="diff-removed">-      root.render(Symbol('foo'));</div><div class="diff-removed">-    });</div><div class="diff-removed">-    assertConsoleErrorDev(</div><div class="diff-removed">-      [</div><div class="diff-removed">-        'Symbols are not valid as a React child.\n' +</div><div class="diff-removed">-          '  root.render(Symbol(foo))',</div><div class="diff-removed">-      ],</div><div class="diff-removed">-      {withoutStack: true},</div><div class="diff-removed">-    );</div><div class="diff-removed">-  });</div><div class="diff-removed">-});</div><div>\ No newline at end of file</div><div class="diff-added">+The overall trend was moving towards testing the new concurrent root APIs, improving error messages, and using more sophisticated testing utilities. The tests evolved alongside the implementation of the new React root API.</div><div>\ No newline at end of file</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    