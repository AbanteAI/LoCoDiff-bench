<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/react-reconciler/src/ReactFiberHydrationContext.js - Sonnet 3.6</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/react-reconciler/src/ReactFiberHydrationContext.js</h1>
        <p><a href="../../models/anthropic_claude-3.5-sonnet.html">‚Üê Back to Sonnet 3.6 Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> Sonnet 3.6</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 82014</p>
                <p><strong>Output Tokens:</strong> N/A</p>
                <p><strong>Native Prompt Tokens:</strong> 102099</p>
                <p><strong>Native Completion Tokens:</strong> 8193</p>
                <p><strong>Native Tokens Reasoning:</strong> 0</p>
                <p><strong>Native Finish Reason:</strong> length</p>
                <p><strong>Cost:</strong> $0.429192</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/anthropic_claude-3.5-sonnet/react_packages_react-reconciler_src_ReactFiberHydrationContext.js/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/anthropic_claude-3.5-sonnet/react_packages_react-reconciler_src_ReactFiberHydrationContext.js/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/anthropic_claude-3.5-sonnet/react_packages_react-reconciler_src_ReactFiberHydrationContext.js/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div></div><div>index f9932b8c..be7b535b 100644</div><div class="diff-header">--- a/react_packages_react-reconciler_src_ReactFiberHydrationContext.js_expectedoutput.txt (expected):tmp/tmprg1e13bq_expected.txt	</div><div class="diff-header">+++ b/react_packages_react-reconciler_src_ReactFiberHydrationContext.js_extracted.txt (actual):tmp/tmph_fwh4cy_actual.txt	</div><div class="diff-info">@@ -14,7 +14,7 @@ import type {</div><div>   HydratableInstance,</div><div>   ActivityInstance,</div><div>   SuspenseInstance,</div><div class="diff-removed">-  Container,</div><div class="diff-added">+  Container, </div><div>   HostContext,</div><div> } from './ReactFiberConfig';</div><div> import type {ActivityState} from './ReactFiberActivityComponent';</div><div class="diff-info">@@ -27,7 +27,7 @@ import {</div><div>   HostComponent,</div><div>   HostSingleton,</div><div>   HostRoot,</div><div class="diff-removed">-  SuspenseComponent,</div><div class="diff-added">+  SuspenseComponent, </div><div>   ActivityComponent,</div><div> } from './ReactWorkTags';</div><div> import {favorSafetyOverHydrationPerf} from 'shared/ReactFeatureFlags';</div><div class="diff-info">@@ -43,7 +43,7 @@ import {</div><div>   getNextHydratableSiblingAfterSingleton,</div><div>   getFirstHydratableChild,</div><div>   getFirstHydratableChildWithinContainer,</div><div class="diff-removed">-  getFirstHydratableChildWithinActivityInstance,</div><div class="diff-added">+  getFirstHydratableChildWithinActivityInstance, </div><div>   getFirstHydratableChildWithinSuspenseInstance,</div><div>   getFirstHydratableChildWithinSingleton,</div><div>   hydrateInstance,</div><div class="diff-info">@@ -58,7 +58,7 @@ import {</div><div>   shouldDeleteUnhydratedTailInstances,</div><div>   resolveSingletonInstance,</div><div>   canHydrateInstance,</div><div class="diff-removed">-  canHydrateTextInstance,</div><div class="diff-added">+  canHydrateTextInstance, </div><div>   canHydrateActivityInstance,</div><div>   canHydrateSuspenseInstance,</div><div>   canHydrateFormStateMarker,</div><div class="diff-info">@@ -83,7 +83,7 @@ let nextHydratableInstance: null | HydratableInstance = null;</div><div> let isHydrating: boolean = false;</div><div> </div><div> // This flag allows for warning supression when we expect there to be mismatches</div><div class="diff-removed">-// due to earlier mismatches or a suspended fiber.</div><div class="diff-added">+// due to earlier mismatches or a suspended fiber.  </div><div> let didSuspendOrErrorDEV: boolean = false;</div><div> </div><div> // Hydration differences found that haven't yet been logged.</div><div class="diff-info">@@ -114,7 +114,7 @@ function buildHydrationDiffNode(</div><div>         'Saw multiple hydration diff roots in a pass. This is a bug in React.',</div><div>       );</div><div>     } else if (hydrationDiffRootDEV.distanceFromLeaf > distanceFromLeaf) {</div><div class="diff-removed">-      hydrationDiffRootDEV.distanceFromLeaf = distanceFromLeaf;</div><div class="diff-added">+      hydrationDiffRootDEV.distanceFromLeaf = distanceFromLeaf;  </div><div>     }</div><div>     return hydrationDiffRootDEV;</div><div>   }</div><div class="diff-info">@@ -166,7 +166,7 @@ function enterHydrationState(fiber: Fiber): boolean {</div><div>   }</div><div> </div><div>   const parentInstance: Container = fiber.stateNode.containerInfo;</div><div class="diff-removed">-  nextHydratableInstance =</div><div class="diff-added">+  nextHydratableInstance = </div><div>     getFirstHydratableChildWithinContainer(parentInstance);</div><div>   hydrationParentFiber = fiber;</div><div>   isHydrating = true;</div><div class="diff-info">@@ -207,8 +207,7 @@ function reenterHydrationStateFromDehydratedSuspenseInstance(</div><div>   if (!supportsHydration) {</div><div>     return false;</div><div>   }</div><div class="diff-removed">-  nextHydratableInstance =</div><div class="diff-removed">-    getFirstHydratableChildWithinSuspenseInstance(suspenseInstance);</div><div class="diff-added">+  nextHydratableInstance = getNextHydratableSibling(suspenseInstance);</div><div>   hydrationParentFiber = fiber;</div><div>   isHydrating = true;</div><div>   hydrationErrors = null;</div><div class="diff-info">@@ -227,7 +226,7 @@ function warnNonHydratedInstance(</div><div> ) {</div><div>   if (__DEV__) {</div><div>     if (didSuspendOrErrorDEV) {</div><div class="diff-removed">-      // Inside a boundary that already suspended. We're currently rendering the</div><div class="diff-added">+      // Inside a boundary that already suspended. We're currently rendering the </div><div>       // siblings of a suspended node. The mismatch may be due to the missing</div><div>       // data, so it's probably a false positive.</div><div>       return;</div><div class="diff-info">@@ -238,7 +237,7 @@ function warnNonHydratedInstance(</div><div>     // We use null as a signal that there was no node to match.</div><div>     diffNode.serverProps = null;</div><div>     if (rejectedCandidate !== null) {</div><div class="diff-removed">-      const description =</div><div class="diff-added">+      const description = </div><div>         describeHydratableInstanceForDevWarnings(rejectedCandidate);</div><div>       diffNode.serverTail.push(description);</div><div>     }</div><div class="diff-info">@@ -246,7 +245,7 @@ function warnNonHydratedInstance(</div><div> }</div><div> </div><div> function tryHydrateInstance(</div><div class="diff-removed">-  fiber: Fiber,</div><div class="diff-added">+  fiber: Fiber, </div><div>   nextInstance: any,</div><div>   hostContext: HostContext,</div><div> ) {</div><div class="diff-info">@@ -305,7 +304,7 @@ function tryHydrateActivity(</div><div>   fiber: Fiber,</div><div>   nextInstance: any,</div><div> ): null | ActivityInstance {</div><div class="diff-removed">-  // fiber is a ActivityComponent Fiber</div><div class="diff-added">+  // fiber is a ActivityComponent Fiber </div><div>   const activityInstance = canHydrateActivityInstance(</div><div>     nextInstance,</div><div>     rootOrSingletonContext,</div><div class="diff-info">@@ -336,12 +335,12 @@ function tryHydrateActivity(</div><div> </div><div> function tryHydrateSuspense(</div><div>   fiber: Fiber,</div><div class="diff-removed">-  nextInstance: any,</div><div class="diff-added">+  nextInstance: any,  </div><div> ): null | SuspenseInstance {</div><div>   // fiber is a SuspenseComponent Fiber</div><div>   const suspenseInstance = canHydrateSuspenseInstance(</div><div>     nextInstance,</div><div class="diff-removed">-    rootOrSingletonContext,</div><div class="diff-added">+    rootOrSingletonContext,  </div><div>   );</div><div>   if (suspenseInstance !== null) {</div><div>     const suspenseState: SuspenseState = {</div><div class="diff-info">@@ -353,9 +352,9 @@ function tryHydrateSuspense(</div><div>     fiber.memoizedState = suspenseState;</div><div>     // Store the dehydrated fragment as a child fiber.</div><div>     // This simplifies the code for getHostSibling and deleting nodes,</div><div class="diff-removed">-    // since it doesn't have to consider all Suspense boundaries and</div><div class="diff-added">+    // since it doesn't have to consider all Suspense boundaries and </div><div>     // check if they're dehydrated ones or not.</div><div class="diff-removed">-    const dehydratedFragment =</div><div class="diff-added">+    const dehydratedFragment = </div><div>       createFiberFromDehydratedFragment(suspenseInstance);</div><div>     dehydratedFragment.return = fiber;</div><div>     fiber.child = dehydratedFragment;</div><div class="diff-info">@@ -412,7 +411,7 @@ function claimHydratableSingleton(fiber: Fiber): void {</div><div>     const instance = (fiber.stateNode = resolveSingletonInstance(</div><div>       fiber.type,</div><div>       fiber.pendingProps,</div><div class="diff-removed">-      currentRootContainer,</div><div class="diff-added">+      currentRootContainer, </div><div>       currentHostContext,</div><div>       false,</div><div>     ));</div><div class="diff-info">@@ -423,7 +422,7 @@ function claimHydratableSingleton(fiber: Fiber): void {</div><div>           instance,</div><div>           fiber.type,</div><div>           fiber.pendingProps,</div><div class="diff-removed">-          currentHostContext,</div><div class="diff-added">+          currentHostContext,  </div><div>         );</div><div>         if (differences !== null) {</div><div>           const diffNode = buildHydrationDiffNode(fiber, 0);</div><div class="diff-info">@@ -437,7 +436,7 @@ function claimHydratableSingleton(fiber: Fiber): void {</div><div>     nextHydratableInstance = getFirstHydratableChildWithinSingleton(</div><div>       fiber.type,</div><div>       instance,</div><div class="diff-removed">-      nextHydratableInstance,</div><div class="diff-added">+      nextHydratableInstance,  </div><div>     );</div><div>   }</div><div> }</div><div class="diff-info">@@ -447,23 +446,24 @@ function tryToClaimNextHydratableInstance(fiber: Fiber): void {</div><div>     return;</div><div>   }</div><div> </div><div class="diff-removed">-  // Validate that this is ok to render here before any mismatches.</div><div>   const currentHostContext = getHostContext();</div><div class="diff-added">+</div><div class="diff-added">+  // Validate that this is ok to render here before any mismatches.</div><div>   const shouldKeepWarning = validateHydratableInstance(</div><div class="diff-removed">-    fiber.type,</div><div class="diff-added">+    fiber.type, </div><div>     fiber.pendingProps,</div><div>     currentHostContext,</div><div>   );</div><div> </div><div>   const nextInstance = nextHydratableInstance;</div><div>   if (</div><div class="diff-removed">-    !nextInstance ||</div><div class="diff-added">+    !nextInstance || </div><div>     !tryHydrateInstance(fiber, nextInstance, currentHostContext)</div><div>   ) {</div><div>     if (shouldKeepWarning) {</div><div>       warnNonHydratedInstance(fiber, nextInstance);</div><div>     }</div><div class="diff-removed">-    throwOnHydrationMismatch(fiber);</div><div class="diff-added">+    throwOnHydrationMismatch(fiber);  </div><div>   }</div><div> }</div><div> </div><div class="diff-info">@@ -471,6 +471,7 @@ function tryToClaimNextHydratableTextInstance(fiber: Fiber): void {</div><div>   if (!isHydrating) {</div><div>     return;</div><div>   }</div><div class="diff-added">+</div><div>   const text = fiber.pendingProps;</div><div> </div><div>   let shouldKeepWarning = true;</div><div class="diff-info">@@ -483,13 +484,13 @@ function tryToClaimNextHydratableTextInstance(fiber: Fiber): void {</div><div>     if (shouldKeepWarning) {</div><div>       warnNonHydratedInstance(fiber, nextInstance);</div><div>     }</div><div class="diff-removed">-    throwOnHydrationMismatch(fiber);</div><div class="diff-added">+    throwOnHydrationMismatch(fiber, true);</div><div>   }</div><div> }</div><div> </div><div> function claimNextHydratableActivityInstance(fiber: Fiber): ActivityInstance {</div><div>   const nextInstance = nextHydratableInstance;</div><div class="diff-removed">-  const activityInstance = nextInstance</div><div class="diff-added">+  const activityInstance = nextInstance </div><div>     ? tryHydrateActivity(fiber, nextInstance)</div><div>     : null;</div><div>   if (activityInstance === null) {</div><div class="diff-info">@@ -502,11 +503,11 @@ function claimNextHydratableActivityInstance(fiber: Fiber): ActivityInstance {</div><div> function claimNextHydratableSuspenseInstance(fiber: Fiber): SuspenseInstance {</div><div>   const nextInstance = nextHydratableInstance;</div><div>   const suspenseInstance = nextInstance</div><div class="diff-removed">-    ? tryHydrateSuspense(fiber, nextInstance)</div><div class="diff-added">+    ? tryHydrateSuspense(fiber, nextInstance)  </div><div>     : null;</div><div>   if (suspenseInstance === null) {</div><div>     warnNonHydratedInstance(fiber, nextInstance);</div><div class="diff-removed">-    throw throwOnHydrationMismatch(fiber);</div><div class="diff-added">+    throw throwOnHydrationMismatch(fiber);  </div><div>   }</div><div>   return suspenseInstance;</div><div> }</div><div class="diff-info">@@ -524,10 +525,10 @@ export function tryToClaimNextHydratableFormMarkerInstance(</div><div>     );</div><div>     if (markerInstance) {</div><div>       // Found the marker instance.</div><div class="diff-removed">-      nextHydratableInstance = getNextHydratableSibling(markerInstance);</div><div class="diff-added">+      nextHydratableInstance = getNextHydratableSibling(markerInstance); </div><div>       // Return true if this marker instance should use the state passed</div><div>       // to hydrateRoot.</div><div class="diff-removed">-      // TODO: As an optimization, Fizz should only emit these markers if form</div><div class="diff-added">+      // TODO: As an optimization, Fizz should only emit these markers if form </div><div>       // state is passed at the root.</div><div>       return isFormStateMarkerMatching(markerInstance);</div><div>     }</div><div class="diff-info">@@ -545,12 +546,12 @@ function prepareToHydrateHostInstance(</div><div> ): void {</div><div>   if (!supportsHydration) {</div><div>     throw new Error(</div><div class="diff-removed">-      'Expected prepareToHydrateHostInstance() to never be called. ' +</div><div class="diff-added">+      'Expected prepareToHydrateHostInstance() to never be called. ' + </div><div>         'This error is likely caused by a bug in React. Please file an issue.',</div><div>     );</div><div>   }</div><div> </div><div class="diff-removed">-  const instance: Instance = fiber.stateNode;</div><div class="diff-added">+  const instance: Instance = fiber.stateNode;  </div><div>   const didHydrate = hydrateInstance(</div><div>     instance,</div><div>     fiber.type,</div><div class="diff-info">@@ -574,6 +575,7 @@ function prepareToHydrateHostTextInstance(fiber: Fiber): void {</div><div>   const textInstance: TextInstance = fiber.stateNode;</div><div>   const textContent: string = fiber.memoizedProps;</div><div>   const shouldWarnIfMismatchDev = !didSuspendOrErrorDEV;</div><div class="diff-added">+</div><div>   let parentProps = null;</div><div>   // We assume that prepareToHydrateHostTextInstance is called in a context where the</div><div>   // hydration parent is the parent host component of this host text.</div><div class="diff-info">@@ -604,7 +606,7 @@ function prepareToHydrateHostTextInstance(fiber: Fiber): void {</div><div>             const difference = diffHydratedTextForDevWarnings(</div><div>               textInstance,</div><div>               textContent,</div><div class="diff-removed">-              parentProps,</div><div class="diff-added">+              parentProps,  </div><div>             );</div><div>             if (difference !== null) {</div><div>               const diffNode = buildHydrationDiffNode(fiber, 0);</div><div class="diff-info">@@ -633,15 +635,15 @@ function prepareToHydrateHostActivityInstance(fiber: Fiber): void {</div><div>   if (!supportsHydration) {</div><div>     throw new Error(</div><div>       'Expected prepareToHydrateHostActivityInstance() to never be called. ' +</div><div class="diff-removed">-        'This error is likely caused by a bug in React. Please file an issue.',</div><div class="diff-added">+        'This error is likely caused by a bug in React. Please file an issue.',  </div><div>     );</div><div>   }</div><div>   const activityState: null | ActivityState = fiber.memoizedState;</div><div>   const activityInstance: null | ActivityInstance =</div><div>     activityState !== null ? activityState.dehydrated : null;</div><div class="diff-removed">-</div><div class="diff-added">+    </div><div>   if (!activityInstance) {</div><div class="diff-removed">-    throw new Error(</div><div class="diff-added">+    throw new Error( </div><div>       'Expected to have a hydrated activity instance. ' +</div><div>         'This error is likely caused by a bug in React. Please file an issue.',</div><div>     );</div><div class="diff-info">@@ -659,12 +661,12 @@ function prepareToHydrateHostSuspenseInstance(fiber: Fiber): void {</div><div>   }</div><div> </div><div>   const suspenseState: null | SuspenseState = fiber.memoizedState;</div><div class="diff-removed">-  const suspenseInstance: null | SuspenseInstance =</div><div class="diff-added">+  const suspenseInstance: null | SuspenseInstance = </div><div>     suspenseState !== null ? suspenseState.dehydrated : null;</div><div> </div><div>   if (!suspenseInstance) {</div><div>     throw new Error(</div><div class="diff-removed">-      'Expected to have a hydrated suspense instance. ' +</div><div class="diff-added">+      'Expected to have a hydrated suspense instance. ' + </div><div>         'This error is likely caused by a bug in React. Please file an issue.',</div><div>     );</div><div>   }</div><div class="diff-info">@@ -682,7 +684,7 @@ function skipPastDehydratedActivityInstance(</div><div>   if (!activityInstance) {</div><div>     throw new Error(</div><div>       'Expected to have a hydrated suspense instance. ' +</div><div class="diff-removed">-        'This error is likely caused by a bug in React. Please file an issue.',</div><div class="diff-added">+        'This error is likely caused by a bug in React. Please file an issue.',  </div><div>     );</div><div>   }</div><div> </div><div class="diff-info">@@ -690,16 +692,10 @@ function skipPastDehydratedActivityInstance(</div><div> }</div><div> </div><div> function skipPastDehydratedSuspenseInstance(</div><div class="diff-removed">-  fiber: Fiber,</div><div class="diff-added">+  fiber: Fiber,  </div><div> ): null | HydratableInstance {</div><div class="diff-removed">-  if (!supportsHydration) {</div><div class="diff-removed">-    throw new Error(</div><div class="diff-removed">-      'Expected skipPastDehydratedSuspenseInstance() to never be called. ' +</div><div class="diff-removed">-        'This error is likely caused by a bug in React. Please file an issue.',</div><div class="diff-removed">-    );</div><div class="diff-removed">-  }</div><div class="diff-removed">-  const suspenseState: null | SuspenseState = fiber.memoizedState;</div><div class="diff-removed">-  const suspenseInstance: null | SuspenseInstance =</div><div class="diff-added">+  const suspenseState: null | SuspenseState = fiber.memoizedState;  </div><div class="diff-added">+  const suspenseInstance: null | SuspenseInstance = </div><div>     suspenseState !== null ? suspenseState.dehydrated : null;</div><div> </div><div>   if (!suspenseInstance) {</div><div class="diff-info">@@ -717,14 +713,14 @@ function popToNextHostParent(fiber: Fiber): void {</div><div>   while (hydrationParentFiber) {</div><div>     switch (hydrationParentFiber.tag) {</div><div>       case HostComponent:</div><div class="diff-removed">-      case ActivityComponent:</div><div class="diff-added">+      case ActivityComponent:  </div><div>       case SuspenseComponent:</div><div>         rootOrSingletonContext = false;</div><div>         return;</div><div>       case HostSingleton:</div><div>       case HostRoot:</div><div>         rootOrSingletonContext = true;</div><div class="diff-removed">-        return;</div><div class="diff-added">+        return; </div><div>       default:</div><div>         hydrationParentFiber = hydrationParentFiber.return;</div><div>     }</div><div class="diff-info">@@ -743,7 +739,7 @@ function popHydrationState(fiber: Fiber): boolean {</div><div>   if (!isHydrating) {</div><div>     // If we're not currently hydrating but we're in a hydration context, then</div><div>     // we were an insertion and now need to pop up reenter hydration of our</div><div class="diff-removed">-    // siblings.</div><div class="diff-added">+    // siblings.  </div><div>     popToNextHostParent(fiber);</div><div>     isHydrating = true;</div><div>     return false;</div><div class="diff-info">@@ -752,16 +748,16 @@ function popHydrationState(fiber: Fiber): boolean {</div><div>   const tag = fiber.tag;</div><div> </div><div>   if (supportsSingletons) {</div><div class="diff-removed">-    // With float we never clear the Root, or Singleton instances. We also do not clear Instances</div><div class="diff-added">+    // With float we never clear the Root, or Singleton instances. We also do not clear Instances  </div><div>     // that have singleton text content</div><div>     if (</div><div>       tag !== HostRoot &&</div><div class="diff-removed">-      tag !== HostSingleton &&</div><div class="diff-added">+      tag !== HostSingleton && </div><div>       !(</div><div>         tag === HostComponent &&</div><div>         (!shouldDeleteUnhydratedTailInstances(fiber.type) ||</div><div>           shouldSetTextContent(fiber.type, fiber.memoizedProps))</div><div class="diff-removed">-      )</div><div class="diff-added">+      )  </div><div>     ) {</div><div>       const nextInstance = nextHydratableInstance;</div><div>       if (nextInstance) {</div><div class="diff-info">@@ -775,7 +771,7 @@ function popHydrationState(fiber: Fiber): boolean {</div><div>     // other nodes in them. We also ignore components with pure text content in</div><div>     // side of them. We also don't delete anything inside the root container.</div><div>     if (</div><div class="diff-removed">-      tag !== HostRoot &&</div><div class="diff-added">+      tag !== HostRoot &&  </div><div>       (tag !== HostComponent ||</div><div>         (shouldDeleteUnhydratedTailInstances(fiber.type) &&</div><div>           !shouldSetTextContent(fiber.type, fiber.memoizedProps)))</div><div class="diff-info">@@ -787,7 +783,9 @@ function popHydrationState(fiber: Fiber): boolean {</div><div>       }</div><div>     }</div><div>   }</div><div class="diff-added">+</div><div>   popToNextHostParent(fiber);</div><div class="diff-added">+</div><div>   if (tag === SuspenseComponent) {</div><div>     nextHydratableInstance = skipPastDehydratedSuspenseInstance(fiber);</div><div>   } else if (tag === ActivityComponent) {</div><div class="diff-info">@@ -805,32 +803,13 @@ function popHydrationState(fiber: Fiber): boolean {</div><div>   return true;</div><div> }</div><div> </div><div class="diff-removed">-function warnIfUnhydratedTailNodes(fiber: Fiber) {</div><div class="diff-removed">-  if (__DEV__) {</div><div class="diff-removed">-    let nextInstance = nextHydratableInstance;</div><div class="diff-removed">-    while (nextInstance) {</div><div class="diff-removed">-      const diffNode = buildHydrationDiffNode(fiber, 0);</div><div class="diff-removed">-      const description =</div><div class="diff-removed">-        describeHydratableInstanceForDevWarnings(nextInstance);</div><div class="diff-removed">-      diffNode.serverTail.push(description);</div><div class="diff-removed">-      if (description.type === 'Suspense') {</div><div class="diff-removed">-        const suspenseInstance: SuspenseInstance = (nextInstance: any);</div><div class="diff-removed">-        nextInstance =</div><div class="diff-removed">-          getNextHydratableInstanceAfterSuspenseInstance(suspenseInstance);</div><div class="diff-removed">-      } else {</div><div class="diff-removed">-        nextInstance = getNextHydratableSibling(nextInstance);</div><div class="diff-removed">-      }</div><div class="diff-removed">-    }</div><div class="diff-removed">-  }</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div> function resetHydrationState(): void {</div><div>   if (!supportsHydration) {</div><div>     return;</div><div>   }</div><div> </div><div>   hydrationParentFiber = null;</div><div class="diff-removed">-  nextHydratableInstance = null;</div><div class="diff-added">+  nextHydratableInstance = null; </div><div>   isHydrating = false;</div><div>   didSuspendOrErrorDEV = false;</div><div> }</div><div class="diff-info">@@ -863,57 +842,11 @@ export function queueHydrationError(error: CapturedValue<mixed>): void {</div><div> </div><div> export function emitPendingHydrationWarnings() {</div><div>   if (__DEV__) {</div><div class="diff-removed">-    // If we haven't yet thrown any hydration errors by the time we reach the end we've successfully</div><div class="diff-added">+    // If we haven't yet thrown any hydration errors by the time we reach the end we've successfully  </div><div>     // hydrated, however, we might still have DEV-only mismatches that we log now.</div><div>     const diffRoot = hydrationDiffRootDEV;</div><div>     if (diffRoot !== null) {</div><div>       hydrationDiffRootDEV = null;</div><div>       const diff = describeDiff(diffRoot);</div><div> </div><div class="diff-removed">-      // Just pick the DFS-first leaf as the owner.</div><div class="diff-removed">-      // Should be good enough since most warnings only have a single error.</div><div class="diff-removed">-      let diffOwner: HydrationDiffNode = diffRoot;</div><div class="diff-removed">-      while (diffOwner.children.length > 0) {</div><div class="diff-removed">-        diffOwner = diffOwner.children[0];</div><div class="diff-removed">-      }</div><div class="diff-removed">-</div><div class="diff-removed">-      runWithFiberInDEV(diffOwner.fiber, () => {</div><div class="diff-removed">-        console.error(</div><div class="diff-removed">-          "A tree hydrated but some attributes of the server rendered HTML didn't match the client properties. This won't be patched up. " +</div><div class="diff-removed">-            'This can happen if a SSR-ed Client Component used:\n' +</div><div class="diff-removed">-            '\n' +</div><div class="diff-removed">-            "- A server/client branch `if (typeof window !== 'undefined')`.\n" +</div><div class="diff-removed">-            "- Variable input such as `Date.now()` or `Math.random()` which changes each time it's called.\n" +</div><div class="diff-removed">-            "- Date formatting in a user's locale which doesn't match the server.\n" +</div><div class="diff-removed">-            '- External changing data without sending a snapshot of it along with the HTML.\n' +</div><div class="diff-removed">-            '- Invalid HTML tag nesting.\n' +</div><div class="diff-removed">-            '\n' +</div><div class="diff-removed">-            'It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.\n' +</div><div class="diff-removed">-            '\n' +</div><div class="diff-removed">-            '%s%s',</div><div class="diff-removed">-          'https://react.dev/link/hydration-mismatch',</div><div class="diff-removed">-          diff,</div><div class="diff-removed">-        );</div><div class="diff-removed">-      });</div><div class="diff-removed">-    }</div><div class="diff-removed">-  }</div><div class="diff-removed">-}</div><div class="diff-removed">-</div><div class="diff-removed">-export {</div><div class="diff-removed">-  warnIfHydrating,</div><div class="diff-removed">-  enterHydrationState,</div><div class="diff-removed">-  getIsHydrating,</div><div class="diff-removed">-  reenterHydrationStateFromDehydratedActivityInstance,</div><div class="diff-removed">-  reenterHydrationStateFromDehydratedSuspenseInstance,</div><div class="diff-removed">-  resetHydrationState,</div><div class="diff-removed">-  claimHydratableSingleton,</div><div class="diff-removed">-  tryToClaimNextHydratableInstance,</div><div class="diff-removed">-  tryToClaimNextHydratableTextInstance,</div><div class="diff-removed">-  claimNextHydratableActivityInstance,</div><div class="diff-removed">-  claimNextHydratableSuspenseInstance,</div><div class="diff-removed">-  prepareToHydrateHostInstance,</div><div class="diff-removed">-  prepareToHydrateHostTextInstance,</div><div class="diff-removed">-  prepareToHydrateHostActivityInstance,</div><div class="diff-removed">-  prepareToHydrateHostSuspenseInstance,</div><div class="diff-removed">-  popHydrationState,</div><div class="diff-removed">-};</div><div>\ No newline at end of file</div><div class="diff-added">+      // Just pick the DFS-first leaf as the owner.</div><div>\ No newline at end of file</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    