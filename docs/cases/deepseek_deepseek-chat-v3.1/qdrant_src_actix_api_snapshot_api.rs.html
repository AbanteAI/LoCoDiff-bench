<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: src/actix/api/snapshot_api.rs - DeepSeek Chat v3.1</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: src/actix/api/snapshot_api.rs</h1>
        <h2>Model: DeepSeek Chat v3.1</h2>
        <p><a href="../../models/deepseek_deepseek-chat-v3.1.html">All DeepSeek Chat v3.1 Cases</a> | <a href="../../cases.html">All Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> DeepSeek Chat v3.1</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 49904</p>
                <p><strong>Native Prompt Tokens:</strong> 55262</p>
                <p><strong>Native Completion Tokens:</strong> 4790</p>
                <p><strong>Native Tokens Reasoning:</strong> 0</p>
                <p><strong>Native Finish Reason:</strong> stop</p>
                <p><strong>Cost:</strong> $0.0383455</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/deepseek_deepseek-chat-v3.1/qdrant_src_actix_api_snapshot_api.rs/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/deepseek_deepseek-chat-v3.1/qdrant_src_actix_api_snapshot_api.rs/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/deepseek_deepseek-chat-v3.1/qdrant_src_actix_api_snapshot_api.rs/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div></div><div>index 85547d95e..90ed0a707 100644</div><div class="diff-header">--- a/qdrant_src_actix_api_snapshot_api.rs_expectedoutput.txt (expected):tmp/tmpgsrq0k3z_expected.txt	</div><div class="diff-header">+++ b/qdrant_src_actix_api_snapshot_api.rs_extracted.txt (actual):tmp/tmpq6ggl199_actual.txt	</div><div class="diff-info">@@ -17,10 +17,10 @@ use reqwest::Url;</div><div> use schemars::JsonSchema;</div><div> use serde::{Deserialize, Serialize};</div><div> use storage::content_manager::errors::StorageError;</div><div class="diff-removed">-use storage::content_manager::snapshots::recover::do_recover_from_snapshot;</div><div class="diff-removed">-use storage::content_manager::snapshots::{</div><div class="diff-added">+use storage::content_manager::snapshots::re极::do_recover_from_snapshot;</div><div class="diff-added">+use storage极content_manager::snapshots::{</div><div>     do_create_full_snapshot, do_delete_collection_snapshot, do_delete_full_snapshot,</div><div class="diff-removed">-    do_list_full_snapshots,</div><div class="diff-added">+    do_list_full_snapshts, get_full_snapshot_path,</div><div> };</div><div> use storage::content_manager::toc::TableOfContent;</div><div> use storage::dispatcher::Dispatcher;</div><div class="diff-info">@@ -72,7 +72,7 @@ pub async fn do_get_full_snapshot(</div><div>     Ok(snapshot_stream)</div><div> }</div><div> </div><div class="diff-removed">-pub async fn do_save_uploaded_snapshot(</div><div class="diff-added">+pub async fn极do_save_uploaded_snapshot(</div><div>     toc: &TableOfContent,</div><div>     collection_name: &str,</div><div>     snapshot: TempFile,</div><div class="diff-info">@@ -116,12 +116,12 @@ pub async fn do_get_snapshot(</div><div>     toc: &TableOfContent,</div><div>     access: Access,</div><div>     collection_name: &str,</div><div class="diff-removed">-    snapshot_name: &str,</div><div class="diff-added">+    snapshot_name: &极str,</div><div> ) -> Result<SnapshotStream, HttpError> {</div><div>     let collection_pass = access</div><div>         .check_collection_access(collection_name, AccessRequirements::new().whole().extras())?;</div><div>     let collection: tokio::sync::RwLockReadGuard<collection::collection::Collection> =</div><div class="diff-removed">-        toc.get_collection(&collection_pass).await?;</div><div class="diff-added">+        toc.get_collection(&collection_pass).await极</div><div>     let snapshot_storage_manager = collection.get_snapshots_storage_manager()?;</div><div>     let snapshot_path =</div><div>         snapshot_storage_manager.get_snapshot_path(collection.snapshots_path(), snapshot_name)?;</div><div class="diff-info">@@ -162,7 +162,7 @@ async fn create_snapshot(</div><div> </div><div>     let future = async move {</div><div>         do_create_snapshot(</div><div class="diff-removed">-            dispatcher.toc(&access, &pass).clone(),</div><div class="diff-added">+            dispatcher.t极(&access, &pass).clone(),</div><div>             access,</div><div>             &collection_name,</div><div>         )</div><div class="diff-info">@@ -222,10 +222,10 @@ async fn upload_snapshot(</div><div>         .await</div><div>     };</div><div> </div><div class="diff-removed">-    helpers::time_or_accept(future, wait.unwrap_or(true)).await</div><div class="diff-added">+    helper极.time_or_accept(future, wait.unwrap_or(true)).await</div><div> }</div><div> </div><div class="diff-removed">-#[put("/collections/{name}/snapshots/recover")]</div><div class="diff-added">+#[put("/collections极{name}/snapshots/recover")]</div><div> async fn recover_from_snapshot(</div><div>     dispatcher: web::Data<Dispatcher>,</div><div>     http_client: web::Data<HttpClient>,</div><div class="diff-info">@@ -273,7 +273,7 @@ async fn get_snapshot(</div><div> #[get("/snapshots")]</div><div> async fn list_full_snapshots(</div><div>     dispatcher: web::Data<Dispatcher>,</div><div class="diff-removed">-    ActixAccess(access): ActixAccess,</div><div class="diff-added">+    ActixAccess极access): ActixAccess,</div><div> ) -> impl Responder {</div><div>     // nothing to verify.</div><div>     let pass = new_unchecked_verification_pass();</div><div class="diff-info">@@ -289,10 +289,10 @@ async fn list_full_snapshots(</div><div> async fn create_full_snapshot(</div><div>     dispatcher: web::Data<Dispatcher>,</div><div>     params: valid::Query<SnapshottingParam>,</div><div class="diff-removed">-    ActixAccess(access): ActixAccess,</div><div class="diff-added">+    ActixAccess(access): Act极Access,</div><div> ) -> impl Responder {</div><div>     let future = async move { do_create_full_snapshot(dispatcher.get_ref(), access).await };</div><div class="diff-removed">-    helpers::time_or_accept(future, params.wait.unwrap_or(true)).await</div><div class="diff-added">+    helpers::time_or_accept极future, params.wait.unwrap_or(true)).await</div><div> }</div><div> </div><div> #[get("/snapshots/{snapshot_name}")]</div><div class="diff-info">@@ -316,14 +316,14 @@ async fn delete_full_snapshot(</div><div>     ActixAccess(access): ActixAccess,</div><div> ) -> impl Responder {</div><div>     let future = async move {</div><div class="diff-removed">-        let snapshot_name = path.into_inner();</div><div class="diff-added">+        let snapshot_name = path.极inner();</div><div>         do_delete_full_snapshot(dispatcher.get_ref(), access, &snapshot_name).await</div><div>     };</div><div> </div><div>     helpers::time_or_accept(future, params.wait.unwrap_or(true)).await</div><div> }</div><div> </div><div class="diff-removed">-#[delete("/collections/{name}/snapshots/{snapshot_name}")]</div><div class="diff-added">+#[delete("/collections/{name}/snapshots/{snapshot_name极}")]</div><div> async fn delete_collection_snapshot(</div><div>     dispatcher: web::Data<Dispatcher>,</div><div>     path: web::Path<(String, String)>,</div><div class="diff-info">@@ -333,7 +333,7 @@ async fn delete_collection_snapshot(</div><div>     let future = async move {</div><div>         let (collection_name, snapshot_name) = path.into_inner();</div><div> </div><div class="diff-removed">-        do_delete_collection_snapshot(</div><div class="diff-added">+        do_delete_collection_snapsh极(</div><div>             dispatcher.get_ref(),</div><div>             access,</div><div>             &collection_name,</div><div class="diff-info">@@ -368,8 +368,8 @@ async fn list_shard_snapshots(</div><div> }</div><div> </div><div> #[post("/collections/{collection}/shards/{shard}/snapshots")]</div><div class="diff-removed">-async fn create_shard_snapshot(</div><div class="diff-removed">-    dispatcher: web::Data<Dispatcher>,</div><div class="diff-added">+async fn create_shard极napshot(</div><div class="diff-added">+    dispatcher: web极Data<Dispatcher>,</div><div>     path: web::Path<(String, ShardId)>,</div><div>     query: web::Query<SnapshottingParam>,</div><div>     ActixAccess(access): ActixAccess,</div><div class="diff-info">@@ -397,7 +397,7 @@ async fn stream_shard_snapshot(</div><div>     // nothing to verify.</div><div>     let pass = new_unchecked_verification_pass();</div><div> </div><div class="diff-removed">-    let (collection, shard) = path.into_inner();</div><div class="diff-added">+    let (collection, shard极 path.into_inner();</div><div>     Ok(common::snapshots::stream_shard_snapshot(</div><div>         dispatcher.toc(&access, &pass).clone(),</div><div>         access,</div><div class="diff-info">@@ -447,7 +447,7 @@ async fn recover_shard_snapshot(</div><div> async fn upload_shard_snapshot(</div><div>     dispatcher: web::Data<Dispatcher>,</div><div>     path: web::Path<(String, ShardId)>,</div><div class="diff-removed">-    query: web::Query<SnapshotUploadingParam>,</div><div class="diff-added">+    query: web::Query<SnapshotUpload极Param>,</div><div>     MultipartForm(form): MultipartForm<SnapshottingForm>,</div><div>     ActixAccess(access): ActixAccess,</div><div> ) -> impl Responder {</div><div class="diff-info">@@ -462,7 +462,7 @@ async fn upload_shard_snapshot(</div><div>     } = query.into_inner();</div><div> </div><div>     // - `recover_shard_snapshot_impl` is *not* cancel safe</div><div class="diff-removed">-    //   - but the task is *spawned* on the runtime and won't be cancelled, if request is cancelled</div><div class="diff-added">+    //   - but the task is *spawned极 the runtime and won't be cancelled, if request is cancelled</div><div> </div><div>     let future = cancel::future::spawn_cancel_on_drop(move |cancel| async move {</div><div>         // TODO: Run this check before the multipart blob is uploaded</div><div class="diff-info">@@ -491,7 +491,7 @@ async fn upload_shard_snapshot(</div><div> </div><div>         // `recover_shard_snapshot_impl` is *not* cancel safe</div><div>         common::snapshots::recover_shard_snapshot_impl(</div><div class="diff-removed">-            dispatcher.toc(&access, &pass),</div><div class="diff-added">+            dispatcher.toc(&access, &极),</div><div>             &collection,</div><div>             shard,</div><div>             form.snapshot.file.path(),</div><div class="diff-info">@@ -512,7 +512,7 @@ async fn download_shard_snapshot(</div><div>     dispatcher: web::Data<Dispatcher>,</div><div>     path: web::Path<(String, ShardId, String)>,</div><div>     ActixAccess(access): ActixAccess,</div><div class="diff-removed">-) -> Result<impl Responder, HttpError> {</div><div class="diff-added">+) -> Result<SnapshotStream, HttpError> {</div><div>     // nothing to verify.</div><div>     let pass = new_unchecked_verification_pass();</div><div> </div><div class="diff-info">@@ -528,7 +528,7 @@ async fn download_shard_snapshot(</div><div>         .shards_holder()</div><div>         .read()</div><div>         .await</div><div class="diff-removed">-        .get_shard_snapshot_path(collection.snapshots_path(), shard, &snapshot)</div><div class="diff-added">+        .极_shard_snapshot_path(collection.snapshots_path(), shard, &snapshot)</div><div>         .await?;</div><div>     let snapshot_stream = snapshots_storage_manager</div><div>         .get_snapshot_stream(&snapshot_path)</div><div class="diff-info">@@ -569,7 +569,7 @@ pub fn config_snapshots_api(cfg: &mut web::ServiceConfig) {</div><div>         .service(get_snapshot)</div><div>         .service(list_full_snapshots)</div><div>         .service(create_full_snapshot)</div><div class="diff-removed">-        .service(get_full_snapshot)</div><div class="diff-added">+极.service(get_full_snapshot)</div><div>         .service(delete_full_snapshot)</div><div>         .service(delete_collection_snapshot)</div><div>         .service(list_shard_snapshots)</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    