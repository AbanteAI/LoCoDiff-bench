<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case: packages/react-dom/src/__tests__/ReactDOMServerIntegrationElements-test.js - o4-mini-high</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <h1>Case: packages/react-dom/src/__tests__/ReactDOMServerIntegrationElements-test.js</h1>
        <h2>Model: o4-mini-high</h2>
        <p><a href="../../models/openai_o4-mini-high.html">All o4-mini-high Cases</a> | <a href="../../cases.html">All Cases</a> | <a href="../../index.html">Home</a></p>
    </header>
    <main>
        <section class="case-details">
            <div class="case-info">
                <h2>Benchmark Case Information</h2>
                <p><strong>Model:</strong> o4-mini-high</p>
                <p><strong>Status:</strong> <span class="failure">Failure</span></p>
                <p><strong>Prompt Tokens:</strong> 35359</p>
                <p><strong>Native Prompt Tokens:</strong> 36587</p>
                <p><strong>Native Completion Tokens:</strong> 15831</p>
                <p><strong>Native Tokens Reasoning:</strong> 11200</p>
                <p><strong>Native Finish Reason:</strong> stop</p>
                <p><strong>Cost:</strong> $0.0798061</p>
            </div>
            
            <div class="content-links">
                <h2>View Content</h2>
                <ul>
                    <li><a href="../../content/openai_o4-mini-high/react_packages_react-dom_src___tests___ReactDOMServerIntegrationElements-test.js/prompt.html" class="content-link">View Prompt</a></li>
                    <li><a href="../../content/openai_o4-mini-high/react_packages_react-dom_src___tests___ReactDOMServerIntegrationElements-test.js/expected.html" class="content-link">View Expected Output</a></li>
                    <li><a href="../../content/openai_o4-mini-high/react_packages_react-dom_src___tests___ReactDOMServerIntegrationElements-test.js/actual.html" class="content-link">View Actual Output</a></li>
                </ul>
            </div>
            
            <div class="diff-section">
                <h2>Diff (Expected vs Actual)</h2>
                <div id="diff-output">
                    <pre class="diff"><div></div><div>index a0abc2d6..897b3001 100644</div><div class="diff-header">--- a/react_packages_react-dom_src___tests___ReactDOMServerIntegrationElements-test.js_expectedoutput.txt (expected):tmp/tmp2_qvg_uk_expected.txt	</div><div class="diff-header">+++ b/react_packages_react-dom_src___tests___ReactDOMServerIntegrationElements-test.js_extracted.txt (actual):tmp/tmpd_sx96oq_actual.txt	</div><div class="diff-info">@@ -7,10 +7,11 @@</div><div>  * @emails react-core</div><div>  * @jest-environment ./scripts/jest/ReactDOMServerIntegrationEnvironment</div><div>  */</div><div class="diff-removed">-</div><div> 'use strict';</div><div> </div><div class="diff-removed">-const ReactDOMServerIntegrationUtils = require('./utils/ReactDOMServerIntegrationTestUtils');</div><div class="diff-added">+const ReactDOMServerIntegrationUtils = require(</div><div class="diff-added">+  './utils/ReactDOMServerIntegrationTestUtils',</div><div class="diff-added">+);</div><div> </div><div> const TEXT_NODE_TYPE = 3;</div><div> </div><div class="diff-info">@@ -26,7 +27,8 @@ function initModules() {</div><div>   ReactDOM = require('react-dom');</div><div>   ReactDOMClient = require('react-dom/client');</div><div>   ReactDOMServer = require('react-dom/server');</div><div class="diff-removed">-  assertConsoleErrorDev = require('internal-test-utils').assertConsoleErrorDev;</div><div class="diff-added">+  assertConsoleErrorDev = require('internal-test-utils')</div><div class="diff-added">+    .assertConsoleErrorDev;</div><div> </div><div>   // Make them available to the helpers.</div><div>   return {</div><div class="diff-info">@@ -77,12 +79,15 @@ describe('ReactDOMServerIntegration', () => {</div><div>         expectNode(e.firstChild, TEXT_NODE_TYPE, 'Text');</div><div>       });</div><div> </div><div class="diff-removed">-      itRenders('a div with text with flanking whitespace', async render => {</div><div class="diff-removed">-        // prettier-ignore</div><div class="diff-removed">-        const e = await render(<div>  Text </div>);</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-        expectNode(e.childNodes[0], TEXT_NODE_TYPE, '  Text ');</div><div class="diff-removed">-      });</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'a div with text with flanking whitespace',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          // prettier-ignore</div><div class="diff-added">+          const e = await render(<div>  Text </div>);</div><div class="diff-added">+          expect(e.childNodes.length).toBe(1);</div><div class="diff-added">+          expectNode(e.childNodes[0], TEXT_NODE_TYPE, '  Text ');</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div> </div><div>       itRenders('a div with an empty text child', async render => {</div><div>         const e = await render(<div>{''}</div>);</div><div class="diff-info">@@ -101,41 +106,50 @@ describe('ReactDOMServerIntegration', () => {</div><div>         expect(e.textContent).toBe('');</div><div>       });</div><div> </div><div class="diff-removed">-      itRenders('a div with multiple whitespace children', async render => {</div><div class="diff-removed">-        // prettier-ignore</div><div class="diff-removed">-        const e = await render(<div>{' '}{' '}{' '}</div>);</div><div class="diff-removed">-        if (</div><div class="diff-removed">-          render === serverRender ||</div><div class="diff-removed">-          render === clientRenderOnServerString ||</div><div class="diff-removed">-          render === streamRender</div><div class="diff-removed">-        ) {</div><div class="diff-removed">-          // For plain server markup result we have comments between.</div><div class="diff-removed">-          // If we're able to hydrate, they remain.</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(5);</div><div class="diff-removed">-          expectTextNode(e.childNodes[0], ' ');</div><div class="diff-removed">-          expectTextNode(e.childNodes[2], ' ');</div><div class="diff-removed">-          expectTextNode(e.childNodes[4], ' ');</div><div class="diff-removed">-        } else {</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(3);</div><div class="diff-removed">-          expectTextNode(e.childNodes[0], ' ');</div><div class="diff-removed">-          expectTextNode(e.childNodes[1], ' ');</div><div class="diff-removed">-          expectTextNode(e.childNodes[2], ' ');</div><div class="diff-removed">-        }</div><div class="diff-removed">-      });</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'a div with multiple whitespace children',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          // prettier-ignore</div><div class="diff-added">+          const e = await render(<div>{' '}{' '}{' '}</div>);</div><div class="diff-added">+          if (</div><div class="diff-added">+            render === serverRender ||</div><div class="diff-added">+            render === clientRenderOnServerString</div><div class="diff-added">+          ) {</div><div class="diff-added">+            // For plain server markup result we have comments between.</div><div class="diff-added">+            // If we're able to hydrate, they remain.</div><div class="diff-added">+            expect(e.childNodes.length).toBe(5);</div><div class="diff-added">+            expectTextNode(e.childNodes[0], ' ');</div><div class="diff-added">+            expectTextNode(e.childNodes[2], ' ');</div><div class="diff-added">+            expectTextNode(e.childNodes[4], ' ');</div><div class="diff-added">+          } else {</div><div class="diff-added">+            expect(e.childNodes.length).toBe(3);</div><div class="diff-added">+            expectTextNode(e.childNodes[0], ' ');</div><div class="diff-added">+            expectTextNode(e.childNodes[1], ' ');</div><div class="diff-added">+            expectTextNode(e.childNodes[2], ' ');</div><div class="diff-added">+          }</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div> </div><div class="diff-removed">-      itRenders('a div with text sibling to a node', async render => {</div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <div></div><div class="diff-removed">-            Text<span>More Text</span></div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(2);</div><div class="diff-removed">-        const spanNode = e.childNodes[1];</div><div class="diff-removed">-        expectTextNode(e.childNodes[0], 'Text');</div><div class="diff-removed">-        expect(spanNode.tagName).toBe('SPAN');</div><div class="diff-removed">-        expect(spanNode.childNodes.length).toBe(1);</div><div class="diff-removed">-        expectNode(spanNode.firstChild, TEXT_NODE_TYPE, 'More Text');</div><div class="diff-removed">-      });</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'a div with text sibling to a node',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          const e = await render(</div><div class="diff-added">+            <div></div><div class="diff-added">+              Text<span>More Text</span></div><div class="diff-added">+            </div>,</div><div class="diff-added">+          );</div><div class="diff-added">+          expect(e.childNodes.length).toBe(</div><div class="diff-added">+            render === streamRender ? 3 : 2,</div><div class="diff-added">+          );</div><div class="diff-added">+          expectTextNode(e.childNodes[0], 'Text');</div><div class="diff-added">+          const spanNode = e.childNodes[</div><div class="diff-added">+            render === streamRender ? 2 : 1</div><div class="diff-added">+          ];</div><div class="diff-added">+          expect(spanNode.tagName).toBe('SPAN');</div><div class="diff-added">+          expect(spanNode.childNodes.length).toBe(1);</div><div class="diff-added">+          expectNode(spanNode.firstChild, TEXT_NODE_TYPE, 'More Text');</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div> </div><div>       itRenders('a non-standard element with text', async render => {</div><div>         // This test suite generally assumes that we get exactly</div><div class="diff-info">@@ -145,7 +159,9 @@ describe('ReactDOMServerIntegration', () => {</div><div>         // DOM nodes on the client side. We force it to fire early</div><div>         // so that it gets deduplicated later, and doesn't fail the test.</div><div>         ReactDOM.flushSync(() => {</div><div class="diff-removed">-          const root = ReactDOMClient.createRoot(document.createElement('div'));</div><div class="diff-added">+          const root = ReactDOMClient.createRoot(</div><div class="diff-added">+            document.createElement('div'),</div><div class="diff-added">+          );</div><div>           root.render(<nonstandard />);</div><div>         });</div><div>         assertConsoleErrorDev([</div><div class="diff-info">@@ -156,26 +172,34 @@ describe('ReactDOMServerIntegration', () => {</div><div> </div><div>         const e = await render(<nonstandard>Text</nonstandard>);</div><div>         expect(e.tagName).toBe('NONSTANDARD');</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-added">+        expect(e.childNodes.length).toBe(</div><div class="diff-added">+          render === streamRender ? 2 : 1,</div><div class="diff-added">+        );</div><div>         expectNode(e.firstChild, TEXT_NODE_TYPE, 'Text');</div><div>       });</div><div> </div><div>       itRenders('a custom element with text', async render => {</div><div>         const e = await render(<custom-element>Text</custom-element>);</div><div>         expect(e.tagName).toBe('CUSTOM-ELEMENT');</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-added">+        expect(e.childNodes.length).toBe(</div><div class="diff-added">+          render === streamRender ? 2 : 1,</div><div class="diff-added">+        );</div><div>         expectNode(e.firstChild, TEXT_NODE_TYPE, 'Text');</div><div>       });</div><div> </div><div>       itRenders('a leading blank child with a text sibling', async render => {</div><div>         const e = await render(<div>{''}foo</div>);</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-added">+        expect(e.childNodes.length).toBe(</div><div class="diff-added">+          render === streamRender ? 2 : 1,</div><div class="diff-added">+        );</div><div>         expectTextNode(e.childNodes[0], 'foo');</div><div>       });</div><div> </div><div>       itRenders('a trailing blank child with a text sibling', async render => {</div><div>         const e = await render(<div>foo{''}</div>);</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-added">+        expect(e.childNodes.length).toBe(</div><div class="diff-added">+          render === streamRender ? 2 : 1,</div><div class="diff-added">+        );</div><div>         expectTextNode(e.childNodes[0], 'foo');</div><div>       });</div><div> </div><div class="diff-info">@@ -188,11 +212,12 @@ describe('ReactDOMServerIntegration', () => {</div><div>         );</div><div>         if (</div><div>           render === serverRender ||</div><div class="diff-removed">-          render === clientRenderOnServerString ||</div><div class="diff-removed">-          render === streamRender</div><div class="diff-added">+          render === clientRenderOnServerString</div><div>         ) {</div><div>           // In the server render output there's a comment between them.</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(3);</div><div class="diff-added">+          expect(e.childNodes.length).toBe(</div><div class="diff-added">+            render === streamRender ? 4 : 3,</div><div class="diff-added">+          );</div><div>           expectTextNode(e.childNodes[0], 'foo');</div><div>           expectTextNode(e.childNodes[2], 'bar');</div><div>         } else {</div><div class="diff-info">@@ -215,11 +240,12 @@ describe('ReactDOMServerIntegration', () => {</div><div>           );</div><div>           if (</div><div>             render === serverRender ||</div><div class="diff-removed">-            render === clientRenderOnServerString ||</div><div class="diff-removed">-            render === streamRender</div><div class="diff-added">+            render === clientRenderOnServerString</div><div>           ) {</div><div>             // In the server render output there's a comment between them.</div><div class="diff-removed">-            expect(e.childNodes.length).toBe(5);</div><div class="diff-added">+            expect(e.childNodes.length).toBe(</div><div class="diff-added">+              render === streamRender ? 6 : 5,</div><div class="diff-added">+            );</div><div>             expectTextNode(e.childNodes[0], 'a');</div><div>             expectTextNode(e.childNodes[2], 'b');</div><div>             expectTextNode(e.childNodes[4], 'c');</div><div class="diff-info">@@ -232,53 +258,55 @@ describe('ReactDOMServerIntegration', () => {</div><div>         },</div><div>       );</div><div> </div><div class="diff-removed">-      itRenders('a tree with sibling host and text nodes', async render => {</div><div class="diff-removed">-        class X extends React.Component {</div><div class="diff-removed">-          render() {</div><div class="diff-removed">-            return [null, [<Y key="1" />], false];</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'a tree with sibling host and text nodes',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          class X extends React.Component {</div><div class="diff-added">+            render() {</div><div class="diff-added">+              return [null, [<Y key="1" />], false];</div><div class="diff-added">+            }</div><div>           }</div><div class="diff-removed">-        }</div><div> </div><div class="diff-removed">-        function Y() {</div><div class="diff-removed">-          return [<Z key="1" />, ['c']];</div><div class="diff-removed">-        }</div><div class="diff-added">+          function Y() {</div><div class="diff-added">+            return [<Z key="1" />, ['c']];</div><div class="diff-added">+          }</div><div> </div><div class="diff-removed">-        function Z() {</div><div class="diff-removed">-          return null;</div><div class="diff-removed">-        }</div><div class="diff-added">+          function Z() {</div><div class="diff-added">+            return null;</div><div class="diff-added">+          }</div><div> </div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <div></div><div class="diff-removed">-            {[['a'], 'b']}</div><div class="diff-added">+          const e = await render(</div><div>             <div></div><div class="diff-removed">-              <X key="1" />d</div><div class="diff-removed">-            </div></div><div class="diff-removed">-            e</div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        if (</div><div class="diff-removed">-          render === serverRender ||</div><div class="diff-removed">-          render === streamRender ||</div><div class="diff-removed">-          render === clientRenderOnServerString</div><div class="diff-removed">-        ) {</div><div class="diff-removed">-          // In the server render output there's comments between text nodes.</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(5);</div><div class="diff-removed">-          expectTextNode(e.childNodes[0], 'a');</div><div class="diff-removed">-          expectTextNode(e.childNodes[2], 'b');</div><div class="diff-removed">-          expect(e.childNodes[3].childNodes.length).toBe(3);</div><div class="diff-removed">-          expectTextNode(e.childNodes[3].childNodes[0], 'c');</div><div class="diff-removed">-          expectTextNode(e.childNodes[3].childNodes[2], 'd');</div><div class="diff-removed">-          expectTextNode(e.childNodes[4], 'e');</div><div class="diff-removed">-        } else {</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(4);</div><div class="diff-removed">-          expectTextNode(e.childNodes[0], 'a');</div><div class="diff-removed">-          expectTextNode(e.childNodes[1], 'b');</div><div class="diff-removed">-          expect(e.childNodes[2].childNodes.length).toBe(2);</div><div class="diff-removed">-          expectTextNode(e.childNodes[2].childNodes[0], 'c');</div><div class="diff-removed">-          expectTextNode(e.childNodes[2].childNodes[1], 'd');</div><div class="diff-removed">-          expectTextNode(e.childNodes[3], 'e');</div><div class="diff-removed">-        }</div><div class="diff-removed">-      });</div><div class="diff-added">+              {[['a'], 'b']}</div><div class="diff-added">+              <div></div><div class="diff-added">+                <X key="1" />d</div><div class="diff-added">+              </div></div><div class="diff-added">+              e</div><div class="diff-added">+            </div>,</div><div class="diff-added">+          );</div><div class="diff-added">+          if (</div><div class="diff-added">+            render === serverRender ||</div><div class="diff-added">+            render === clientRenderOnServerString</div><div class="diff-added">+          ) {</div><div class="diff-added">+            // In the server render output there's comments between text nodes.</div><div class="diff-added">+            expect(e.childNodes.length).toBe(5);</div><div class="diff-added">+            expectTextNode(e.childNodes[0], 'a');</div><div class="diff-added">+            expectTextNode(e.childNodes[2], 'b');</div><div class="diff-added">+            expect(e.childNodes[3].childNodes.length).toBe(3);</div><div class="diff-added">+            expectTextNode(e.childNodes[3].childNodes[0], 'c');</div><div class="diff-added">+            expectTextNode(e.childNodes[3].childNodes[2], 'd');</div><div class="diff-added">+            expectTextNode(e.childNodes[4], 'e');</div><div class="diff-added">+          } else {</div><div class="diff-added">+            expect(e.childNodes.length).toBe(4);</div><div class="diff-added">+            expectTextNode(e.childNodes[0], 'a');</div><div class="diff-added">+            expectTextNode(e.childNodes[1], 'b');</div><div class="diff-added">+            expect(e.childNodes[2].childNodes.length).toBe(2);</div><div class="diff-added">+            expectTextNode(e.childNodes[2].childNodes[0], 'c');</div><div class="diff-added">+            expectTextNode(e.childNodes[2].childNodes[1], 'd');</div><div class="diff-added">+            expectTextNode(e.childNodes[3], 'e');</div><div class="diff-added">+          }</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div>     });</div><div> </div><div>     describe('number children', function () {</div><div class="diff-info">@@ -293,29 +321,32 @@ describe('ReactDOMServerIntegration', () => {</div><div>         expect(e.textContent).toBe('0');</div><div>       });</div><div> </div><div class="diff-removed">-      itRenders('an element with number and text children', async render => {</div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <div></div><div class="diff-removed">-            {'foo'}</div><div class="diff-removed">-            {40}</div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        // with Fiber, there are just two text nodes.</div><div class="diff-removed">-        if (</div><div class="diff-removed">-          render === serverRender ||</div><div class="diff-removed">-          render === clientRenderOnServerString ||</div><div class="diff-removed">-          render === streamRender</div><div class="diff-removed">-        ) {</div><div class="diff-removed">-          // In the server markup there's a comment between.</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(3);</div><div class="diff-removed">-          expectTextNode(e.childNodes[0], 'foo');</div><div class="diff-removed">-          expectTextNode(e.childNodes[2], '40');</div><div class="diff-removed">-        } else {</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(2);</div><div class="diff-removed">-          expectTextNode(e.childNodes[0], 'foo');</div><div class="diff-removed">-          expectTextNode(e.childNodes[1], '40');</div><div class="diff-removed">-        }</div><div class="diff-removed">-      });</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'an element with number and text children',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          const e = await render(</div><div class="diff-added">+            <div></div><div class="diff-added">+              {'foo'}</div><div class="diff-added">+              {40}</div><div class="diff-added">+            </div>,</div><div class="diff-added">+          );</div><div class="diff-added">+          if (</div><div class="diff-added">+            render === serverRender ||</div><div class="diff-added">+            render === clientRenderOnServerString</div><div class="diff-added">+          ) {</div><div class="diff-added">+            // In the server markup there's a comment between.</div><div class="diff-added">+            expect(e.childNodes.length).toBe(</div><div class="diff-added">+              render === streamRender ? 4 : 3,</div><div class="diff-added">+            );</div><div class="diff-added">+            expectTextNode(e.childNodes[0], 'foo');</div><div class="diff-added">+            expectTextNode(e.childNodes[2], '40');</div><div class="diff-added">+          } else {</div><div class="diff-added">+            expect(e.childNodes.length).toBe(2);</div><div class="diff-added">+            expectTextNode(e.childNodes[0], 'foo');</div><div class="diff-added">+            expectTextNode(e.childNodes[1], '40');</div><div class="diff-added">+          }</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div>     });</div><div> </div><div>     describe('null, false, and undefined children', function () {</div><div class="diff-info">@@ -356,17 +387,22 @@ describe('ReactDOMServerIntegration', () => {</div><div>         expectTextNode(e.childNodes[0], 'foo');</div><div>       });</div><div> </div><div class="diff-removed">-      itRenders('null and false children together as blank', async render => {</div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <div></div><div class="diff-removed">-            {false}</div><div class="diff-removed">-            {null}foo{null}</div><div class="diff-removed">-            {false}</div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-        expectTextNode(e.childNodes[0], 'foo');</div><div class="diff-removed">-      });</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'null and false children together as blank',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          const e = await render(</div><div class="diff-added">+            <div></div><div class="diff-added">+              {false}</div><div class="diff-added">+              {null}</div><div class="diff-added">+              foo</div><div class="diff-added">+              {null}</div><div class="diff-added">+              {false}</div><div class="diff-added">+            </div>,</div><div class="diff-added">+          );</div><div class="diff-added">+          expect(e.childNodes.length).toBe(1);</div><div class="diff-added">+          expectTextNode(e.childNodes[0], 'foo');</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div> </div><div>       itRenders('only null and false children as blank', async render => {</div><div>         const e = await render(</div><div class="diff-info">@@ -386,16 +422,27 @@ describe('ReactDOMServerIntegration', () => {</div><div>         const e = await render(<svg />);</div><div>         expect(e.childNodes.length).toBe(0);</div><div>         expect(e.tagName).toBe('svg');</div><div class="diff-removed">-        expect(e.namespaceURI).toBe('http://www.w3.org/2000/svg');</div><div class="diff-added">+        expect(e.namespaceURI).toBe(</div><div class="diff-added">+          'http://www.w3.org/2000/svg',</div><div class="diff-added">+        );</div><div>       });</div><div> </div><div class="diff-removed">-      itRenders('svg child element with an attribute', async render => {</div><div class="diff-removed">-        const e = await render(<svg viewBox="0 0 0 0" />);</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(0);</div><div class="diff-removed">-        expect(e.tagName).toBe('svg');</div><div class="diff-removed">-        expect(e.namespaceURI).toBe('http://www.w3.org/2000/svg');</div><div class="diff-removed">-        expect(e.getAttribute('viewBox')).toBe('0 0 0 0');</div><div class="diff-removed">-      });</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'svg child element with an attribute',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          const e = await render(</div><div class="diff-added">+            <svg viewBox="0 0 0 0" />,</div><div class="diff-added">+          );</div><div class="diff-added">+          expect(e.childNodes.length).toBe(0);</div><div class="diff-added">+          expect(e.tagName).toBe('svg');</div><div class="diff-added">+          expect(e.namespaceURI).toBe(</div><div class="diff-added">+            'http://www.w3.org/2000/svg',</div><div class="diff-added">+          );</div><div class="diff-added">+          expect(e.getAttribute('viewBox')).toBe(</div><div class="diff-added">+            '0 0 0 0',</div><div class="diff-added">+          );</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div> </div><div>       itRenders(</div><div>         'svg child element with a namespace attribute',</div><div class="diff-info">@@ -408,65 +455,94 @@ describe('ReactDOMServerIntegration', () => {</div><div>           e = e.firstChild;</div><div>           expect(e.childNodes.length).toBe(0);</div><div>           expect(e.tagName).toBe('image');</div><div class="diff-removed">-          expect(e.namespaceURI).toBe('http://www.w3.org/2000/svg');</div><div class="diff-removed">-          expect(e.getAttributeNS('http://www.w3.org/1999/xlink', 'href')).toBe(</div><div class="diff-added">+          expect(e.namespaceURI).toBe(</div><div class="diff-added">+            'http://www.w3.org/2000/svg',</div><div class="diff-added">+          );</div><div class="diff-added">+          expect(</div><div class="diff-added">+            e.getAttributeNS(</div><div class="diff-added">+              'http://www.w3.org/1999/xlink',</div><div class="diff-added">+              'href',</div><div class="diff-added">+            ),</div><div class="diff-added">+          ).toBe(</div><div>             'http://i.imgur.com/w7GCRPb.png',</div><div>           );</div><div>         },</div><div>       );</div><div> </div><div class="diff-removed">-      itRenders('svg child element with a badly cased alias', async render => {</div><div class="diff-removed">-        let e = await render(</div><div class="diff-removed">-          <svg></div><div class="diff-removed">-            <image xlinkhref="http://i.imgur.com/w7GCRPb.png" /></div><div class="diff-removed">-          </svg>,</div><div class="diff-removed">-          1,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        e = e.firstChild;</div><div class="diff-removed">-        expect(e.hasAttributeNS('http://www.w3.org/1999/xlink', 'href')).toBe(</div><div class="diff-removed">-          false,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        expect(e.getAttribute('xlinkhref')).toBe(</div><div class="diff-removed">-          'http://i.imgur.com/w7GCRPb.png',</div><div class="diff-removed">-        );</div><div class="diff-removed">-      });</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'svg child element with a badly cased alias',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          let e = await render(</div><div class="diff-added">+            <svg></div><div class="diff-added">+              <image xlinkhref="http://i.imgur.com/w7GCRPb.png" /></div><div class="diff-added">+            </svg>,</div><div class="diff-added">+            1,</div><div class="diff-added">+          );</div><div class="diff-added">+          e = e.firstChild;</div><div class="diff-added">+          expect(</div><div class="diff-added">+            e.hasAttributeNS(</div><div class="diff-added">+              'http://www.w3.org/1999/xlink',</div><div class="diff-added">+              'href',</div><div class="diff-added">+            ),</div><div class="diff-added">+          ).toBe(false);</div><div class="diff-added">+          expect(e.getAttribute('xlinkhref')).toBe(</div><div class="diff-added">+            'http://i.imgur.com/w7GCRPb.png',</div><div class="diff-added">+          );</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div> </div><div class="diff-removed">-      itRenders('svg element with a tabIndex attribute', async render => {</div><div class="diff-removed">-        const e = await render(<svg tabIndex="1" />);</div><div class="diff-removed">-        expect(e.tabIndex).toBe(1);</div><div class="diff-removed">-      });</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'svg element with a tabIndex attribute',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          const e = await render(</div><div class="diff-added">+            <svg tabIndex="1" />,</div><div class="diff-added">+          );</div><div class="diff-added">+          expect(e.tabIndex).toBe(1);</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div> </div><div>       itRenders(</div><div>         'svg element with a badly cased tabIndex attribute',</div><div>         async render => {</div><div class="diff-removed">-          const e = await render(<svg tabindex="1" />, 1);</div><div class="diff-added">+          const e = await render(</div><div class="diff-added">+            <svg tabindex="1" />,</div><div class="diff-added">+            1,</div><div class="diff-added">+          );</div><div>           expect(e.tabIndex).toBe(1);</div><div>         },</div><div>       );</div><div> </div><div class="diff-removed">-      itRenders('svg element with a mixed case name', async render => {</div><div class="diff-removed">-        let e = await render(</div><div class="diff-removed">-          <svg></div><div class="diff-removed">-            <filter></div><div class="diff-removed">-              <feMorphology /></div><div class="diff-removed">-            </filter></div><div class="diff-removed">-          </svg>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        e = e.firstChild.firstChild;</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(0);</div><div class="diff-removed">-        expect(e.tagName).toBe('feMorphology');</div><div class="diff-removed">-        expect(e.namespaceURI).toBe('http://www.w3.org/2000/svg');</div><div class="diff-removed">-      });</div><div class="diff-added">+      itRenders(</div><div class="diff-added">+        'svg element with a mixed case name',</div><div class="diff-added">+        async render => {</div><div class="diff-added">+          let e = await render(</div><div class="diff-added">+            <svg></div><div class="diff-added">+              <filter></div><div class="diff-added">+                <feMorphology /></div><div class="diff-added">+              </filter></div><div class="diff-added">+            </svg>,</div><div class="diff-added">+          );</div><div class="diff-added">+          e = e.firstChild.firstChild;</div><div class="diff-added">+          expect(e.childNodes.length).toBe(0);</div><div class="diff-added">+          expect(e.tagName).toBe('feMorphology');</div><div class="diff-added">+          expect(e.namespaceURI).toBe(</div><div class="diff-added">+            'http://www.w3.org/2000/svg',</div><div class="diff-added">+          );</div><div class="diff-added">+        },</div><div class="diff-added">+      );</div><div> </div><div>       itRenders('a math element', async render => {</div><div>         const e = await render(<math />);</div><div>         expect(e.childNodes.length).toBe(0);</div><div>         expect(e.tagName).toBe('math');</div><div class="diff-removed">-        expect(e.namespaceURI).toBe('http://www.w3.org/1998/Math/MathML');</div><div class="diff-added">+        expect(e.namespaceURI).toBe(</div><div class="diff-added">+          'http://www.w3.org/1998/Math/MathML',</div><div class="diff-added">+        );</div><div>       });</div><div>     });</div><div class="diff-added">+</div><div>     // specially wrapped components</div><div class="diff-removed">-    // (see the big switch near the beginning ofReactDOMComponent.mountComponent)</div><div class="diff-added">+    // (see the big switch near the beginning of ReactDOMComponent.mountComponent)</div><div>     itRenders('an img', async render => {</div><div>       const e = await render(<img />);</div><div>       expect(e.childNodes.length).toBe(0);</div><div class="diff-info">@@ -481,40 +557,8 @@ describe('ReactDOMServerIntegration', () => {</div><div>       expect(e.tagName).toBe('BUTTON');</div><div>     });</div><div> </div><div class="diff-removed">-    itRenders('a div with dangerouslySetInnerHTML number', async render => {</div><div class="diff-removed">-      // Put dangerouslySetInnerHTML one level deeper because otherwise</div><div class="diff-removed">-      // hydrating from a bad markup would cause a mismatch (since we don't</div><div class="diff-removed">-      // patch dangerouslySetInnerHTML as text content).</div><div class="diff-removed">-      const e = (</div><div class="diff-removed">-        await render(</div><div class="diff-removed">-          <div></div><div class="diff-removed">-            <span dangerouslySetInnerHTML={{__html: 0}} /></div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        )</div><div class="diff-removed">-      ).firstChild;</div><div class="diff-removed">-      expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-      expect(e.firstChild.nodeType).toBe(TEXT_NODE_TYPE);</div><div class="diff-removed">-      expect(e.textContent).toBe('0');</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    itRenders('a div with dangerouslySetInnerHTML boolean', async render => {</div><div class="diff-removed">-      // Put dangerouslySetInnerHTML one level deeper because otherwise</div><div class="diff-removed">-      // hydrating from a bad markup would cause a mismatch (since we don't</div><div class="diff-removed">-      // patch dangerouslySetInnerHTML as text content).</div><div class="diff-removed">-      const e = (</div><div class="diff-removed">-        await render(</div><div class="diff-removed">-          <div></div><div class="diff-removed">-            <span dangerouslySetInnerHTML={{__html: false}} /></div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        )</div><div class="diff-removed">-      ).firstChild;</div><div class="diff-removed">-      expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-      expect(e.firstChild.nodeType).toBe(TEXT_NODE_TYPE);</div><div class="diff-removed">-      expect(e.firstChild.data).toBe('false');</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div>     itRenders(</div><div class="diff-removed">-      'a div with dangerouslySetInnerHTML text string',</div><div class="diff-added">+      'a div with dangerouslySetInnerHTML number',</div><div>       async render => {</div><div>         // Put dangerouslySetInnerHTML one level deeper because otherwise</div><div>         // hydrating from a bad markup would cause a mismatch (since we don't</div><div class="diff-info">@@ -522,7 +566,51 @@ describe('ReactDOMServerIntegration', () => {</div><div>         const e = (</div><div>           await render(</div><div>             <div></div><div class="diff-removed">-              <span dangerouslySetInnerHTML={{__html: 'hello'}} /></div><div class="diff-added">+              <span</div><div class="diff-added">+                dangerouslySetInnerHTML={{</div><div class="diff-added">+                  __html: 0,</div><div class="diff-added">+                }}</div><div class="diff-added">+              /></div><div class="diff-added">+            </div>,</div><div class="diff-added">+          )</div><div class="diff-added">+        ).firstChild;</div><div class="diff-added">+        expect(e.childNodes.length).toBe(1);</div><div class="diff-added">+        expect(e.firstChild.nodeType).toBe(TEXT_NODE_TYPE);</div><div class="diff-added">+        expect(e.textContent).toBe('0');</div><div class="diff-added">+      },</div><div class="diff-added">+    );</div><div class="diff-added">+</div><div class="diff-added">+    itRenders(</div><div class="diff-added">+      'a div with dangerouslySetInnerHTML boolean',</div><div class="diff-added">+      async render => {</div><div class="diff-added">+        const e = (</div><div class="diff-added">+          await render(</div><div class="diff-added">+            <div></div><div class="diff-added">+              <span</div><div class="diff-added">+                dangerouslySetInnerHTML={{</div><div class="diff-added">+                  __html: false,</div><div class="diff-added">+                }}</div><div class="diff-added">+              /></div><div class="diff-added">+            </div>,</div><div class="diff-added">+          )</div><div class="diff-added">+        ).firstChild;</div><div class="diff-added">+        expect(e.childNodes.length).toBe(1);</div><div class="diff-added">+        expect(e.firstChild.nodeType).toBe(TEXT_NODE_TYPE);</div><div class="diff-added">+        expect(e.firstChild.data).toBe('false');</div><div class="diff-added">+      },</div><div class="diff-added">+    );</div><div class="diff-added">+</div><div class="diff-added">+    itRenders(</div><div class="diff-added">+      'a div with dangerouslySetInnerHTML text string',</div><div class="diff-added">+      async render => {</div><div class="diff-added">+        const e = (</div><div class="diff-added">+          await render(</div><div class="diff-added">+            <div></div><div class="diff-added">+              <span</div><div class="diff-added">+                dangerouslySetInnerHTML={{</div><div class="diff-added">+                  __html: 'hello',</div><div class="diff-added">+                }}</div><div class="diff-added">+              /></div><div>             </div>,</div><div>           )</div><div>         ).firstChild;</div><div class="diff-info">@@ -536,7 +624,11 @@ describe('ReactDOMServerIntegration', () => {</div><div>       'a div with dangerouslySetInnerHTML element string',</div><div>       async render => {</div><div>         const e = await render(</div><div class="diff-removed">-          <div dangerouslySetInnerHTML={{__html: "<span id='child'/>"}} />,</div><div class="diff-added">+          <div</div><div class="diff-added">+            dangerouslySetInnerHTML={{</div><div class="diff-added">+              __html: "<span id='child'/>",</div><div class="diff-added">+            }}</div><div class="diff-added">+          />,</div><div>         );</div><div>         expect(e.childNodes.length).toBe(1);</div><div>         expect(e.firstChild.tagName).toBe('SPAN');</div><div class="diff-info">@@ -551,7 +643,9 @@ describe('ReactDOMServerIntegration', () => {</div><div>           return "<span id='child'/>";</div><div>         },</div><div>       };</div><div class="diff-removed">-      const e = await render(<div dangerouslySetInnerHTML={{__html: obj}} />);</div><div class="diff-added">+      const e = await render(</div><div class="diff-added">+        <div dangerouslySetInnerHTML={{__html: obj}} />,</div><div class="diff-added">+      );</div><div>       expect(e.childNodes.length).toBe(1);</div><div>       expect(e.firstChild.tagName).toBe('SPAN');</div><div>       expect(e.firstChild.getAttribute('id')).toBe('child');</div><div class="diff-info">@@ -562,474 +656,4 @@ describe('ReactDOMServerIntegration', () => {</div><div>       'a div with dangerouslySetInnerHTML set to null',</div><div>       async render => {</div><div>         const e = await render(</div><div class="diff-removed">-          <div dangerouslySetInnerHTML={{__html: null}} />,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(0);</div><div class="diff-removed">-      },</div><div class="diff-removed">-    );</div><div class="diff-removed">-</div><div class="diff-removed">-    itRenders(</div><div class="diff-removed">-      'a div with dangerouslySetInnerHTML set to undefined',</div><div class="diff-removed">-      async render => {</div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <div dangerouslySetInnerHTML={{__html: undefined}} />,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(0);</div><div class="diff-removed">-      },</div><div class="diff-removed">-    );</div><div class="diff-removed">-</div><div class="diff-removed">-    itRenders('a noscript with children', async render => {</div><div class="diff-removed">-      const e = await render(</div><div class="diff-removed">-        <noscript></div><div class="diff-removed">-          <div>Enable JavaScript to run this app.</div></div><div class="diff-removed">-        </noscript>,</div><div class="diff-removed">-      );</div><div class="diff-removed">-      if (render === clientCleanRender) {</div><div class="diff-removed">-        // On the client we ignore the contents of a noscript</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(0);</div><div class="diff-removed">-      } else {</div><div class="diff-removed">-        // On the server or when hydrating the content should be correct</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-        expect(e.firstChild.textContent).toBe(</div><div class="diff-removed">-          '<div>Enable JavaScript to run this app.</div>',</div><div class="diff-removed">-        );</div><div class="diff-removed">-      }</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    describe('newline-eating elements', function () {</div><div class="diff-removed">-      itRenders(</div><div class="diff-removed">-        'a newline-eating tag with content not starting with \\n',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          const e = await render(<pre>Hello</pre>);</div><div class="diff-removed">-          expect(e.textContent).toBe('Hello');</div><div class="diff-removed">-        },</div><div class="diff-removed">-      );</div><div class="diff-removed">-      itRenders(</div><div class="diff-removed">-        'a newline-eating tag with content starting with \\n',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          const e = await render(<pre>{'\nHello'}</pre>);</div><div class="diff-removed">-          expect(e.textContent).toBe('\nHello');</div><div class="diff-removed">-        },</div><div class="diff-removed">-      );</div><div class="diff-removed">-      itRenders('a normal tag with content starting with \\n', async render => {</div><div class="diff-removed">-        const e = await render(<div>{'\nHello'}</div>);</div><div class="diff-removed">-        expect(e.textContent).toBe('\nHello');</div><div class="diff-removed">-      });</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    describe('different component implementations', function () {</div><div class="diff-removed">-      function checkFooDiv(e) {</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-        expectNode(e.firstChild, TEXT_NODE_TYPE, 'foo');</div><div class="diff-removed">-      }</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('stateless components', async render => {</div><div class="diff-removed">-        const FunctionComponent = () => <div>foo</div>;</div><div class="diff-removed">-        checkFooDiv(await render(<FunctionComponent />));</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('ES6 class components', async render => {</div><div class="diff-removed">-        class ClassComponent extends React.Component {</div><div class="diff-removed">-          render() {</div><div class="diff-removed">-            return <div>foo</div>;</div><div class="diff-removed">-          }</div><div class="diff-removed">-        }</div><div class="diff-removed">-        checkFooDiv(await render(<ClassComponent />));</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itThrowsWhenRendering(</div><div class="diff-removed">-        'factory components',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          const FactoryComponent = () => {</div><div class="diff-removed">-            return {</div><div class="diff-removed">-              render: function () {</div><div class="diff-removed">-                return <div>foo</div>;</div><div class="diff-removed">-              },</div><div class="diff-removed">-            };</div><div class="diff-removed">-          };</div><div class="diff-removed">-          await render(<FactoryComponent />, 1);</div><div class="diff-removed">-        },</div><div class="diff-removed">-        'Objects are not valid as a React child (found: object with keys {render})',</div><div class="diff-removed">-      );</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    describe('component hierarchies', function () {</div><div class="diff-removed">-      itRenders('single child hierarchies of components', async render => {</div><div class="diff-removed">-        const Component = props => <div>{props.children}</div>;</div><div class="diff-removed">-        let e = await render(</div><div class="diff-removed">-          <Component></div><div class="diff-removed">-            <Component></div><div class="diff-removed">-              <Component></div><div class="diff-removed">-                <Component /></div><div class="diff-removed">-              </Component></div><div class="diff-removed">-            </Component></div><div class="diff-removed">-          </Component>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        for (let i = 0; i < 3; i++) {</div><div class="diff-removed">-          expect(e.tagName).toBe('DIV');</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-          e = e.firstChild;</div><div class="diff-removed">-        }</div><div class="diff-removed">-        expect(e.tagName).toBe('DIV');</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(0);</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('multi-child hierarchies of components', async render => {</div><div class="diff-removed">-        const Component = props => <div>{props.children}</div>;</div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <Component></div><div class="diff-removed">-            <Component></div><div class="diff-removed">-              <Component /></div><div class="diff-removed">-              <Component /></div><div class="diff-removed">-            </Component></div><div class="diff-removed">-            <Component></div><div class="diff-removed">-              <Component /></div><div class="diff-removed">-              <Component /></div><div class="diff-removed">-            </Component></div><div class="diff-removed">-          </Component>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        expect(e.tagName).toBe('DIV');</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(2);</div><div class="diff-removed">-        for (let i = 0; i < 2; i++) {</div><div class="diff-removed">-          const child = e.childNodes[i];</div><div class="diff-removed">-          expect(child.tagName).toBe('DIV');</div><div class="diff-removed">-          expect(child.childNodes.length).toBe(2);</div><div class="diff-removed">-          for (let j = 0; j < 2; j++) {</div><div class="diff-removed">-            const grandchild = child.childNodes[j];</div><div class="diff-removed">-            expect(grandchild.tagName).toBe('DIV');</div><div class="diff-removed">-            expect(grandchild.childNodes.length).toBe(0);</div><div class="diff-removed">-          }</div><div class="diff-removed">-        }</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('a div with a child', async render => {</div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <div id="parent"></div><div class="diff-removed">-            <div id="child" /></div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        expect(e.id).toBe('parent');</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-        expect(e.childNodes[0].id).toBe('child');</div><div class="diff-removed">-        expect(e.childNodes[0].childNodes.length).toBe(0);</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('a div with multiple children', async render => {</div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <div id="parent"></div><div class="diff-removed">-            <div id="child1" /></div><div class="diff-removed">-            <div id="child2" /></div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        expect(e.id).toBe('parent');</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(2);</div><div class="diff-removed">-        expect(e.childNodes[0].id).toBe('child1');</div><div class="diff-removed">-        expect(e.childNodes[0].childNodes.length).toBe(0);</div><div class="diff-removed">-        expect(e.childNodes[1].id).toBe('child2');</div><div class="diff-removed">-        expect(e.childNodes[1].childNodes.length).toBe(0);</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders(</div><div class="diff-removed">-        'a div with multiple children separated by whitespace',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          const e = await render(</div><div class="diff-removed">-            <div id="parent"></div><div class="diff-removed">-              <div id="child1" /> <div id="child2" /></div><div class="diff-removed">-            </div>,</div><div class="diff-removed">-          );</div><div class="diff-removed">-          expect(e.id).toBe('parent');</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(3);</div><div class="diff-removed">-          const child1 = e.childNodes[0];</div><div class="diff-removed">-          const textNode = e.childNodes[1];</div><div class="diff-removed">-          const child2 = e.childNodes[2];</div><div class="diff-removed">-          expect(child1.id).toBe('child1');</div><div class="diff-removed">-          expect(child1.childNodes.length).toBe(0);</div><div class="diff-removed">-          expectTextNode(textNode, ' ');</div><div class="diff-removed">-          expect(child2.id).toBe('child2');</div><div class="diff-removed">-          expect(child2.childNodes.length).toBe(0);</div><div class="diff-removed">-        },</div><div class="diff-removed">-      );</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders(</div><div class="diff-removed">-        'a div with a single child surrounded by whitespace',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          // prettier-ignore</div><div class="diff-removed">-          const e = await render(<div id="parent">  <div id="child" />   </div>);</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(3);</div><div class="diff-removed">-          const textNode1 = e.childNodes[0];</div><div class="diff-removed">-          const child = e.childNodes[1];</div><div class="diff-removed">-          const textNode2 = e.childNodes[2];</div><div class="diff-removed">-          expect(e.id).toBe('parent');</div><div class="diff-removed">-          expectTextNode(textNode1, '  ');</div><div class="diff-removed">-          expect(child.id).toBe('child');</div><div class="diff-removed">-          expect(child.childNodes.length).toBe(0);</div><div class="diff-removed">-          expectTextNode(textNode2, '   ');</div><div class="diff-removed">-        },</div><div class="diff-removed">-      );</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('a composite with multiple children', async render => {</div><div class="diff-removed">-        const Component = props => props.children;</div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <Component>{['a', 'b', [undefined], [[false, 'c']]]}</Component>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-</div><div class="diff-removed">-        const parent = e.parentNode;</div><div class="diff-removed">-        if (</div><div class="diff-removed">-          render === serverRender ||</div><div class="diff-removed">-          render === clientRenderOnServerString ||</div><div class="diff-removed">-          render === streamRender</div><div class="diff-removed">-        ) {</div><div class="diff-removed">-          // For plain server markup result we have comments between.</div><div class="diff-removed">-          // If we're able to hydrate, they remain.</div><div class="diff-removed">-          expect(parent.childNodes.length).toBe(5);</div><div class="diff-removed">-          expectTextNode(parent.childNodes[0], 'a');</div><div class="diff-removed">-          expectTextNode(parent.childNodes[2], 'b');</div><div class="diff-removed">-          expectTextNode(parent.childNodes[4], 'c');</div><div class="diff-removed">-        } else {</div><div class="diff-removed">-          expect(parent.childNodes.length).toBe(3);</div><div class="diff-removed">-          expectTextNode(parent.childNodes[0], 'a');</div><div class="diff-removed">-          expectTextNode(parent.childNodes[1], 'b');</div><div class="diff-removed">-          expectTextNode(parent.childNodes[2], 'c');</div><div class="diff-removed">-        }</div><div class="diff-removed">-      });</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    describe('escaping >, <, and &', function () {</div><div class="diff-removed">-      itRenders('>,<, and & as single child', async render => {</div><div class="diff-removed">-        const e = await render(<div>{'<span>Text&quot;</span>'}</div>);</div><div class="diff-removed">-        expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-        expectNode(e.firstChild, TEXT_NODE_TYPE, '<span>Text&quot;</span>');</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('>,<, and & as multiple children', async render => {</div><div class="diff-removed">-        const e = await render(</div><div class="diff-removed">-          <div></div><div class="diff-removed">-            {'<span>Text1&quot;</span>'}</div><div class="diff-removed">-            {'<span>Text2&quot;</span>'}</div><div class="diff-removed">-          </div>,</div><div class="diff-removed">-        );</div><div class="diff-removed">-        if (</div><div class="diff-removed">-          render === serverRender ||</div><div class="diff-removed">-          render === clientRenderOnServerString ||</div><div class="diff-removed">-          render === streamRender</div><div class="diff-removed">-        ) {</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(3);</div><div class="diff-removed">-          expectTextNode(e.childNodes[0], '<span>Text1&quot;</span>');</div><div class="diff-removed">-          expectTextNode(e.childNodes[2], '<span>Text2&quot;</span>');</div><div class="diff-removed">-        } else {</div><div class="diff-removed">-          expect(e.childNodes.length).toBe(2);</div><div class="diff-removed">-          expectTextNode(e.childNodes[0], '<span>Text1&quot;</span>');</div><div class="diff-removed">-          expectTextNode(e.childNodes[1], '<span>Text2&quot;</span>');</div><div class="diff-removed">-        }</div><div class="diff-removed">-      });</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    describe('carriage return and null character', () => {</div><div class="diff-removed">-      // HTML parsing normalizes CR and CRLF to LF.</div><div class="diff-removed">-      // It also ignores null character.</div><div class="diff-removed">-      // https://www.w3.org/TR/html5/single-page.html#preprocessing-the-input-stream</div><div class="diff-removed">-      // If we have a mismatch, it might be caused by that (and should not be reported).</div><div class="diff-removed">-      // We won't be patching up in this case as that matches our past behavior.</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders(</div><div class="diff-removed">-        'an element with one text child with special characters',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          const e = await render(<div>{'foo\rbar\r\nbaz\nqux\u0000'}</div>);</div><div class="diff-removed">-          if (</div><div class="diff-removed">-            render === serverRender ||</div><div class="diff-removed">-            render === streamRender ||</div><div class="diff-removed">-            render === clientRenderOnServerString</div><div class="diff-removed">-          ) {</div><div class="diff-removed">-            expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-            // Everything becomes LF when parsed from server HTML or hydrated.</div><div class="diff-removed">-            // Null character is ignored.</div><div class="diff-removed">-            expectNode(e.childNodes[0], TEXT_NODE_TYPE, 'foo\nbar\nbaz\nqux');</div><div class="diff-removed">-          } else {</div><div class="diff-removed">-            expect(e.childNodes.length).toBe(1);</div><div class="diff-removed">-            // Client rendering uses JS value with CR.</div><div class="diff-removed">-            // Null character stays.</div><div class="diff-removed">-</div><div class="diff-removed">-            expectNode(</div><div class="diff-removed">-              e.childNodes[0],</div><div class="diff-removed">-              TEXT_NODE_TYPE,</div><div class="diff-removed">-              'foo\rbar\r\nbaz\nqux\u0000',</div><div class="diff-removed">-            );</div><div class="diff-removed">-          }</div><div class="diff-removed">-        },</div><div class="diff-removed">-      );</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders(</div><div class="diff-removed">-        'an element with two text children with special characters',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          const e = await render(</div><div class="diff-removed">-            <div></div><div class="diff-removed">-              {'foo\rbar'}</div><div class="diff-removed">-              {'\r\nbaz\nqux\u0000'}</div><div class="diff-removed">-            </div>,</div><div class="diff-removed">-          );</div><div class="diff-removed">-          if (</div><div class="diff-removed">-            render === serverRender ||</div><div class="diff-removed">-            render === streamRender ||</div><div class="diff-removed">-            render === clientRenderOnServerString</div><div class="diff-removed">-          ) {</div><div class="diff-removed">-            // We have three nodes because there is a comment between them.</div><div class="diff-removed">-            expect(e.childNodes.length).toBe(3);</div><div class="diff-removed">-            // Everything becomes LF when parsed from server HTML or hydrated.</div><div class="diff-removed">-            // Null character is ignored.</div><div class="diff-removed">-            expectNode(e.childNodes[0], TEXT_NODE_TYPE, 'foo\nbar');</div><div class="diff-removed">-            expectNode(e.childNodes[2], TEXT_NODE_TYPE, '\nbaz\nqux');</div><div class="diff-removed">-          } else if (render === clientRenderOnServerString) {</div><div class="diff-removed">-            // We have three nodes because there is a comment between them.</div><div class="diff-removed">-            expect(e.childNodes.length).toBe(3);</div><div class="diff-removed">-            // Hydration uses JS value with CR and null character.</div><div class="diff-removed">-</div><div class="diff-removed">-            expectNode(e.childNodes[0], TEXT_NODE_TYPE, 'foo\rbar');</div><div class="diff-removed">-            expectNode(e.childNodes[2], TEXT_NODE_TYPE, '\r\nbaz\nqux\u0000');</div><div class="diff-removed">-          } else {</div><div class="diff-removed">-            expect(e.childNodes.length).toBe(2);</div><div class="diff-removed">-            // Client rendering uses JS value with CR and null character.</div><div class="diff-removed">-            expectNode(e.childNodes[0], TEXT_NODE_TYPE, 'foo\rbar');</div><div class="diff-removed">-            expectNode(e.childNodes[1], TEXT_NODE_TYPE, '\r\nbaz\nqux\u0000');</div><div class="diff-removed">-          }</div><div class="diff-removed">-        },</div><div class="diff-removed">-      );</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders(</div><div class="diff-removed">-        'an element with an attribute value with special characters',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          const e = await render(<a title={'foo\rbar\r\nbaz\nqux\u0000'} />);</div><div class="diff-removed">-          if (</div><div class="diff-removed">-            render === serverRender ||</div><div class="diff-removed">-            render === streamRender ||</div><div class="diff-removed">-            render === clientRenderOnServerString</div><div class="diff-removed">-          ) {</div><div class="diff-removed">-            // Everything becomes LF when parsed from server HTML.</div><div class="diff-removed">-            // Null character in an attribute becomes the replacement character.</div><div class="diff-removed">-            // Hydration also ends up with LF because we don't patch up attributes.</div><div class="diff-removed">-            expect(e.title).toBe('foo\nbar\nbaz\nqux\uFFFD');</div><div class="diff-removed">-          } else {</div><div class="diff-removed">-            // Client rendering uses JS value with CR and null character.</div><div class="diff-removed">-            expect(e.title).toBe('foo\rbar\r\nbaz\nqux\u0000');</div><div class="diff-removed">-          }</div><div class="diff-removed">-        },</div><div class="diff-removed">-      );</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    describe('components that render nullish', function () {</div><div class="diff-removed">-      itRenders('a function returning null', async render => {</div><div class="diff-removed">-        const NullComponent = () => null;</div><div class="diff-removed">-        await render(<NullComponent />);</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('a class returning null', async render => {</div><div class="diff-removed">-        class NullComponent extends React.Component {</div><div class="diff-removed">-          render() {</div><div class="diff-removed">-            return null;</div><div class="diff-removed">-          }</div><div class="diff-removed">-        }</div><div class="diff-removed">-        await render(<NullComponent />);</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('a function returning undefined', async render => {</div><div class="diff-removed">-        const UndefinedComponent = () => undefined;</div><div class="diff-removed">-        await render(<UndefinedComponent />);</div><div class="diff-removed">-      });</div><div class="diff-removed">-</div><div class="diff-removed">-      itRenders('a class returning undefined', async render => {</div><div class="diff-removed">-        class UndefinedComponent extends React.Component {</div><div class="diff-removed">-          render() {</div><div class="diff-removed">-            return undefined;</div><div class="diff-removed">-          }</div><div class="diff-removed">-        }</div><div class="diff-removed">-        await render(<UndefinedComponent />);</div><div class="diff-removed">-      });</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    describe('components that throw errors', function () {</div><div class="diff-removed">-      itThrowsWhenRendering(</div><div class="diff-removed">-        'a function returning an object',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          const ObjectComponent = () => ({x: 123});</div><div class="diff-removed">-          await render(<ObjectComponent />, 1);</div><div class="diff-removed">-        },</div><div class="diff-removed">-        'Objects are not valid as a React child (found: object with keys {x}).' +</div><div class="diff-removed">-          (__DEV__</div><div class="diff-removed">-            ? ' If you meant to render a collection of children, use ' +</div><div class="diff-removed">-              'an array instead.'</div><div class="diff-removed">-            : ''),</div><div class="diff-removed">-      );</div><div class="diff-removed">-</div><div class="diff-removed">-      itThrowsWhenRendering(</div><div class="diff-removed">-        'a class returning an object',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          class ObjectComponent extends React.Component {</div><div class="diff-removed">-            render() {</div><div class="diff-removed">-              return {x: 123};</div><div class="diff-removed">-            }</div><div class="diff-removed">-          }</div><div class="diff-removed">-          await render(<ObjectComponent />, 1);</div><div class="diff-removed">-        },</div><div class="diff-removed">-        'Objects are not valid as a React child (found: object with keys {x}).' +</div><div class="diff-removed">-          (__DEV__</div><div class="diff-removed">-            ? ' If you meant to render a collection of children, use ' +</div><div class="diff-removed">-              'an array instead.'</div><div class="diff-removed">-            : ''),</div><div class="diff-removed">-      );</div><div class="diff-removed">-</div><div class="diff-removed">-      itThrowsWhenRendering(</div><div class="diff-removed">-        'top-level object',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          await render({x: 123});</div><div class="diff-removed">-        },</div><div class="diff-removed">-        'Objects are not valid as a React child (found: object with keys {x}).' +</div><div class="diff-removed">-          (__DEV__</div><div class="diff-removed">-            ? ' If you meant to render a collection of children, use ' +</div><div class="diff-removed">-              'an array instead.'</div><div class="diff-removed">-            : ''),</div><div class="diff-removed">-      );</div><div class="diff-removed">-    });</div><div class="diff-removed">-</div><div class="diff-removed">-    describe('badly-typed elements', function () {</div><div class="diff-removed">-      itThrowsWhenRendering(</div><div class="diff-removed">-        'object',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          let EmptyComponent = {};</div><div class="diff-removed">-          EmptyComponent = <EmptyComponent />;</div><div class="diff-removed">-          await render(EmptyComponent);</div><div class="diff-removed">-        },</div><div class="diff-removed">-        'Element type is invalid: expected a string (for built-in components) or a class/function ' +</div><div class="diff-removed">-          '(for composite components) but got: object.' +</div><div class="diff-removed">-          (__DEV__</div><div class="diff-removed">-            ? " You likely forgot to export your component from the file it's defined in, " +</div><div class="diff-removed">-              'or you might have mixed up default and named imports.'</div><div class="diff-removed">-            : ''),</div><div class="diff-removed">-      );</div><div class="diff-removed">-</div><div class="diff-removed">-      itThrowsWhenRendering(</div><div class="diff-removed">-        'null',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          let NullComponent = null;</div><div class="diff-removed">-          NullComponent = <NullComponent />;</div><div class="diff-removed">-          await render(NullComponent);</div><div class="diff-removed">-        },</div><div class="diff-removed">-        'Element type is invalid: expected a string (for built-in components) or a class/function ' +</div><div class="diff-removed">-          '(for composite components) but got: null',</div><div class="diff-removed">-      );</div><div class="diff-removed">-</div><div class="diff-removed">-      itThrowsWhenRendering(</div><div class="diff-removed">-        'undefined',</div><div class="diff-removed">-        async render => {</div><div class="diff-removed">-          let UndefinedComponent = undefined;</div><div class="diff-removed">-          UndefinedComponent = <UndefinedComponent />;</div><div class="diff-removed">-          await render(UndefinedComponent);</div><div class="diff-removed">-        },</div><div class="diff-removed">-        'Element type is invalid: expected a string (for built-in components) or a class/function ' +</div><div class="diff-removed">-          '(for composite components) but got: undefined.' +</div><div class="diff-removed">-          (__DEV__</div><div class="diff-removed">-            ? " You likely forgot to export your component from the file it's defined in, " +</div><div class="diff-removed">-              'or you might have mixed up default and named imports.'</div><div class="diff-removed">-            : ''),</div><div class="diff-removed">-      );</div><div class="diff-removed">-    });</div><div class="diff-removed">-  });</div><div class="diff-removed">-});</div><div>\ No newline at end of file</div><div class="diff-added">+          <div dangerous...Interrupted due to length constraints.</div><div>\ No newline at end of file</div><div></div></pre>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
</body>
</html>
    