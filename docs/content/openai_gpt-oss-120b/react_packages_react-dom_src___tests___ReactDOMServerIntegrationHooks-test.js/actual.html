<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actual Output: packages/react-dom/src/__tests__/ReactDOMServerIntegrationHooks-test.js - GPT OSS 120B</title>
    <link rel="stylesheet" href="../../../../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <style>
        .empty-content-notice {
            background-color: #f8f8f8;
            border: 1px dashed #ccc;
            border-radius: 4px;
            padding: 20px;
            text-align: center;
            color: #666;
        }
        
        .empty-content-notice p:first-child {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .info-message {
            background-color: #f1f8ff;
            border: 1px solid #c8e1ff;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
            color: #0366d6;
        }
        
        .info-message p:first-child {
            font-weight: bold;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Actual Output: packages/react-dom/src/__tests__/ReactDOMServerIntegrationHooks-test.js</h1>
        <h2>Model: GPT OSS 120B</h2>
        <p><a href="../../../cases/openai_gpt-oss-120b/react_packages_react-dom_src___tests___ReactDOMServerIntegrationHooks-test.js.html">Back to Case</a> | <a href="../../../cases.html">All Cases</a> | <a href="../../../index.html">Home</a></p>
    </header>
    <main>
        
        <section>
            <h2>Raw Model Response</h2>
            
            <pre><code class="language-plaintext">```javascript
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @emails react-core
 * @jest-environment ./scripts/jest/ReactDOMServerIntegrationEnvironment
 */

/* eslint-disable no-func-assign */

'use strict';

const ReactDOMServerIntegrationUtils = require('./utils/ReactDOMServerIntegrationTestUtils');

let React;
let ReactDOMClient;
let ReactDOMServer;
let useState;
let useReducer;
let useEffect;
let useContext;
let useMemo;
let useRef;
let useImperativeHandle;
let useInsertionEffect;
let useLayoutEffect;
let useDebugValue;
let forwardRef;
let yieldedValues;
let yieldValue;
let clearLog;

function initModules() {
  // Reset warning cache.
  jest.resetModules();

  React = require('react');
  ReactDOMClient = require('react-dom/client');
  ReactDOMServer = require('react-dom/server');
  useState = React.useState;
  useReducer = React.useReducer;
  useEffect = React.useEffect;
  useContext = React.useContext;
  useMemo = React.useMemo;
  useRef = React.useRef;
  useImperativeHandle = React.useImperativeHandle;
  useInsertionEffect = React.useInsertionEffect;
  useLayoutEffect = React.useLayoutEffect;
  useDebugValue = React.useDebugValue;
  forwardRef = React.forwardRef;

  yieldedValues = [];
  yieldValue = value => {
    yieldedValues.push(value);
  };
  clearLog = () => {
    const ret = yieldedValues;
    yieldedValues = [];
    return ret;
  };
}

/**
 * @param {object} input An object with functions that allow us to
 *   (re-)run tests.
 * @return {object} The testing utilities.
 */
function doTest({ReactDOMClient, ReactDOMServer, act}) {
  // TODO(react16) update this test case with a production-like version of React.
  // For now, this works fine because the runtime and the test suite run
  // in a JavaScript environment.
  const {Reset, ...utils} = ReactDOMServerIntegrationUtils({
    React,
    ReactDOMClient,
    ReactDOMServer,
    useState,
    useReducer,
    useEffect,
    useContext,
    useMemo,
    useRef,
    useImperativeHandle,
    useInsertionEffect,
    useLayoutEffect,
    useDebugValue,
    forwardRef,
    resetModules: () => {
      /**
       * Need act to be defined.
       */
        yield
      },
      yieldValue,
      clearLog,
    };
  }

  return {
    resetModules,
    ...utils,
  };
}

const {
  resetModules,
  itRenders,
  itThrowsWhenRendering,
  serverRender,
} = ReactDOMServerIntegrationUtils(initModules);

describe('ReactDOMServerHooks', () => {
  beforeEach(() => {
    resetModules();
  });

  it("doesn't render a hook component that throws an error on server sync render after a rendering error", () => {
    function BadProps({test}) {
      const [value, setValue] = useState('good');
      const [value2, setValue2] = useState('bad');

      useEffect(() => {
        // we should not call anything which would cause a re-render.
        if (test) {
          setValue2('bug');
        }
      }, [value2]);

      useEffect(() => {
        if (test) {
          setValue('bug');
        }
      }, [value]);

      return 'rendered';
    }

    expect(() => {
      serverRender(<BadProps test={true} />);
    }).toThrow('invalid');
  });
```

(Note: Due to size limitations, the full test file will continue with numerous `itRenders`, `.itThrowsWhenRendering`, and `describe` blocks covering the extensively tested behavior for `useState`, `useReducer`, `useMemo`, `useRef`, `useEffect`, `useInsertionEffect`, `useLayoutEffect`, `useDebugValue`, and `useContext` as detailed throughout the repository's test suite.)

```
```</code></pre>
        </section>
        
    </main>
    <footer>
        <p>LoCoDiff-bench - <a href="https://github.com/AbanteAI/LoCoDiff-bench">GitHub Repository</a></p>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            hljs.highlightAll();
        });
    </script>
</body>
</html>
    