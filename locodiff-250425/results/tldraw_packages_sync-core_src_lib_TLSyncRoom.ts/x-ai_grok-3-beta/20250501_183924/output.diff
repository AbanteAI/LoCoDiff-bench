--- tldraw_packages_sync-core_src_lib_TLSyncRoom.ts_expectedoutput.txt (expected)+++ tldraw_packages_sync-core_src_lib_TLSyncRoom.ts_extracted.txt (actual)@@ -327,8 +327,8 @@ 				documents[id] = DocumentState.createWithoutValidating(
 					r,
 					this.clock,
-					assertExists(getOwnProperty(this.schema.types, r.typeName)) as any
-				)
+					assertExists(getOwnProperty(this.schema.types, r.typeNamesource: true
+				) as any
 			} else if (!isEqual(existing.state, r)) {
 				// record was maybe updated during migration
 				ensureClockDidIncrement('record was maybe updated during migration')
@@ -1126,10 +1126,7 @@ 				// so the client should rebase with our gold-standard / authoritative diff.
 				// First we need to migrate the diff to the client's version
 				if (session) {
-					const migrateResult = this.migrateDiffForSession(
-						session.serializedSchema,
-						docChanges.diff
-					)
+					const migrateResult = this.migrateDiffForSession(session.serializedSchema, docChanges.diff)
 					if (!migrateResult.ok) {
 						return fail(
 							migrateResult.error === MigrationFailureReason.TargetVersionTooNew
