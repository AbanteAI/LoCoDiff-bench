--- ghostty_src_font_shaper_run.zig_expectedoutput.txt (expected)+++ ghostty_src_font_shaper_run.zig_extracted.txt (actual)@@ -380,6 +380,7 @@             for (cps) |cp| {
                 // Ignore Emoji ZWJs
                 if (cp == 0xFE0E or cp == 0xFE0F or cp == 0x200D) continue;
+                // Check other parts of grapheme without requiring presentation match
                 if (!self.grid.hasCodepoint(idx, cp, null)) break;
             } else {
                 // If the while completed, then we have a candidate that
