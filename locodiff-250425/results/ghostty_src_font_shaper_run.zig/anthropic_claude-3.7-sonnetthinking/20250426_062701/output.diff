--- ghostty_src_font_shaper_run.zig_expectedoutput.txt (expected)+++ ghostty_src_font_shaper_run.zig_extracted.txt (actual)@@ -69,11 +69,11 @@         // Track the font for our current run
         var current_font: font.Collection.Index = .{};
 
+        // Initialize our hash for this run.
+        var hasher = Hasher.init(0);
+
         // Allow the hook to prepare
         try self.hooks.prepare();
-
-        // Initialize our hash for this run.
-        var hasher = Hasher.init(0);
 
         // Let's get our style that we'll expect for the run.
         const style = self.row.style(&cells[self.i]);
