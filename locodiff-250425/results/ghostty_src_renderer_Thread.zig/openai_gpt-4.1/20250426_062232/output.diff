--- ghostty_src_renderer_Thread.zig_expectedoutput.txt (expected)+++ ghostty_src_renderer_Thread.zig_extracted.txt (actual)@@ -242,7 +242,6 @@ 
     // Run
     log.debug("starting renderer thread", .{});
-    defer log.debug("starting renderer thread shutdown", .{});
     _ = try self.loop.run(.until_done);
 }
 
@@ -551,8 +550,19 @@         return .disarm;
     };
 
-    // Draw
-    t.drawFrame(false);
+    // If we're doing single-threaded GPU calls then we just wake up the
+    // app thread to redraw at this point.
+    if (rendererpkg.Renderer == rendererpkg.OpenGL and
+        rendererpkg.OpenGL.single_threaded_draw)
+    {
+        _ = t.app_mailbox.push(
+            .{ .redraw_surface = t.surface },
+            .{ .instant = {} },
+        );
+    } else {
+        t.renderer.drawFrame(t.surface) catch |err|
+            log.warn("error drawing err={}", .{err});
+    }
 
     // Only continue if we're still active
     if (t.draw_active) {
@@ -649,12 +659,6 @@     return .disarm;
 }
 
-// fn prepFrameCallback(h: *libuv.Prepare) void {
-//     _ = h;
-//
-//     tracy.frameMark();
-// }
-
 fn stopCallback(
     self_: ?*Thread,
     _: *xev.Loop,
