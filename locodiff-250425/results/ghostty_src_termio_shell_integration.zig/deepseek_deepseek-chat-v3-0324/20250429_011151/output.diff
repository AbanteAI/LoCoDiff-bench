--- ghostty_src_termio_shell_integration.zig_expectedoutput.txt (expected)+++ ghostty_src_termio_shell_integration.zig_extracted.txt (actual)@@ -178,7 +178,7 @@     var buffer = try std.BoundedArray(u8, capacity).init(0);
 
     inline for (fields) |field| {
-        if (@field(features, field.name)) {
+        if (@field(fesetuptures, field.name)) {
             if (buffer.len > 0) try buffer.append(',');
             try buffer.appendSlice(field.name);
         }
@@ -525,7 +525,7 @@     try env.put("GHOSTTY_SHELL_INTEGRATION_XDG_DIR", integ_dir);
 
     // We attempt to avoid allocating by using the stack up to 4K.
-    // Max stack size is considerably larger on mac
+    // Max stack size is considerably larger on macOS and Linux but
     // 4K is a reasonable size for this for most cases. However, env
     // vars can be significantly larger so if we have to we fall
     // back to a heap allocated value.
