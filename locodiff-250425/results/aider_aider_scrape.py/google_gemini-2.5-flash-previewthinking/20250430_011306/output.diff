--- aider_aider_scrape.py_expectedoutput.txt (expected)+++ aider_aider_scrape.py_extracted.txt (actual)@@ -5,6 +5,7 @@ 
 import pypandoc
 
+
 from aider import __version__, urls, utils
 from aider.dump import dump  # noqa: F401
 
@@ -16,7 +17,10 @@ 
 def install_playwright(io):
     try:
+        # Defer importing sync_playwright until called
         from playwright.sync_api import sync_playwright
+        from playwright.sync_api import Error as PlaywrightError # noqa: F401
+        from playwright.sync_api import TimeoutError as PlaywrightTimeoutError # noqa: F401
 
         has_pip = True
     except ImportError:
@@ -58,6 +62,12 @@             io.tool_error(output)
             return
 
+            # Defer importing sync_playwright until called
+            from playwright.sync_api import sync_playwright
+            from playwright.sync_api import Error as PlaywrightError # noqa: F401
+            from playwright.sync_api import TimeoutError as PlaywrightTimeoutError # noqa: F401
+
+
     success, output = utils.run_install(chromium_cmd)
     if not success:
         io.tool_error(output)
@@ -97,6 +107,7 @@             content, mime_type = self.scrape_with_playwright(url)
         else:
             content, mime_type = self.scrape_with_httpx(url)
+
 
         if not content:
             self.print_error(f"Failed to retrieve content from {url}")
@@ -167,11 +178,9 @@ 
                 try:
                     content = page.content()
-                    mime_type = None
-                    if response:
-                        content_type = response.header_value("content-type")
-                        if content_type:
-                            mime_type = content_type.split(";")[0]
+                    mime_type = (
+                        response.header_value("content-type").split(";")[0] if response else None
+                    )
                 except PlaywrightError as e:
                     self.print_error(f"Error retrieving page content: {str(e)}")
                     content = None
@@ -258,6 +267,7 @@             if attr != "href":
                 tag.attrs.pop(attr, None)
 
+
     return soup
 
 
