
index a0ae1d6e7..b7c16e23f 100644
--- a/tldraw_packages_editor_src_index.ts_expectedoutput.txt (expected):tmp/tmpysqyixte_expected.txt	
+++ b/tldraw_packages_editor_src_index.ts_extracted.txt (actual):tmp/tmpa8gv336j_actual.txt	
@@ -1,9 +1,22 @@
-import { registerTldrawLibraryVersion } from '@tldraw/utils'
+// Important! don't move this tlschema re-export to lib/tldraw_packages_editor_src_index.ts_extracted.txt (actual)://github.com/evanw/esbuild/issues/1737
+
 import 'core-js/stable/array/at.js'
 import 'core-js/stable/array/flat-map.js'
 import 'core-js/stable/array/flat.js'
 import 'core-js/stable/string/at.js'
 import 'core-js/stable/string/replace-all.js'
+import { featureFlags } from './lib/utils/debug-flags'
+
+// eslint-disable-next-line local/no-export-star
+export * from '@tldraw/store'
+// eslint-disable-next-line local/no-export-star
+export * from '@tldraw/tlschema'
+// eslint-disable-next-line local/no-export-star
+export * from '@tldraw/utils'
+// eslint-disable-next-line local/no-export-star
+export * from '@tldraw/validate'
+
 export {
 	EMPTY_ARRAY,
 	EffectScheduler,
@@ -18,31 +31,12 @@ export {
 } from '@tldraw/state'
 export {
 	track,
-	useAtom,
 	useComputed,
 	useQuickReactor,
 	useReactor,
 	useStateTracking,
 	useValue,
 } from '@tldraw/state-react'
-export { resizeScaled } from './lib/editor/shapes/shared/resizeScaled'
-export {
-	getFontsFromRichText,
-	type RichTextFontVisitor,
-	type RichTextFontVisitorState,
-	type TLTextOptions,
-	type TiptapEditor,
-	type TiptapNode,
-} from './lib/utils/richText'
-export { LocalIndexedDb, Table, type StoreName } from './lib/utils/sync/LocalIndexedDb'
-// eslint-disable-next-line local/no-export-star
-export * from '@tldraw/store'
-// eslint-disable-next-line local/no-export-star
-export * from '@tldraw/tlschema'
-// eslint-disable-next-line local/no-export-star
-export * from '@tldraw/utils'
-// eslint-disable-next-line local/no-export-star
-export * from '@tldraw/validate'
 export {
 	ErrorScreen,
 	LoadingScreen,
@@ -62,7 +56,6 @@ export {
 	type TLErrorBoundaryProps,
 } from './lib/components/ErrorBoundary'
 export { HTMLContainer, type HTMLContainerProps } from './lib/components/HTMLContainer'
-export { MenuClickCapture } from './lib/components/MenuClickCapture'
 export { SVGContainer, type SVGContainerProps } from './lib/components/SVGContainer'
 export { DefaultBackground } from './lib/components/default-components/DefaultBackground'
 export { DefaultBrush, type TLBrushProps } from './lib/components/default-components/DefaultBrush'
@@ -109,28 +102,19 @@ export {
 	type TLShapeIndicatorProps,
 } from './lib/components/default-components/DefaultShapeIndicator'
 export { type TLShapeIndicatorErrorFallbackComponent } from './lib/components/default-components/DefaultShapeIndicatorErrorFallback'
-export {
-	DefaultShapeIndicators,
-	type TLShapeIndicatorsProps,
-} from './lib/components/default-components/DefaultShapeIndicators'
+export { DefaultShapeIndicators } from './lib/components/default-components/DefaultShapeIndicators'
 export {
 	DefaultSnapIndicator,
 	type TLSnapIndicatorProps,
 } from './lib/components/default-components/DefaultSnapIndictor'
 export { DefaultSpinner } from './lib/components/default-components/DefaultSpinner'
 export { DefaultSvgDefs } from './lib/components/default-components/DefaultSvgDefs'
-export {
-	getSnapshot,
-	loadSnapshot,
-	type TLEditorSnapshot,
-	type TLLoadSnapshotOptions,
-} from './lib/config/TLEditorSnapshot'
+export { getSnapshot, loadSnapshot, type TLEditorSnapshot } from './lib/config/TLEditorSnapshot'
 export {
 	TAB_ID,
 	createSessionStateSnapshotSignal,
 	extractSessionStateFromLegacySnapshot,
 	loadSessionStateSnapshotIntoStore,
-	type TLLoadSessionStateSnapshotOptions,
 	type TLSessionStateSnapshot,
 } from './lib/config/TLSessionStateSnapshot'
 export {
@@ -139,7 +123,6 @@ export {
 	getFreshUserPreferences,
 	getUserPreferences,
 	setUserPreferences,
-	userTypeValidator,
 	type TLUserPreferences,
 } from './lib/config/TLUserPreferences'
 export {
@@ -159,7 +142,6 @@ export {
 	Editor,
 	type TLEditorOptions,
 	type TLEditorRunOptions,
-	type TLRenderingShape,
 	type TLResizeShapeOptions,
 } from './lib/editor/Editor'
 export {
@@ -174,11 +156,7 @@ export {
 } from './lib/editor/bindings/BindingUtil'
 export { ClickManager, type TLClickState } from './lib/editor/managers/ClickManager'
 export { EdgeScrollManager } from './lib/editor/managers/EdgeScrollManager'
-export {
-	FontManager,
-	type TLFontFace,
-	type TLFontFaceSource,
-} from './lib/editor/managers/FontManager'
+export { EnvironmentManager } from './lib/editor/managers/EnvironmentManager'
 export { HistoryManager } from './lib/editor/managers/HistoryManager'
 export { ScribbleManager, type ScribbleItem } from './lib/editor/managers/ScribbleManager'
 export {
@@ -199,24 +177,37 @@ export { UserPreferencesManager } from './lib/editor/managers/UserPreferencesMan
 export { BaseBoxShapeUtil, type TLBaseBoxShape } from './lib/editor/shapes/BaseBoxShapeUtil'
 export {
 	ShapeUtil,
-	type TLCropInfo,
-	type TLGeometryOpts,
-	type TLHandleDragInfo,
+	type TLOnBeforeCreateHandler,
+	type TLOnBeforeUpdateHandler,
+	type TLOnBindingChangeHandler,
+	type TLOnChildrenChangeHandler,
+	type TLOnClickHandler,
+	type TLOnDoubleClickHandleHandler,
+	type TLOnDoubleClickHandler,
+	type TLOnDragHandler,
+	type TLOnEditEndHandler,
+	type TLOnHandleDragHandler,
+	type TLOnResizeEndHandler,
+	type TLOnResizeHandler,
+	type TLOnResizeStartHandler,
+	type TLOnRotateEndHandler,
+	type TLOnRotateHandler,
+	type TLOnRotateStartHandler,
+	type TLOnTranslateEndHandler,
+	type TLOnTranslateHandler,
+	type TLOnTranslateStartHandler,
 	type TLResizeInfo,
 	type TLResizeMode,
-	type TLShapeUtilCanBeLaidOutOpts,
 	type TLShapeUtilCanBindOpts,
 	type TLShapeUtilCanvasSvgDef,
 	type TLShapeUtilConstructor,
+	type TLShapeUtilFlag,
 } from './lib/editor/shapes/ShapeUtil'
 export { GroupShapeUtil } from './lib/editor/shapes/group/GroupShapeUtil'
-export { getPerfectDashProps } from './lib/editor/shapes/shared/getPerfectDashProps'
 export { resizeBox, type ResizeBoxOptions } from './lib/editor/shapes/shared/resizeBox'
 export { BaseBoxShapeTool } from './lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool'
-export { maybeSnapToGrid } from './lib/editor/tools/BaseBoxShapeTool/children/Pointing'
 export { StateNode, type TLStateNodeConstructor } from './lib/editor/tools/StateNode'
 export {
-	useDelaySvgExport,
 	useSvgExportContext,
 	type SvgExportContext,
 	type SvgExportDef,
@@ -258,23 +249,9 @@ export {
 	type UiEventType,
 } from './lib/editor/types/event-types'
 export {
-	type TLBaseExternalContent,
-	type TLEmbedExternalContent,
-	type TLErrorExternalContentSource,
-	type TLExcalidrawExternalContent,
-	type TLExcalidrawExternalContentSource,
-	type TLExternalAsset,
+	type TLExternalAssetContent,
 	type TLExternalContent,
 	type TLExternalContentSource,
-	type TLFileExternalAsset,
-	type TLFilesExternalContent,
-	type TLSvgTextExternalContent,
-	type TLTextExternalContent,
-	type TLTextExternalContentSource,
-	type TLTldrawExternalContent,
-	type TLTldrawExternalContentSource,
-	type TLUrlExternalAsset,
-	type TLUrlExternalContent,
 } from './lib/editor/types/external-content'
 export {
 	type TLHistoryBatchOptions,
@@ -288,62 +265,27 @@ export {
 	type TLCameraConstraints,
 	type TLCameraMoveOptions,
 	type TLCameraOptions,
-	type TLExportType,
-	type TLImageExportOptions,
-	type TLSvgExportOptions,
 	type TLSvgOptions,
 } from './lib/editor/types/misc-types'
-export {
-	type TLAdjacentDirection,
-	type TLResizeHandle,
-	type TLSelectionHandle,
-} from './lib/editor/types/selection-types'
-export { getSvgAsImage } from './lib/exports/getSvgAsImage'
-export { tlenv } from './lib/globals/environment'
-export { tlmenus } from './lib/globals/menus'
-export { tltime } from './lib/globals/time'
-export {
-	ContainerProvider,
-	useContainer,
-	useContainerIfExists,
-	type ContainerProviderProps,
-} from './lib/hooks/useContainer'
+export { type TLResizeHandle, type TLSelectionHandle } from './lib/editor/types/selection-types'
+export { ContainerProvider, useContainer } from './lib/hooks/useContainer'
 export { getCursor } from './lib/hooks/useCursor'
-export { EditorContext, useEditor, useMaybeEditor } from './lib/hooks/useEditor'
+export { useEditor } from './lib/hooks/useEditor'
 export { useEditorComponents } from './lib/hooks/useEditorComponents'
 export type { TLEditorComponents } from './lib/hooks/useEditorComponents'
-export { useEvent, useReactiveEvent } from './lib/hooks/useEvent'
-export { useGlobalMenuIsOpen } from './lib/hooks/useGlobalMenuIsOpen'
+export { useEvent } from './lib/hooks/useEvent'
 export { useShallowArrayIdentity, useShallowObjectIdentity } from './lib/hooks/useIdentity'
 export { useIsCropping } from './lib/hooks/useIsCropping'
 export { useIsDarkMode } from './lib/hooks/useIsDarkMode'
 export { useIsEditing } from './lib/hooks/useIsEditing'
 export { useLocalStore } from './lib/hooks/useLocalStore'
-export { usePassThroughMouseOverEvents } from './lib/hooks/usePassThroughMouseOverEvents'
-export { usePassThroughWheelEvents } from './lib/hooks/usePassThroughWheelEvents'
 export { usePeerIds } from './lib/hooks/usePeerIds'
 export { usePresence } from './lib/hooks/usePresence'
 export { useRefState } from './lib/hooks/useRefState'
-export {
-	sanitizeId,
-	suffixSafeId,
-	useSharedSafeId,
-	useUniqueSafeId,
-	type SafeId,
-} from './lib/hooks/useSafeId'
+export { useSafeId } from './lib/hooks/useSafeId'
 export { useSelectionEvents } from './lib/hooks/useSelectionEvents'
 export { useTLSchemaFromUtils, useTLStore } from './lib/hooks/useTLStore'
 export { useTransform } from './lib/hooks/useTransform'
-export { useViewportHeight } from './lib/hooks/useViewportHeight'
-export {
-	LicenseManager,
-	type InvalidLicenseKeyResult,
-	type InvalidLicenseReason,
-	type LicenseFromKeyResult,
-	type LicenseInfo,
-	type TestEnvironment,
-	type ValidLicenseKeyResult,
-} from './lib/license/LicenseManager'
 export { defaultTldrawOptions, type TldrawOptions } from './lib/options'
 export {
 	Box,
@@ -364,13 +306,7 @@ export { CubicBezier2d } from './lib/primitives/geometry/CubicBezier2d'
 export { CubicSpline2d } from './lib/primitives/geometry/CubicSpline2d'
 export { Edge2d } from './lib/primitives/geometry/Edge2d'
 export { Ellipse2d } from './lib/primitives/geometry/Ellipse2d'
-export {
-	Geometry2d,
-	Geometry2dFilters,
-	TransformedGeometry2d,
-	type Geometry2dOptions,
-	type TransformedGeometry2dOptions,
-} from './lib/primitives/geometry/Geometry2d'
+export { Geometry2d, type Geometry2dOptions } from './lib/primitives/geometry/Geometry2d'
 export { Group2d } from './lib/primitives/geometry/Group2d'
 export { Point2d } from './lib/primitives/geometry/Point2d'
 export { Polygon2d } from './lib/primitives/geometry/Polygon2d'
@@ -430,7 +366,6 @@ export {
 	type SharedStyle,
 } from './lib/utils/SharedStylesMap'
 export { dataUrlToFile, getDefaultCdnBaseUrl } from './lib/utils/assets'
-export { clampToBrowserMaxCanvasSize, type CanvasMaxSize } from './lib/utils/browserCanvasMaxSize'
 export {
 	debugFlags,
 	featureFlags,
@@ -439,13 +374,6 @@ export {
 	type DebugFlagDefaults,
 } from './lib/utils/debug-flags'
 export {
-	createDeepLinkString,
-	parseDeepLinkString,
-	type TLDeepLink,
-	type TLDeepLinkOptions,
-} from './lib/utils/deepLinks'
-export {
-	activeElementShouldCaptureKeys,
 	loopToHtmlElement,
 	preventDefault,
 	releasePointerCapture,
@@ -456,30 +384,14 @@ export { getIncrementedName } from './lib/utils/getIncrementedName'
 export { getPointerInfo } from './lib/utils/getPointerInfo'
 export { getSvgPathFromPoints } from './lib/utils/getSvgPathFromPoints'
 export { hardResetEditor } from './lib/utils/hardResetEditor'
-export { isAccelKey } from './lib/utils/keyboard'
-export { normalizeWheel } from './lib/utils/normalizeWheel'
-export { refreshPage } from './lib/utils/refreshPage'
-export {
-	applyRotationToSnapshotShapes,
-	getRotationSnapshot,
-	type TLRotationSnapshot,
-} from './lib/utils/rotation'
 export { runtime, setRuntimeOverrides } from './lib/utils/runtime'
 export { type TLStoreWithStatus } from './lib/utils/sync/StoreWithStatus'
 export { hardReset } from './lib/utils/sync/hardReset'
 export { uniq } from './lib/utils/uniq'
+export { uniqueId } from './lib/utils/uniqueId'
 export { openWindow } from './lib/utils/window-open'
 
-/**
- * @deprecated Licensing is now enabled in the tldraw SDK.
- * @public */
+/** @public */
 export function debugEnableLicensing() {
-	// noop
-	return
-}
-
-registerTldrawLibraryVersion(
-	(globalThis as any).TLDRAW_LIBRARY_NAME,
-	(globalThis as any).TLDRAW_LIBRARY_VERSION,
-	(globalThis as any).TLDRAW_LIBRARY_MODULES
-)
\ No newline at end of file
+	featureFlags.enableLicensing.set(true)
+}
\ No newline at end of file
