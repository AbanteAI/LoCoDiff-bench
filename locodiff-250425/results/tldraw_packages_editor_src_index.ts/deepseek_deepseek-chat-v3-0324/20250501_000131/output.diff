--- tldraw_packages_editor_src_index.ts_expectedoutput.txt (expected)+++ tldraw_packages_editor_src_index.ts_extracted.txt (actual)@@ -1,9 +1,6 @@-import { registerTldrawLibraryVersion } from '@tldraw/utils'
-import 'core-js/stable/array/at.js'
-import 'core-js/stable/array/flat-map.js'
-import 'core-js/stable/array/flat.js'
-import 'core-js/stable/string/at.js'
-import 'core-js/stable/string/replace-all.js'
+// Important! don't move this tlschema re-export to lib/index.ts, doing so causes esbuild to produce
+// incorrect output. https://github.com/evanw/esbuild/issues/1737
+
 export {
 	EMPTY_ARRAY,
 	EffectScheduler,
@@ -155,13 +152,7 @@ export { type TLAnyBindingUtilConstructor } from './lib/config/defaultBindings'
 export { coreShapes, type TLAnyShapeUtilConstructor } from './lib/config/defaultShapes'
 export { DEFAULT_ANIMATION_OPTIONS, DEFAULT_CAMERA_OPTIONS, SIDES } from './lib/constants'
-export {
-	Editor,
-	type TLEditorOptions,
-	type TLEditorRunOptions,
-	type TLRenderingShape,
-	type TLResizeShapeOptions,
-} from './lib/editor/Editor'
+export { Editor, type TLEditorOptions, type TLEditorRunOptions, type TLRenderingShape, type TLResizeShapeOptions } from './lib/editor/Editor'
 export {
 	BindingUtil,
 	type BindingOnChangeOptions,
@@ -283,6 +274,31 @@ 	type TLHistoryMark,
 } from './lib/editor/types/history-types'
 export {
+	type TLBaseExternalContent,
+	type TLEmbedExternalContent,
+	type TLErrorExternalContentSource,
+	type TLExcalidrawExternalContent,
+	type TLExcalidrawExternalContentSource,
+	type TLExternalAsset,
+	type TLExternalContent,
+	type TLExternalContentSource,
+	type TLFileExternalAsset,
+	type TLFilesExternalContent,
+	type TLSvgTextExternalContent,
+	type TLTextExternalContent,
+	type TLTextExternalContentSource,
+	type TLTldrawExternalContent,
+	type TLTldrawExternalContentSource,
+	type TLUrlExternalAsset,
+	type TLUrlExternalContent,
+} from './lib/editor/types/external-content'
+export {
+	type TLHistoryBatchOptions,
+	type TLHistoryDiff,
+	type TLHistoryEntry,
+	type TLHistoryMark,
+} from './lib/editor/types/history-types'
+export {
 	type OptionalKeys,
 	type RequiredKeys,
 	type TLCameraConstraints,
@@ -482,4 +498,12 @@ 	(globalThis as any).TLDRAW_LIBRARY_NAME,
 	(globalThis as any).TLDRAW_LIBRARY_VERSION,
 	(globalThis as any).TLDRAW_LIBRARY_MODULES
-)+)
+
+/** @polyfills */
+
+import 'core-js/stable/array/at.js'
+import 'core-js/stable/array/flat-map.js'
+import 'core-js/stable/array/flat.js'
+import 'core-js/stable/string/at.js'
+import 'core-js/stable/string/replace-all.js'