
index 38eca3025..c92f64bcf 100644
--- a/ghostty_src_font_sprite_underline.zig_expectedoutput.txt (expected):tmp/tmpko_qifou_expected.txt	
+++ b/ghostty_src_font_sprite_underline.zig_extracted.txt (actual):tmp/tmp1dkoem1o_actual.txt	
@@ -179,7 +179,7 @@ fn drawCurly(alloc: Allocator, width: u32, thickness: u32) !CanvasAndOffset {
 
     // The full amplitude of the wave can be from the bottom to the
     // underline position. We also calculate our mid y point of the wave
-    const half_amplitude = 1.0 / wave_period;
+    const half_amplitude = @min(float_width / 6, float_thick * 2);
     const y_mid: f64 = half_amplitude + float_thick * 0.5 + 1;
 
     // This is used in calculating the offset curve estimate below.
