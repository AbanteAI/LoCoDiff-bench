Based on the provided git log history, I need to reconstruct the exact state of the `lib/collection/src/collection_manager/segments_searcher.rs` file at the final commit. Let me carefully analyze the changes and combine them in order.

Looking at the commits, the file was created in the first commit and then modified in several subsequent commits. I'll apply each diff in sequence to build the final version.

The key changes include:
1. Initial creation with search and retrieve functionality
2. Import formatting changes
3. Replacement of tempdir with tempfile
4. Batch search implementation
5. Named vectors support
6. Faster filtered scroll
7. Probabilistic search sampling
8. Various fixes and optimizations

After processing all the diffs, here is the final content:

```rust
use std::collections::hash_map::Entry;
use std::collections::BTreeSet;
use std::sync::Arc;
use std::sync::atomic::AtomicBool;

use ahash::AHashMap;
use common::counter::hardware_accumulator::HwMeasurementAcc;
use common::types::ScoreType;
use futures::stream::FuturesUnordered;
use futures::{FutureExt, TryStreamExt};
use itertools::Itertools;
use ordered_float::Float;
use segment::common::operation_error::OperationError;
use segment::data_types::named_vectors::NamedVectors;
use segment::data_types::query_context::{FormulaContext, QueryContext, SegmentQueryContext};
use segment::data_types::vectors::{QueryVector, VectorStructInternal};
use segment::types::{
    Filter, Indexes, PointIdType, ScoredPoint, SearchParams, SegmentConfig, SeqNumberType,
    VectorName, WithPayload, WithPayloadInterface, WithVector,
};
use tinyvec::TinyVec;
use tokio::runtime::Handle;
use tokio::task::JoinHandle;

use super::holders::segment_holder::LockedSegmentHolder;
use crate