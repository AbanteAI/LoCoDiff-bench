Here are the key changes made to the `main.rs` file over time:

1. Added command line arguments for bootstrapping, URI, snapshots, etc.
2. Initialized settings, logging, and panic hooks.
3. Set up telemetry reporting.
4. Initialized consensus state and channel service.
5. Created table of contents (ToC) and dispatcher.
6. Set up consensus manager if in distributed mode.
7. Started web server, gRPC server, and other services.
8. Added health checks and readiness probes.
9. Implemented feature flags.
10. Added support for GPU HNSW indexing.
11. Improved error handling and logging.
12. Updated to use newer Rust features and dependencies.

The main function now handles:
- Parsing command line args
- Loading and validating settings
- Setting up logging and telemetry
- Initializing storage and consensus components  
- Starting web and gRPC servers
- Handling distributed deployment setup
- Managing feature flags and optional capabilities

It's evolved to handle more configuration options, improved error handling, and support for distributed deployments and advanced features like GPU acceleration.