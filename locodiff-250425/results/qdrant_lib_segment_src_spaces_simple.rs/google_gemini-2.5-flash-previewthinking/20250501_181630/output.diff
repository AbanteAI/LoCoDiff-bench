--- qdrant_lib_segment_src_spaces_simple.rs_expectedoutput.txt (expected)+++ qdrant_lib_segment_src_spaces_simple.rs_extracted.txt (actual)@@ -178,8 +178,7 @@     fn preprocess(vector: DenseVector) -> DenseVector {
         #[cfg(target_arch = "x86_64")]
         {
-            if is_x86_feature_detected!("avx")
-                && is_x86_feature_detected!("fma")
+            if is_x86_feature_detected!("avx2") // NOTE: Should this be avx + fma? Check where preproc_avx is defined.
                 && vector.len() >= MIN_DIM_SIZE_AVX
             {
                 return unsafe { cosine_preprocess_avx(vector) };
