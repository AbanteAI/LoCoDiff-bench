{% extends "base.html" %}

{% block title %}Benchmark Overview - LoCoDiff Explorer{% endblock %}

{% block content %}
    <h1>LoCoDiff Benchmark Overview</h1>

    <div class="metadata-box">
        <h2>Benchmark Summary</h2>
        <p><strong>Total Benchmark Cases Defined:</strong> {{ total_cases if total_cases is not none else 'Metadata not found' }}</p>
        <p><strong>Models with Results Found:</strong> {{ models|length }}</p>
        {% if benchmark_metadata and benchmark_metadata.generation_parameters %}
            <h3>Generation Parameters</h3>
            <ul>
                {% for key, value in benchmark_metadata.generation_parameters.items() %}
                    <li><strong>{{ key|replace('_', ' ')|title }}:</strong> {{ value }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <h2>Models Explored</h2>
    {% if models %}
        <ul>
            {% for model in models %}
                {# Use the original model name for the URL path #}
                <li><a href="{{ url_for('model_results', model_name=model) }}">{{ model }}</a></li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No benchmark results found in {{ config.RESULTS_BASE_DIR }}.</p>
        <p>Run the benchmark using <code>./run_benchmark.py --model &lt;model_name&gt; --num-runs -1</code>.</p>
    {% endif %}

    <h2>Overall Success Rate Plot</h2>
    <div class="plot-container">
        {% if plot_url %}
            <img src="{{ plot_url }}" alt="Benchmark Success Rate Plot">
            {# Use PLOT_FILENAME from config which now points to the source location #}
            <p><small>Plot generated by <code>analyze_results.py</code> and saved to <code>{{ config.PLOT_FILENAME }}</code>.</small></p>
        {% else %}
            {# Use PLOT_FILENAME from config which now points to the source location #}
            <p>Plot file (<code>{{ config.PLOT_FILENAME }}</code>) not found or could not be copied.</p>
            <p>Run <code>./analyze_results.py</code> to generate it, or run this explorer app again.</p>
        {% endif %}
    </div>

{% endblock %}
